(function(P,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("@servicestack/client"),require("react"),require("react/jsx-runtime"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","@servicestack/client","react","react/jsx-runtime","react-dom"],u):(P=typeof globalThis<"u"?globalThis:P||self,u(P.ServiceStackReact={},P.Servicestack,P.React,P.jsxRuntime))})(this,(function(P,u,l,t){"use strict";function nl(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const s in e)if(s!=="default"){const n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:()=>e[s]})}}return r.default=e,Object.freeze(r)}const le=nl(l),sn="png,jpg,jpeg,jfif,gif,svg,webp".split(","),nn={img:"png,jpg,jpeg,gif,svg,webp,png,jpg,jpeg,gif,bmp,tif,tiff,webp,ai,psd,ps".split(","),vid:"avi,m4v,mov,mp4,mpg,mpeg,wmv,webm".split(","),aud:"mp3,mpa,ogg,wav,wma,mid,webm".split(","),ppt:"key,odp,pps,ppt,pptx".split(","),xls:"xls,xlsm,xlsx,ods,csv,tsv".split(","),doc:"doc,docx,pdf,rtf,tex,txt,md,rst,xls,xlsm,xlsx,ods,key,odp,pps,ppt,pptx".split(","),zip:"zip,tar,gz,7z,rar,gzip,deflate,br,iso,dmg,z,lz,lz4,lzh,s7z,apl,arg,jar,war".split(","),exe:"exe,bat,sh,cmd,com,app,msi,run,vb,vbs,js,ws,wsh".split(","),att:"bin,oct,dat".split(",")},an=Object.keys(nn),mt=(e,r)=>`<svg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' role='img' preserveAspectRatio='xMidYMid meet' viewBox='${e}'>${r}</svg>`,hr={img:mt("4 4 16 16","<path fill='currentColor' d='M20 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2zm-2 0H6v6.38l2.19-2.19l5.23 5.23l1-1a1.59 1.59 0 0 1 2.11.11L18 16V6zm-5 3.5a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0z'/>"),vid:mt("0 0 24 24","<path fill='currentColor' d='m14 2l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8m4 18V9h-5V4H6v16h12m-2-2l-2.5-1.7V18H8v-5h5.5v1.7L16 13v5Z'/>"),aud:mt("0 0 24 24","<path fill='currentColor' d='M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zm10-9h-4v3.88a2.247 2.247 0 0 0-3.5 1.87c0 1.24 1.01 2.25 2.25 2.25S13 17.99 13 16.75V13h3v-2z'/>"),ppt:mt("0 0 48 48","<g fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='4'><path d='M4 8h40'/><path d='M8 8h32v26H8V8Z' clip-rule='evenodd'/><path d='m22 16l5 5l-5 5m-6 16l8-8l8 8'/></g>"),xls:mt("0 0 256 256","<path fill='currentColor' d='M200 26H72a14 14 0 0 0-14 14v26H40a14 14 0 0 0-14 14v96a14 14 0 0 0 14 14h18v26a14 14 0 0 0 14 14h128a14 14 0 0 0 14-14V40a14 14 0 0 0-14-14Zm-42 76h44v52h-44Zm44-62v50h-44V80a14 14 0 0 0-14-14h-2V38h58a2 2 0 0 1 2 2ZM70 40a2 2 0 0 1 2-2h58v28H70ZM38 176V80a2 2 0 0 1 2-2h104a2 2 0 0 1 2 2v96a2 2 0 0 1-2 2H40a2 2 0 0 1-2-2Zm32 40v-26h60v28H72a2 2 0 0 1-2-2Zm130 2h-58v-28h2a14 14 0 0 0 14-14v-10h44v50a2 2 0 0 1-2 2ZM69.2 148.4L84.5 128l-15.3-20.4a6 6 0 1 1 9.6-7.2L92 118l13.2-17.6a6 6 0 0 1 9.6 7.2L99.5 128l15.3 20.4a6 6 0 0 1-9.6 7.2L92 138l-13.2 17.6a6 6 0 1 1-9.6-7.2Z'/>"),doc:mt("0 0 32 32","<path fill='currentColor' d='M26 30H11a2.002 2.002 0 0 1-2-2v-6h2v6h15V6h-9V4h9a2.002 2.002 0 0 1 2 2v22a2.002 2.002 0 0 1-2 2Z'/><path fill='currentColor' d='M17 10h7v2h-7zm-1 5h8v2h-8zm-1 5h9v2h-9zm-6-1a5.005 5.005 0 0 1-5-5V3h2v11a3 3 0 0 0 6 0V5a1 1 0 0 0-2 0v10H8V5a3 3 0 0 1 6 0v9a5.005 5.005 0 0 1-5 5z'/>"),zip:mt("0 0 16 16","<g fill='currentColor'><path d='M6.5 7.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v.938l.4 1.599a1 1 0 0 1-.416 1.074l-.93.62a1 1 0 0 1-1.109 0l-.93-.62a1 1 0 0 1-.415-1.074l.4-1.599V7.5zm2 0h-1v.938a1 1 0 0 1-.03.243l-.4 1.598l.93.62l.93-.62l-.4-1.598a1 1 0 0 1-.03-.243V7.5z'/><path d='M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm5.5-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9v1H8v1h1v1H8v1h1v1H7.5V5h-1V4h1V3h-1V2h1V1z'/></g>"),exe:mt("0 0 16 16","<path fill='currentColor' fill-rule='evenodd' d='M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM2.575 15.202H.785v-1.073H2.47v-.606H.785v-1.025h1.79v-.648H0v3.999h2.575v-.647ZM6.31 11.85h-.893l-.823 1.439h-.036l-.832-1.439h-.931l1.227 1.983l-1.239 2.016h.861l.853-1.415h.035l.85 1.415h.908l-1.254-1.992L6.31 11.85Zm1.025 3.352h1.79v.647H6.548V11.85h2.576v.648h-1.79v1.025h1.684v.606H7.334v1.073Z'/>"),att:mt("0 0 24 24","<path fill='currentColor' d='M14 0a5 5 0 0 1 5 5v12a7 7 0 1 1-14 0V9h2v8a5 5 0 0 0 10 0V5a3 3 0 1 0-6 0v12a1 1 0 1 0 2 0V6h2v11a3 3 0 1 1-6 0V5a5 5 0 0 1 5-5Z'/>")},al=/[\r\n%#()<>?[\\\]^`{|}]/g,ln=1024,ll=["Bytes","KB","MB","GB","TB"],ol=(()=>{const e="application/",r=e+"vnd.openxmlformats-officedocument.",s="image/",n="text/",a="audio/",o="video/",i={jpg:s+"jpeg",tif:s+"tiff",svg:s+"svg+xml",ico:s+"x-icon",ts:n+"typescript",py:n+"x-python",sh:n+"x-sh",mp3:a+"mpeg3",mpg:o+"mpeg",ogv:o+"ogg",xlsx:r+"spreadsheetml.sheet",xltx:r+"spreadsheetml.template",docx:r+"wordprocessingml.document",dotx:r+"wordprocessingml.template",pptx:r+"presentationml.presentation",potx:r+"presentationml.template",ppsx:r+"presentationml.slideshow",mdb:e+"vnd.ms-access"};function c(h,g){h.split(",").forEach(m=>i[m]=g)}function d(h,g){h.split(",").forEach(m=>i[m]=g(m))}return d("jpeg,gif,png,tiff,bmp,webp",h=>s+h),d("jsx,csv,css",h=>n+h),d("aac,ac3,aiff,m4a,m4b,m4p,mid,midi,wav",h=>a+h),d("3gpp,avi,dv,divx,ogg,mp4,webm",h=>o+h),d("rtf,pdf",h=>e+h),c("htm,html,shtm",n+"html"),c("js,mjs,cjs",n+"javascript"),c("yml,yaml",e+"yaml"),c("bat,cmd",e+"bat"),c("xml,csproj,fsproj,vbproj",n+"xml"),c("txt,ps1",n+"plain"),c("qt,mov",o+"quicktime"),c("doc,dot",e+"msword"),c("xls,xlt,xla",e+"excel"),c("ppt,oit,pps,ppa",e+"vnd.ms-powerpoint"),c("cer,crt,der",e+"x-x509-ca-cert"),c("gz,tgz,zip,rar,lzh,z",e+"x-compressed"),c("aaf,aca,asd,bin,cab,chm,class,cur,db,dat,deploy,dll,dsp,exe,fla,ics,inf,mix,msi,mso,obj,ocx,prm,prx,psd,psp,qxd,sea,snp,so,sqlite,toc,ttf,u32,xmp,xsn,xtp",e+"octet-stream"),i})();let Gr=[];function on(e){return e=e.replace(/"/g,"'"),e=e.replace(/>\s+</g,"><"),e=e.replace(/\s{2,}/g," "),e.replace(al,encodeURIComponent)}function Zr(e){return"data:image/svg+xml;utf8,"+on(e)}function cn(e){let r=URL.createObjectURL(e);return Gr.push(r),r}function dn(){Gr.forEach(e=>{try{URL.revokeObjectURL(e)}catch(r){console.error("URL.revokeObjectURL",r)}}),Gr=[]}function Jr(e){if(!e)return null;let r=u.leftPart(e,"?");return u.lastRightPart(r,"/")}function Zt(e){let r=Jr(e);return r==null||r.indexOf(".")===-1?null:u.lastRightPart(r,".").toLowerCase()}function Xr(e){let r=Zt(e.name);return r&&sn.indexOf(r)>=0?cn(e):Ot(e.name)}function Yr(e){if(!e)return!1;if(e.startsWith("blob:")||e.startsWith("data:"))return!0;let r=Zt(e);return r&&sn.indexOf(r)>=0||!1}function bi(e){return e}function Ot(e){if(!e)return null;let r=Zt(e);return r==null||Yr(e)?e:Jt(r)||Zr(hr.doc)}function Jt(e){let r=un(e);return r&&Zr(r)||null}function un(e){if(hr[e])return hr[e];for(let r=0;r<an.length;r++){let s=an[r];if(nn[s].indexOf(e)>=0)return hr[s]}return null}function Rr(e,r=2){if(e===0)return"0 Bytes";const s=r<0?0:r,n=Math.floor(Math.log(e)/Math.log(ln));return parseFloat((e/Math.pow(ln,n)).toFixed(s))+" "+ll[n]}function il(e){return e.files&&Array.from(e.files).map(r=>({fileName:r.name,contentLength:r.size,filePath:Xr(r)}))}function gr(e,r){e.onerror=null,e.src=es(e.src,r)||""}function es(e,r){return Jt(u.lastRightPart(e,".").toLowerCase())||(r?Jt(r)||r:null)||Jt("doc")}function ts(e){if(!e)throw new Error("fileNameOrExt required");const r=u.lastRightPart(e,".").toLowerCase();return ol[r]||"application/"+r}function fn(){return{extSvg:un,extSrc:Jt,getExt:Zt,encodeSvg:on,canPreview:Yr,getFileName:Jr,getMimeType:ts,formatBytes:Rr,filePathUri:Ot,svgToDataUri:Zr,fileImageUri:Xr,objectUrl:cn,flush:dn,inputFiles:il,iconOnError:gr,iconFallbackSrc:es}}const Ft="/metadata/app.json",cl={Boolean:"checkbox",DateTime:"date",DateOnly:"date",DateTimeOffset:"date",TimeSpan:"time",TimeOnly:"time",Byte:"number",Short:"number",Int64:"number",Int32:"number",UInt16:"number",UInt32:"number",UInt64:"number",Single:"number",Double:"number",Decimal:"number",String:"text",Guid:"text",Uri:"text"},dl={number:"Int32",checkbox:"Boolean",date:"DateTime","datetime-local":"DateTime",time:"TimeSpan"},ul={String:"string",Boolean:"bool",...{Byte:"byte",Int16:"short",Int32:"int",Int64:"long",UInt16:"ushort",Unt32:"uint",UInt64:"ulong",Single:"float",Double:"double",Decimal:"decimal"}};function pr(e){return ul[e]||e}function hn(e,r){return e?(r||(r=[]),e==="Nullable`1"?pr(r[0])+"?":e.endsWith("[]")?`List<${pr(e.substring(0,e.length-2))}>`:r.length===0?pr(e):u.leftPart(pr(e),"`")+"<"+r.join(",")+">"):""}function fl(e){return e&&hn(e.name,e.genericArgs)}class At{Query;QueryInto;Create;Update;Patch;Delete;get AnyQuery(){return this.Query||this.QueryInto}get AnyUpdate(){return this.Patch||this.Update}get dataModel(){return this.AnyQuery?.dataModel}toArray(){return[this.Query,this.QueryInto,this.Create,this.Update,this.Patch,this.Delete].filter(s=>!!s).map(s=>s)}get empty(){return!this.Query&&!this.QueryInto&&!this.Create&&!this.Update&&!this.Patch&&!this.Delete}add(r){_e.isQueryInto(r)&&!this.QueryInto?this.QueryInto=r:_e.isQuery(r)&&!this.Query?this.Query=r:_e.isCreate(r)&&!this.Create?this.Create=r:_e.isUpdate(r)&&!this.Update?this.Update=r:_e.isPatch(r)&&!this.Patch?this.Patch=r:_e.isDelete(r)&&!this.Delete&&(this.Delete=r)}static from(r){const s=new At;return r.forEach(n=>{s.add(n)}),s}static forType(r,s){let n=new At;if(z.config.apisResolver&&r){const a=z.config.apisResolver(r,s);a&&(n.Query=a.Query,n.QueryInto=a.QueryInto,n.Create=a.Create,n.Update=a.Update,n.Patch=a.Patch,n.Delete=a.Delete)}return r&&(s??=z.metadata.value?.api,s?.operations.forEach(a=>{a.dataModel?.name==r&&n.add(a)})),n}}const _e={Create:"ICreateDb`1",Update:"IUpdateDb`1",Patch:"IPatchDb`1",Delete:"IDeleteDb`1",AnyRead:["QueryDb`1","QueryDb`2"],AnyWrite:["ICreateDb`1","IUpdateDb`1","IPatchDb`1","IDeleteDb`1"],isAnyQuery:e=>u.map(e.request.inherits,r=>_e.AnyRead.indexOf(r.name)>=0),isQuery:e=>u.map(e.request.inherits,r=>r.name==="QueryDb`1"),isQueryInto:e=>u.map(e.request.inherits,r=>r.name==="QueryDb`2"),isCrud:e=>e.request.implements?.some(r=>_e.AnyWrite.indexOf(r.name)>=0),isCreate:e=>xr(e,_e.Create),isUpdate:e=>xr(e,_e.Update),isPatch:e=>xr(e,_e.Patch),isDelete:e=>xr(e,_e.Delete),model:e=>e?u.map(e.inherits,r=>_e.AnyRead.indexOf(r.name)>=0)?e.inherits?.genericArgs[0]:e.implements?.find(r=>_e.AnyWrite.indexOf(r.name)>=0)?.genericArgs[0]:null};function hl(e){return e.input?.type||mr(rs(e))}function gn(e){return e.endsWith("?")?u.chop(e,1):e}function mr(e){return cl[gn(e)]}function gl(e){return e&&dl[e]||"String"}function rs(e){return e.type==="Nullable`1"?e.genericArgs[0]:e.type}function ss(e){return e&&mr(e)=="number"||!1}function pn(e){return e&&e.toLowerCase()=="string"||!1}function pl(e){return e=="List`1"||e.startsWith("List<")||e.endsWith("[]")}function mn(e){if(!e?.type)return!1;const r=rs(e);return e.isValueType&&r.indexOf("`")==-1||e.isEnum?!1:mr(e.type)==null}function vn(e){if(!e?.type)return!1;const r=rs(e);if(e.isValueType&&r.indexOf("`")==-1||e.isEnum)return!0;const s=e.input?.type;return s&&(s=="hidden"||s=="file"||s=="tag"||s=="combobox"||z.components?.[s])?!0:mr(e.type)!=null}function Xt(e,r){let s=typeof e=="string"?wr(e):e;s||(console.warn(`Metadata not found for: ${e}`),s={request:{name:e}});let n=(function(){return function(o){Object.assign(this,o)}})(),a=(function(){function o(i){Object.assign(this,i)}return o.prototype.createResponse=function(){return s.returnsVoid?void 0:new n},o.prototype.getTypeName=function(){return s.request.name},o.prototype.getMethod=function(){return s.method||"POST"},o})();return new a(r)}function ml(e,r,s={}){let n=(function(){return function(o){Object.assign(this,o)}})(),a=(function(){function o(i){Object.assign(this,i)}return o.prototype.createResponse=function(){return typeof s.createResponse=="function"?s.createResponse():new n},o.prototype.getTypeName=function(){return e},o.prototype.getMethod=function(){return s.method||"POST"},o})();return new a(r)}function vr(e,r){return e?(Object.keys(e).forEach(s=>{let n=e[s];typeof n=="string"?n.startsWith("/Date")&&(e[s]=Mr(u.toDate(n))):n!=null&&typeof n=="object"&&(Array.isArray(n)?e[s]=Array.from(n):e[s]=Object.assign({},n))}),e):{}}function vl(e,r){let s={};return Array.from(e.elements).forEach(n=>{let a=n;if(!a.id||a.value==null||a.value==="")return;const o=a.id.toLowerCase(),i=r&&r.find(g=>g.name.toLowerCase()==o);let c=i?.type,d=i?.genericArgs?.[0],h=a.type==="checkbox"?a.checked:a.value;ss(c)?h=Number(h):c==="List`1"&&typeof h=="string"&&(h=h.split(",").map(g=>ss(d)?Number(g):g)),s[a.id]=h}),s}function ns(e){return e?.api?.operations&&e.api.operations.length>0}function yl(e){if(!as()&&e?.assert&&!z.metadata.value)throw new Error("useMetadata() not configured, see: https://docs.servicestack.net/vue/use-metadata");return z.metadata.value}function yr(e){return e&&ns(e)?(e.date=u.toDateTime(new Date),z.metadata.value=e,typeof localStorage<"u"&&localStorage.setItem(Ft,JSON.stringify(e)),!0):!1}function wl(){z.metadata.value=null,typeof localStorage<"u"&&localStorage.removeItem(Ft)}function as(){if(z.metadata.value!=null)return!0;let e=globalThis.Server;if(ns(e))yr(e);else{const r=typeof localStorage<"u"?localStorage.getItem(Ft):null;if(r)try{yr(JSON.parse(r))}catch{console.error(`Could not JSON.parse ${Ft} from localStorage`)}}return z.metadata.value!=null}async function yn(e,r){let s=r?await r():await fetch(e);if(s.ok){let n=await s.text();yr(JSON.parse(n))}else console.error(`Could not download ${r?"AppMetadata":e}: ${s.statusText}`);ns(z.metadata.value)||console.warn("AppMetadata is not available")}async function xl(e){const{olderThan:r,resolvePath:s,resolve:n}=e||{};let a=as()&&r!==0;if(a&&r){let o=u.toDate(z.metadata.value?.date);(!o||new Date().getTime()-o.getTime()>r)&&(a=!1)}if(!a){if((s||n)&&(await yn(s||Ft,n),z.metadata.value!=null)||z.metadata.value!=null)return;await yn(Ft)}return z.metadata.value}function nt(e,r){if(z.config.typeResolver){let i=z.config.typeResolver(e,r);if(i)return i}let s=z.metadata.value?.api;if(!s||!e)return null;let n=s.types.find(i=>i.name.toLowerCase()===e.toLowerCase()&&(!r||i.namespace==r));if(n)return n;let a=wr(e);if(a)return a.request;let o=s.operations.find(i=>i.response&&i.response.name.toLowerCase()===e.toLowerCase()&&(!r||i.response.namespace==r));return o?o.response:null}function wr(e){if(z.config.apiResolver){const n=z.config.apiResolver(e);if(n)return n}let r=z.metadata.value?.api;return r?r.operations.find(n=>n.request.name.toLowerCase()===e.toLowerCase()):null}function bl({dataModel:e}){const r=z.metadata.value?.api;if(!r)return[];let s=r.operations;if(e){const n=typeof e=="string"?nt(e):e;s=s.filter(a=>wn(a.dataModel,n))}return s}function ls(e){return e?nt(e.name,e.namespace):null}function wn(e,r){return e&&r&&e.name===r.name&&(!e.namespace||!r.namespace||e.namespace===r.namespace)}function Nl(e,r){let s=nt(e);return s&&s.properties&&s.properties.find(a=>a.name.toLowerCase()===r.toLowerCase())}function xn(e){return bn(nt(e))}function bn(e){if(e&&e.isEnum&&e.enumNames!=null){let r={};for(let s=0;s<e.enumNames.length;s++){const n=(e.enumDescriptions?e.enumDescriptions[s]:null)||e.enumNames[s],a=(e.enumValues!=null?e.enumValues[s]:null)||e.enumNames[s];r[a]=n}return r}return null}function Nn(e){if(!e)return null;let r={},s=e.input&&e.input.allowableEntries;if(s){for(let a=0;a<s.length;a++){let o=s[a];r[o.key]=o.value}return r}let n=e.allowableValues||(e.input?e.input.allowableValues:null);if(n){for(let a=0;a<n.length;a++){let o=n[a];r[o]=o}return r}if(e.isEnum){const a=e.genericArgs&&e.genericArgs.length==1?e.genericArgs[0]:e.type,o=nt(a);if(o)return bn(o)}return null}function os(e){if(!e)return;const r=[];return Object.keys(e).forEach(s=>r.push({key:s,value:e[s]})),r}function kl(e,r){const n=((a,o)=>Object.assign({id:a,name:a,type:o},r))(e.name,r?.type||hl(e)||"text");return e.isEnum&&(n.type="select",n.allowableEntries=os(Nn(e))),n}function Cl(e){let r=[];if(e){const s=et(e),n=wr(e.name),a=ls(n?.dataModel);s.forEach(o=>{if(!vn(o))return;const i=kl(o,o.input);if(i.id=u.toCamelCase(i.id),i.type=="file"&&o.uploadTo&&!i.accept){const c=z.metadata.value?.plugins.filesUpload?.locations.find(d=>d.name==o.uploadTo);c&&!i.accept&&c.allowExtensions&&(i.accept=c.allowExtensions.map(d=>d.startsWith(".")?d:`.${d}`).join(","))}if(a){const c=a.properties?.find(d=>d.name==o.name);o.ref||(o.ref=c?.ref)}if(i.options)try{const c={input:i,$typeFields:s.map(h=>h.name),$dataModelFields:a?et(a).map(h=>h.name):[],...z.config.scopeWhitelist},d=Er(i.options,c);Object.keys(d).forEach(h=>{i[h]=d[h]})}catch{console.error(`failed to evaluate '${i.options}'`)}r.push(i)})}return r}function is(e,r){if(!r.type)return console.error("enumDescriptions missing {type:'EnumType'} options"),[`${e}`];const s=nt(r.type);if(!s?.enumValues)return console.error(`Could not find metadata for ${r.type}`),[`${e}`];const n=[];for(let a=0;a<s.enumValues.length;a++){const o=parseInt(s.enumValues[a]);o>0&&(o&e)===o&&n.push(s.enumDescriptions?.[a]||s.enumNames?.[a]||`${e}`)}return n}function kn(e){return r=>typeof r=="number"?is(r,{type:e}):r}function et(e){if(!e)return[];let r=[],s={};function n(a){a.forEach(o=>{s[o.name]||(s[o.name]=1,r.push(o))})}for(;e;)e.properties&&n(e.properties),e=e.inherits?ls(e.inherits):null;return r.map(a=>a.type.endsWith("[]")?{...a,type:"List`1",genericArgs:[a.type.substring(0,a.type.length-2)]}:a)}function xr(e,r){return e.request.implements?.some(s=>s.name===r)||!1}function jt(e){return e?Cn(e,et(e)):null}function Cn(e,r){let s=r.find(o=>o.name.toLowerCase()==="id");if(s&&s.isPrimaryKey)return s;let a=r.find(o=>o.isPrimaryKey)||s;if(!a){let o=_e.model(e);if(o)return u.map(nt(o),i=>jt(i));console.error(`Primary Key not found in ${e.name}`)}return a||null}function Ml(e,r){return u.map(jt(e),s=>u.mapGet(r,s.name))}function Mn(e,r,s){return e&&e.valueType==="none"?"":s.key==="%In"||s.key==="%Between"?`(${s.value})`:Ll(r,s.value)}function Ll(e,r){return e?(e=gn(e),ss(e)||e==="Boolean"?r:pl(e)?`[${r}]`:`'${r}'`):r}function xt(e,r){return{name:e,value:r}}const Ln=[xt("=","%"),xt("!=","%!"),xt(">=",">%"),xt(">","%>"),xt("<=","%<"),xt("<","<%"),xt("In","%In"),xt("Between","%Between"),{name:"Starts With",value:"%StartsWith",types:"string"},{name:"Contains",value:"%Contains",types:"string"},{name:"Ends With",value:"%EndsWith",types:"string"},{name:"Exists",value:"%IsNotNull",valueType:"none"},{name:"Not Exists",value:"%IsNull",valueType:"none"}];function Xe(){const[e,r]=l.useState(z.metadata.value?.app||null),[s,n]=l.useState(z.metadata.value?.api||null),[a,o]=l.useState(z.metadata.value?.plugins?.autoQuery?.viewerConventions||Ln);return l.useEffect(()=>(as(),z.metadata.subscribe(i=>{r(i?.app||null),n(i?.api||null),o(i?.plugins?.autoQuery?.viewerConventions||Ln)})),[]),{loadMetadata:xl,getMetadata:yl,setMetadata:yr,clearMetadata:wl,metadataApp:e,metadataApi:s,filterDefinitions:a,typeOf:nt,typeOfRef:ls,typeEquals:wn,apiOf:wr,findApis:bl,typeName:fl,typeName2:hn,property:Nl,enumOptions:xn,propertyOptions:Nn,createFormLayout:Cl,typeProperties:et,supportsProp:vn,Crud:_e,Apis:At,getPrimaryKey:jt,getPrimaryKeyByProps:Cn,getId:Ml,createDto:Xt,makeDto:ml,toFormValues:vr,formValues:vl,isComplexProp:mn,asKvps:os,expandEnumFlags:is,enumFlagsConverter:kn}}class Ze{static Lookup={};static async getOrFetchValue(r,s,n,a,o,i,c){const d=Ze.getValue(n,c,o);return d??(await Ze.fetchLookupIds(r,s,n,a,o,i,[c]),Ze.getValue(n,c,o))}static getValue(r,s,n){const a=Ze.Lookup[r];if(a){const o=a[s];if(o)return n=n.toLowerCase(),o[n]}}static setValue(r,s,n,a){const o=Ze.Lookup[r]??(Ze.Lookup[r]={}),i=o[s]??(o[s]={});n=n.toLowerCase(),i[n]=a}static setRefValue(r,s){const n=u.mapGet(s,r.refId);if(n==null||r.refLabel==null)return null;const a=u.mapGet(s,r.refLabel);return Ze.setValue(r.model,n,r.refLabel,a),a}static async fetchLookupIds(r,s,n,a,o,i,c){const d=s.operations.find(h=>_e.isAnyQuery(h)&&h.dataModel?.name==n);if(d){const h=Ze.Lookup[n]??(Ze.Lookup[n]={}),g=[];Object.keys(h).forEach(L=>{const k=h[L];u.mapGet(k,o)&&g.push(L)});const m=c.filter(L=>!g.includes(L));if(m.length==0)return;const p=i?null:`${a},${o}`,y={[a+"In"]:m.join(",")};p&&(y.fields=p);const A=Xt(d,y),v=await r.api(A,{jsconfig:"edv,eccn"});if(v.succeeded)(u.mapGet(v.response,"results")||[]).forEach(k=>{if(!u.mapGet(k,a)){console.error(`result[${a}] == null`,k);return}const w=`${u.mapGet(k,a)}`,b=u.mapGet(k,o);o=o.toLowerCase();const N=h[w]??(h[w]={});N[o]=`${b}`});else{console.error(`Failed to call ${d.request.name}`);return}}}}let cs=()=>new Date().getTime(),Sl=["/","T",":","-"],ot={assumeUtc:!0,date:{method:"Intl.DateTimeFormat",options:"{dateStyle:'medium'}"},maxFieldLength:150,maxNestedFields:2,maxNestedFieldLength:30},Al=new Intl.RelativeTimeFormat(ot.locale,{}),Sn=1440*60*1e3*365,ds={year:Sn,month:Sn/12,day:1440*60*1e3,hour:3600*1e3,minute:60*1e3,second:1e3},Et={currency:En,bytes:Tn,link:Dn,linkTel:$n,linkMailTo:In,icon:On,iconRounded:Fn,attachment:jn,hidden:Vn,time:zn,relativeTime:fs,relativeTimeFromMs:kr,enumFlags:Bn,formatDate:Vt,formatNumber:us};"iconOnError"in globalThis||(globalThis.iconOnError=gr);class El{static currency={method:"currency"};static bytes={method:"bytes"};static link={method:"link"};static linkTel={method:"linkTel"};static linkMailTo={method:"linkMailTo"};static icon={method:"icon"};static iconRounded={method:"iconRounded"};static attachment={method:"attachment"};static time={method:"time"};static relativeTime={method:"relativeTime"};static relativeTimeFromMs={method:"relativeTimeFromMs"};static date={method:"formatDate"};static number={method:"formatNumber"};static hidden={method:"hidden"};static enumFlags={method:"enumFlags"}}function Tl(e){ot=Object.assign({},ot,e)}function Dl(e){Object.keys(e||{}).forEach(r=>{typeof e[r]=="function"&&(Et[r]=e[r])})}function An(){return Et}function Yt(e,r){return r?it("span",e,r):e}function En(e,r){const s=u.omit(r,["currency"]);return Yt(new Intl.NumberFormat(void 0,{style:"currency",currency:r?.currency||"USD"}).format(e),s)}function Tn(e,r){return Yt(Rr(e),r)}function Dn(e,r){return it("a",e,Sr({...r,href:e}))}function $n(e,r){return it("a",e,Sr({...r,href:`tel:${e}`}))}function In(e,r){r||(r={});let{subject:s,body:n}=r,a=u.omit(r,["subject","body"]),o={};return s&&(o.subject=s),n&&(o.body=n),it("a",e,Sr({...a,href:`mailto:${u.appendQueryString(e,o)}`}))}function On(e,r){return it("img",void 0,Object.assign({class:"w-6 h-6",title:e,src:Pt(e),onerror:"iconOnError(this)"},r))}function Fn(e,r){return it("img",void 0,Object.assign({class:"w-8 h-8 rounded-full",title:e,src:Pt(e),onerror:"iconOnError(this)"},r))}function jn(e,r){let s=Jr(e),a=Zt(s)==null||Yr(e)?Pt(e):es(e);const o=Pt(a);let i=r&&(r["icon-class"]||r.iconClass),c=it("img",void 0,Object.assign({class:"w-6 h-6",src:o,onerror:"iconOnError(this,'att')"},i?{class:i}:null)),d=`<span class="pl-1">${s}</span>`;return it("a",c+d,Object.assign({class:"flex",href:Pt(e),title:e},r?u.omit(r,["icon-class","iconClass"]):null))}function Vn(e){return""}function zn(e,r){let s=typeof e=="string"?new Date(u.fromXsdDuration(e)*1e3):u.isDate(e)?u.toDate(e):null;return Yt(s?u.timeFmt12(s):e,r)}function Vt(e,r){if(e==null)return"";let s=typeof e=="number"?new Date(e):typeof e=="string"?u.toDate(e):e;if(!u.isDate(s))return console.warn(`${s} is not a Date value`),e==null?"":`${e}`;let n=ot.date?Cr(ot.date):null;return Yt(typeof n=="function"?n(s):u.dateFmt(s),r)}function us(e,r){if(typeof e!="number")return e;let s=ot.number?Cr(ot.number):null,n=typeof s=="function"?s(e):`${e}`;return n===""&&(console.warn(`formatNumber(${e}) => ${n}`,s),n=`${e}`),Yt(n,r)}function br(e){const r=Math.floor(e/1e3),s=Math.floor(r/60),n=Math.floor(s/60),a=Math.floor(n/24);return a>0?`${a}d ${br(e-a*24*60*6e4)}`:n>0?`${n}h ${br(e-n*60*6e4)}`:s>0?`${s}m ${br(e-s*6e4)}`:r>0?`${r}s`:`${e}ms`}function $l(e){return e>=1e9?(e/1e9).toFixed(1)+"b":e>=1e6?(e/1e6).toFixed(1)+"m":e>=1e3?(e/1e3).toFixed(1)+"k":e.toLocaleString()}function Pn(e,r,s){let n=u.apiValue(e),a=r?Cr(r):null;if(typeof a=="function"){let i=s;if(r?.options)try{i=Er(r.options,s)}catch(c){console.error(`Could not evaluate '${r.options}'`,c,", with scope:",s)}return a(e,i)}let o=n!=null?u.isDate(n)?Vt(n,s):typeof n=="number"?us(n,s):n:null;return o??""}function Nr(e,r,s){return Tt(e)?Pn(e,r,s):Vl(e,r,s)}function Il(e){if(e==null)return NaN;if(typeof e=="number")return e;if(u.isDate(e))return e.getTime()-cs();if(typeof e=="string"){let r=Number(e);if(!isNaN(r))return r;if(e[0]==="P"||e.startsWith("-P"))return u.fromXsdDuration(e)*1e3*-1;if(u.indexOfAny(e,Sl)>=0)return u.toDate(e).getTime()-cs()}return NaN}function kr(e,r){for(let s in ds)if(Math.abs(e)>ds[s]||s==="second")return(r||Al).format(Math.round(e/ds[s]),s)}function fs(e,r){let s=Il(e);return isNaN(s)?"":kr(s,r)}function Ol(e,r){return kr(e.getTime()-(r?r.getTime():cs()))}function Bn(e,r){return is(e,r).join(", ")}function Cr(e){if(!e)return null;let{method:r,options:s}=e,n=`${r}(${s})`,a=Et[n]||Et[r];if(typeof a=="function")return a;let o=e.locale||ot.locale;if(r.startsWith("Intl.")){let i=o?`'${o}'`:"undefined",c=`return new ${r}(${i},${s||"undefined"})`;try{let d=Function(c)();return a=r==="Intl.DateTimeFormat"?h=>d.format(u.toDate(h)):r==="Intl.NumberFormat"?h=>d.format(Number(h)):r==="Intl.RelativeTimeFormat"?h=>fs(h,d):h=>d.format(h),Et[n]=a}catch(d){console.error(`Invalid format: ${c}`,d)}}else{let i=globalThis[r];if(typeof i=="function"){let c=s!=null?Function("return "+s)():void 0;return a=d=>i(d,c,o),Et[n]=a}console.error(`No '${r}' function exists`,Object.keys(Et))}return null}function Hn(e,r){return e?e.length>r?e.substring(0,r)+"...":e:""}function Un(e){return e.substring(0,6)==="/Date("?Vt(u.toDate(e)):e}function Fl(e){return hs(zt(e)).replace(/"/g,"")}function qn(e){if(e==null||e==="")return"";if(typeof e=="string")try{return JSON.parse(e)}catch{console.warn("couldn't parse as JSON",e)}return e}function hs(e,r=4){return e=qn(e),typeof e!="object"?typeof e=="string"?e:`${e}`:JSON.stringify(e,void 0,r)}function jl(e){return e=qn(e),typeof e!="object"?typeof e=="string"?e:`${e}`:(e=Object.assign({},e),e=zt(e),hs(e))}function zt(e){if(e==null)return null;if(typeof e=="string")return Un(e);if(Tt(e))return e;if(e instanceof Date)return Vt(e);if(Array.isArray(e))return e.map(zt);if(typeof e=="object"){let r={};return Object.keys(e).forEach(s=>{s!="__type"&&(r[s]=zt(e[s]))}),r}return e}function Vl(e,r,s){let n=e;if(Array.isArray(e)){if(Tt(e[0]))return n.join(",");e[0]!=null&&(n=e[0])}if(n==null)return"";if(n instanceof Date)return Vt(n,s);let a=Object.keys(n),o=[];for(let i=0;i<Math.min(ot.maxNestedFields,a.length);i++){let c=a[i],d=`${zt(n[c])}`;o.push(`<b class="font-medium">${c}</b>: ${u.enc(Hn(Un(d),ot.maxNestedFieldLength))}`)}return a.length>2&&o.push("..."),it("span","{ "+o.join(", ")+" }",Object.assign({title:u.enc(Fl(e))},s))}function zl(){return{Formats:El,setDefaultFormats:Tl,getFormatters:An,setFormatters:Dl,formatValue:Nr,formatter:Cr,dateInputFormat:Mr,currency:En,bytes:Tn,link:Dn,linkTel:$n,linkMailTo:In,icon:On,iconRounded:Fn,attachment:jn,hidden:Vn,time:zn,relativeTime:fs,relativeTimeFromDate:Ol,relativeTimeFromMs:kr,enumFlags:Bn,formatDate:Vt,formatNumber:us,humanifyMs:br,humanifyNumber:$l,indentJson:hs,prettyJson:jl,scrub:zt,truncate:Hn,apiValueFmt:Pn,iconOnError:gr}}class Pl{callbacks={};register(r,s){this.callbacks[r]=s}has(r){return!!this.callbacks[r]}invoke(r,s){const n=this.callbacks[r];typeof n=="function"&&n(r,s)}}class Bl{get length(){return typeof localStorage>"u"?0:localStorage.length}getItem(r){return typeof localStorage>"u"?null:localStorage.getItem(r)}setItem(r,s){typeof localStorage>"u"||localStorage.setItem(r,s)}removeItem(r){typeof localStorage>"u"||localStorage.removeItem(r)}clear(){typeof localStorage>"u"||localStorage.clear()}key(r){return typeof localStorage>"u"?null:localStorage.key(r)}}class _n{_value;listeners=new Set;constructor(r){this._value=r}get value(){return this._value}set value(r){this._value=r,this.listeners.forEach(s=>s(r))}subscribe(r){return this.listeners.add(r),()=>this.listeners.delete(r)}}class z{static config={redirectSignIn:"/signin",redirectSignOut:"/auth/logout",navigate:r=>location.href=r,assetsPathResolver:r=>r,fallbackPathResolver:r=>r,storage:new Bl,tableIcon:{svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><g fill='none' stroke='currentColor' stroke-width='1.5'><path d='M5 12v6s0 3 7 3s7-3 7-3v-6'/><path d='M5 6v6s0 3 7 3s7-3 7-3V6'/><path d='M12 3c7 0 7 3 7 3s0 3-7 3s-7-3-7-3s0-3 7-3Z'/></g></svg>"},scopeWhitelist:{enumFlagsConverter:kn,...An()}};static autoQueryGridDefaults={deny:[],hide:[],toolbarButtonClass:void 0,tableStyle:"stripedRows",take:25,maxFieldLength:150};static events=u.createBus();static user=new _n(null);static metadata=new _n(null);static components={};static component(r){const s=z.components[r];if(s)return s;const n=u.toKebabCase(r),a=Object.keys(z.components).find(o=>u.toKebabCase(o)===n);return a&&z.components[a]||null}static interceptors=new Pl}function Hl(e){z.config=Object.assign(z.config,e)}function Ul(e){z.autoQueryGridDefaults=Object.assign(z.autoQueryGridDefaults,e)}function gs(e){return e&&z.config.assetsPathResolver?z.config.assetsPathResolver(e):e}function ql(e){return e&&z.config.fallbackPathResolver?z.config.fallbackPathResolver(e):e}function _l(e,r){z.interceptors.register(e,r)}function bt(){const e=z.config,r=z.autoQueryGridDefaults,s=z.events;return{config:e,setConfig:Hl,events:s,autoQueryGridDefaults:r,setAutoQueryGridDefaults:Ul,assetsPathResolver:gs,fallbackPathResolver:ql,registerInterceptor:_l}}function Mr(e){if(e==null||typeof e=="object")return"";const r=u.toDate(e);return r==null||r.toString()=="Invalid Date"?"":r.toISOString().substring(0,10)??""}function Qn(e){if(e==null||typeof e=="object")return"";const r=u.toDate(e);return r==null||r.toString()=="Invalid Date"?"":r.toISOString().substring(0,19)??""}function Wn(e){return e==null?"":u.toTime(e)}function ps(e,r){return z.config.inputValue?z.config.inputValue(e,r):e==="date"?Mr(r):e==="datetime-local"?Qn(r):e==="time"?Wn(r):e==="number"||e==="range"?r==null?"":Number(r):r}function Kn(e,r,s){s?(s(null),setTimeout(()=>s(r),0)):(e.current=null,setTimeout(()=>e.current=r,0))}function Gn(e){return e}function Nt(e,r,s){s?(r(e.entering.cls+" "+e.entering.from),setTimeout(()=>r(e.entering.cls+" "+e.entering.to),0)):(r(e.leaving.cls+" "+e.leaving.from),setTimeout(()=>r(e.leaving.cls+" "+e.leaving.to),0))}function Lr(e){if(typeof document>"u")return;let r=e?.after||document.activeElement,s=r&&r.form;if(s){let n=':not([disabled]):not([tabindex="-1"])',a=s.querySelectorAll(`a:not([disabled]), button${n}, input[type=text]${n}, [tabindex]${n}`),o=Array.prototype.filter.call(a,c=>c.offsetWidth>0||c.offsetHeight>0||c===r),i=o.indexOf(r);i>-1&&(o[i+1]||o[0]).focus()}}function kt(e){if(!e)return null;if(typeof e=="string")return e;const r=typeof e=="function"?new e:typeof e=="object"?e:null;if(!r)throw new Error(`Invalid DTO Type '${typeof e}'`);if(typeof r.getTypeName!="function")throw new Error(`${JSON.stringify(r)} is not a Request DTO`);const s=r.getTypeName();if(!s)throw new Error("DTO Required");return s}function it(e,r,s){s||(s={});let n=s.cls||s.className||s.class;return n&&(s=u.omit(s,["cls","class","className"]),s.class=n),r==null?`<${e}`+ms(s)+"/>":`<${e}`+ms(s)+`>${r||""}</${e}>`}function ms(e){return Object.keys(e).reduce((r,s)=>`${r} ${s}="${u.enc(e[s])}"`,"")}function Sr(e){return Object.assign({target:"_blank",rel:"noopener",class:"text-blue-600"},e)}function Pt(e){return gs(e)}let Ql=["string","number","boolean","null","undefined"];function Tt(e){return Ql.indexOf(typeof e)>=0||e instanceof Date}function Rt(e){return!Tt(e)}function Ar(e){return typeof e=="string"?JSON.parse(e):null}function vs(e,r){if(typeof history<"u"){const s=r?u.appendQueryString(u.lastLeftPart(location.href,"?"),e):u.setQueryString(location.href,e);history.pushState({},"",s)}}function Er(e,r){if(["function","Function","eval","=>",";"].some(a=>e.includes(a)))throw new Error(`Unsafe script: '${e}'`);const n=Object.assign(Object.keys(globalThis).reduce((a,o)=>(a[o]=void 0,a),{}),r);return new Function("with(this) { return ("+e+") }").call(n)}function ys(e){typeof navigator<"u"&&navigator.clipboard.writeText(e)}function ws(e){const r=z.config.storage.getItem(e);return r?JSON.parse(r):null}function Tr(e,r){return u.appendQueryString(`swr.${u.nameOf(e)}`,r?Object.assign({},e,r):e)}function Wl(e){if(e.request){const r=Tr(e.request,e.args);z.config.storage.removeItem(r)}}async function Zn(e,r,s,n,a){const o=Tr(r,n);s(new u.ApiResult({response:ws(o)}));const i=await e.api(r,n,a);if(i.succeeded&&i.response){i.response._date=new Date().valueOf();const c=JSON.stringify(i.response);z.config.storage.setItem(o,c),s(i)}return i}function Jn(e,r){let s=null;return(...n)=>{s&&clearTimeout(s),s=setTimeout(()=>{e(...n)},r||100)}}function Dt(e){return typeof e=="string"?e.split(","):e||[]}function $t(e,r){const s=Dt(r);return e.reduce((n,a)=>(n[a]=!s.includes(a),n),{})}function Kl(e){return new Promise(r=>setTimeout(r,e))}function Xn(e){const r=[],s=[];for(const n of e){const a=n.toLowerCase();s.includes(a)||(r.push(n),s.push(a))}return r}function Yn(){return{dateInputFormat:Mr,dateTimeInputFormat:Qn,timeInputFormat:Wn,textInputValue:ps,setRef:Kn,unRefs:Gn,transition:Nt,focusNextElement:Lr,getTypeName:kt,htmlTag:it,htmlAttrs:ms,linkAttrs:Sr,toAppUrl:Pt,isPrimitive:Tt,isComplexType:Rt,pushState:vs,scopedExpr:Er,copyText:ys,fromCache:ws,swrCacheKey:Tr,swrClear:Wl,swrApi:Zn,asStrings:Dt,asOptions:$t,createDebounce:Jn,delay:Kl,uniqueIgnoreCase:Xn}}const Dr=l.createContext(void 0);function Ct(e){const[r,s]=l.useState(!1),[n,a]=l.useState(),[o,i]=l.useState(),c=e??l.useContext(Dr);function d({message:b,errorCode:N,fieldName:M,errors:j}){N||(N="Exception"),j||(j=[]);const S=M?new u.ResponseStatus({errorCode:N,message:b,errors:[new u.ResponseError({fieldName:M,errorCode:N,message:b})]}):new u.ResponseStatus({errorCode:N,message:b,errors:j});return a(S),S}function h({fieldName:b,message:N,errorCode:M}){if(M||(M="Exception"),!n)d({fieldName:b,message:N,errorCode:M});else{let j=new u.ResponseStatus(n);j.errors=[...(j.errors||[]).filter(S=>S.fieldName?.toLowerCase()!==b?.toLowerCase()),new u.ResponseError({fieldName:b,message:N,errorCode:M})],a(j)}}async function g(b,N,M){s(!0);let j=await c.api(b,N,M);return s(!1),i(j.response),a(j.error),j}async function m(b,N,M){s(!0);let j=await c.apiVoid(b,N,M);return s(!1),i(j.response),a(j.error),j}async function p(b,N,M,j){s(!0);let S=await c.apiForm(b,N,M,j);return s(!1),i(S.response),a(S.error),S}async function y(b,N,M,j){s(!0);let S=await c.apiFormVoid(b,N,M,j);return s(!1),i(S.response),a(S.error),S}async function A(b,N,M,j){return Zn(c,b,N,M,j)}function v(b,N){const[M,j]=l.useState(new u.ApiResult);return l.useEffect(()=>{const S=Jn(async U=>{const x=await c.api(U);j(x)},N?.delayMs),Y=b(),D=ws(Tr(Y));D&&j(new u.ApiResult({response:D})),N?.delayMs===0?c.api(Y).then(j):S(Y),c.api(b(),N?.args,N?.method).then(j)},[]),{current:M}}return{setError:d,addFieldError:h,loading:{current:r},error:{current:n},api:g,apiVoid:m,apiForm:p,apiFormVoid:y,swr:A,swrEffect:v,unRefs:Gn,setRef:Kn}}function Rn(e){return e&&e.SessionId?u.sanitize(e):e}function Gl(e){z.user.value=Rn(e),z.events.publish("signIn",e)}function Zl(){z.user.value=null,z.events.publish("signOut",null)}const xs=e=>e?.roles||[],bs=e=>e?.permissions||[];function ea(e){return xs(z.user.value).indexOf(e)>=0}function Jl(e){return bs(z.user.value).indexOf(e)>=0}function Ns(){return ea("Admin")}function $r(e){if(!e)return!1;if(!e.requiresAuth)return!0;const r=z.user.value;if(!r)return!1;if(Ns())return!0;let[s,n]=[xs(r),bs(r)],[a,o,i,c]=[e.requiredRoles||[],e.requiredPermissions||[],e.requiresAnyRole||[],e.requiresAnyPermission||[]];return!(!a.every(d=>s.indexOf(d)>=0)||i.length>0&&!i.some(d=>s.indexOf(d)>=0)||!o.every(d=>n.indexOf(d)>=0)||c.length>0&&!c.every(d=>n.indexOf(d)>=0))}function Xl(e){if(!e||!e.requiresAuth)return null;const r=z.user.value;if(!r)return`<b>${e.request.name}</b> requires Authentication`;if(Ns())return null;let[s,n]=[xs(r),bs(r)],[a,o,i,c]=[e.requiredRoles||[],e.requiredPermissions||[],e.requiresAnyRole||[],e.requiresAnyPermission||[]],d=a.filter(g=>s.indexOf(g)<0);if(d.length>0)return`Requires ${d.map(g=>"<b>"+g+"</b>").join(", ")} Role`+(d.length>1?"s":"");let h=o.filter(g=>n.indexOf(g)<0);return h.length>0?`Requires ${h.map(g=>"<b>"+g+"</b>").join(", ")} Permission`+(h.length>1?"s":""):i.length>0&&!i.some(g=>s.indexOf(g)>=0)?`Requires any ${i.filter(g=>s.indexOf(g)<0).map(g=>"<b>"+g+"</b>").join(", ")} Role`+(d.length>1?"s":""):c.length>0&&!c.every(g=>n.indexOf(g)>=0)?`Requires any ${c.filter(g=>n.indexOf(g)<0).map(g=>"<b>"+g+"</b>").join(", ")} Permission`+(h.length>1?"s":""):null}function Ir(){const[e,r]=l.useState(z.user.value),s=e!=null;return l.useEffect(()=>z.user.subscribe(r),[]),{signIn:Gl,signOut:Zl,user:e,toAuth:Rn,isAuthenticated:s,hasRole:ea,hasPermission:Jl,isAdmin:Ns,canAccess:$r,invalidAccessMessage:Xl}}function Je(e,r){return Array.isArray(e)?e.indexOf(r)>=0:e==r||e.includes(r)}const Or={blue:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",purple:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",red:"text-red-700 dark:text-red-400 hover:text-red-900 dark:hover:text-red-200",green:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",sky:"text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-200",cyan:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-800 dark:hover:text-cyan-200",indigo:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200"},at={base:"block w-full sm:text-sm rounded-md dark:text-white dark:bg-gray-900 disabled:bg-slate-50 dark:disabled:bg-slate-900 disabled:text-slate-500 disabled:border-slate-200 dark:disabled:border-slate-700 disabled:shadow-none",invalid:"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500",valid:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 dark:border-gray-600"},er={panelClass:"shadow sm:rounded-md",formClass:"space-y-6 bg-white dark:bg-black py-6 px-4 sm:p-6",headingClass:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",subHeadingClass:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Bt={panelClass:"pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg",formClass:"flex h-full flex-col divide-y divide-gray-200 dark:divide-gray-700 shadow-xl bg-white dark:bg-black",titlebarClass:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",headingClass:"text-lg font-medium text-gray-900 dark:text-gray-100",subHeadingClass:"mt-1 text-sm text-gray-500 dark:text-gray-400",closeButtonClass:"rounded-md bg-gray-50 dark:bg-gray-900 text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:ring-offset-black"},ks={modalClass:"relative transform overflow-hidden rounded-lg bg-white dark:bg-black text-left shadow-xl transition-all sm:my-8",sizeClass:"sm:max-w-prose lg:max-w-screen-md xl:max-w-screen-lg 2xl:max-w-screen-xl sm:w-full"},ze={panelClass(e="slideOver"){return e=="card"?er.panelClass:Bt.panelClass},formClass(e="slideOver"){return e=="card"?er.formClass:Bt.formClass},headingClass(e="slideOver"){return e=="card"?er.headingClass:Bt.headingClass},subHeadingClass(e="slideOver"){return e=="card"?er.subHeadingClass:Bt.subHeadingClass},buttonsClass:"px-4 py-3 bg-gray-50 dark:bg-gray-900 sm:px-6 flex flex-wrap justify-between",legendClass:"text-base font-medium text-gray-900 dark:text-gray-100 text-center mb-4"},ce={getGridClass(e="stripedRows"){return ce.gridClass},getGrid2Class(e="stripedRows"){return Je(e,"fullWidth")?"overflow-x-auto":ce.grid2Class},getGrid3Class(e="stripedRows"){return Je(e,"fullWidth")?"inline-block min-w-full py-2 align-middle":ce.grid3Class},getGrid4Class(e="stripedRows"){return Je(e,"whiteBackground")?"":Je(e,"fullWidth")?"overflow-hidden shadow-sm ring-1 ring-black/5":ce.grid4Class},getTableClass(e="stripedRows"){return Je(e,"fullWidth")||Je(e,"verticalLines")?"min-w-full divide-y divide-gray-300":ce.tableClass},getTheadClass(e="stripedRows"){return Je(e,"whiteBackground")?"":ce.theadClass},getTheadRowClass(e="stripedRows"){return ce.theadRowClass+(Je(e,"verticalLines")?" divide-x divide-gray-200 dark:divide-gray-700":"")},getTheadCellClass(e="stripedRows"){return ce.theadCellClass+(Je(e,"uppercaseHeadings")?" uppercase":"")},getTbodyClass(e="stripedRows"){return(Je(e,"whiteBackground")||Je(e,"verticalLines")?"divide-y divide-gray-200 dark:divide-gray-800":ce.tableClass)+(Je(e,"verticalLines")?" bg-white":"")},getTableRowClass(e="stripedRows",r,s,n){return(n?"cursor-pointer ":"")+(s?"bg-indigo-100 dark:bg-blue-800":(n?"hover:bg-yellow-50 dark:hover:bg-blue-900 ":"")+(Je(e,"stripedRows")?r%2==0?"bg-white dark:bg-black":"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-black"))+(Je(e,"verticalLines")?" divide-x divide-gray-200 dark:divide-gray-700":"")},gridClass:"flex flex-col",grid2Class:"",grid3Class:"inline-block min-w-full py-2 align-middle",grid4Class:"overflow-hidden shadow ring-1 ring-black/5 md:rounded-lg",tableClass:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",theadClass:"bg-gray-50 dark:bg-gray-900",tableCellClass:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",theadRowClass:"select-none",theadCellClass:"px-6 py-4 text-left text-sm font-medium tracking-wider whitespace-nowrap",toolbarButtonClass:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 dark:border-gray-700 shadow-sm text-sm font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-black hover:bg-gray-50 dark:hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black"},Yl={colspans:"col-span-3 sm:col-span-3"};function Mt(e,r,s){const n=e.filter(a=>a).join(" ");return s??=z.config.filterInputClass==null?void 0:a=>z.config.filterInputClass(a,r),s?s(n):n}const Rl=Object.freeze(Object.defineProperty({__proto__:null,a:Or,card:er,dummy:Yl,filterClass:Mt,form:ze,grid:ce,input:at,modal:ks,slideOver:Bt},Symbol.toStringTag,{value:"Module"}));class eo{view;includeTypes;constructor(r){Object.assign(this,r)}getTypeName(){return"MetadataApp"}getMethod(){return"GET"}createResponse(){return{}}}const vt=l.createContext(void 0),Fr=l.forwardRef(({id:e,type:r,label:s,labelClass:n,help:a,placeholder:o,value:i,onChange:c,status:d,inputClass:h,filterClass:g,className:m,...p},y)=>{const A=l.useRef(null);l.useImperativeHandle(y,()=>({focus:()=>A.current?.focus()}));const v=l.useMemo(()=>r||"text",[r]),L=l.useMemo(()=>s??u.humanize(u.toPascalCase(e)),[s,e]),k=l.useMemo(()=>o??L,[o,L]),w=S=>r==="range"?S.replace("shadow-sm ",""):S,b=l.useContext(vt),N=l.useMemo(()=>u.errorResponse.call({responseStatus:d??b?.error?.current},e),[d,b,e]),M=l.useMemo(()=>Mt([at.base,N?at.invalid:w(at.valid),h],"TextInput",g),[N,h,g,r]),j=S=>{const Y=ps(v,S.target.value);c?.(Y)};return t.jsxs("div",{className:m,children:[L&&t.jsx("label",{htmlFor:e,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 ${n??""}`,children:L}),t.jsxs("div",{className:w("mt-1 relative"),children:[t.jsx("input",{ref:A,type:v,name:e,id:e,className:M,placeholder:k,value:ps(v,i),onChange:j,"aria-invalid":N!=null,"aria-describedby":`${e}-error`,step:"any",...u.omit(p,["value"])}),N&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),N?t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:N}):a?t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:a}):null]})});Fr.displayName="TextInput";function ta({type:e="warn",hideIcon:r,children:s}){const n=l.useMemo(()=>e==="info"?"bg-blue-50 dark:bg-blue-200":e==="error"?"bg-red-50 dark:bg-red-200":e==="success"?"bg-green-50 dark:bg-green-200":"bg-yellow-50 dark:bg-yellow-200",[e]),a=l.useMemo(()=>e==="info"?"border-blue-400":e==="error"?"border-red-400":e==="success"?"border-green-400":"border-yellow-400",[e]),o=l.useMemo(()=>e==="info"?"text-blue-700":e==="error"?"text-red-700":e==="success"?"text-green-700":"text-yellow-700",[e]);return t.jsx("div",{className:`${n} ${a} border-l-4 p-4`,children:t.jsxs("div",{className:"flex items-center",children:[!r&&t.jsxs("div",{className:"flex-shrink-0 mr-3",children:[e==="warn"&&t.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e==="error"&&t.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})}),e==="info"&&t.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),e==="success"&&t.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})]}),t.jsx("div",{children:t.jsx("p",{className:`${o} text-sm`,children:s})})]})})}function to({message:e,children:r}){const[s,n]=l.useState(!1);return s?null:t.jsx("div",{className:"rounded-md bg-green-50 dark:bg-green-200 p-4",role:"alert",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-green-400 dark:text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("h3",{className:"text-sm font-medium text-green-800",children:e||r})}),t.jsx("div",{className:"ml-auto pl-3",children:t.jsx("div",{className:"-mx-1.5 -my-1.5",children:t.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-green-50 dark:bg-green-200 p-1.5 text-green-500 dark:text-green-600 hover:bg-green-100 dark:hover:bg-green-800 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-green-600 dark:focus:ring-green-300 focus:ring-offset-2 focus:ring-offset-green-50 dark:ring-offset-green-900",onClick:()=>n(!0),children:[t.jsx("span",{className:"sr-only",children:"Dismiss"}),t.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})]})})})]})})}function tr({status:e,except:r,className:s}){const n=l.useContext(vt),a=l.useMemo(()=>e||n?.error?.current?u.errorResponseExcept.call({responseStatus:e??n?.error?.current},r??[]):null,[e,n,r]);return a?t.jsx("div",{className:`bg-red-50 dark:bg-red-900 border-l-4 border-red-400 p-4 ${s??""}`,children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",d:"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:a})})]})}):null}function ro({id:e,description:r}){return r?t.jsx("div",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,"aria-describedby":`${e}-description`,children:t.jsx("div",{children:r})},"description"):null}function Ht({image:e,svg:r,src:s,alt:n,type:a,className:o,...i}){let c=e;if(a){const{typeOf:g}=Xe(),m=g(a);m||console.warn(`Type ${a} does not exist`),m?.icon?c=m?.icon:console.warn(`Type ${a} does not have a [Svg] icon`)}let d=r||c?.svg||"";if(d.startsWith("<svg ")){let m=u.leftPart(d,">").indexOf("class="),p=`${c?.cls||""} ${o||""}`;if(m===-1)d=`<svg class="${p}" ${d.substring(4)}`;else{const y=m+6+1;d=`${d.substring(0,y)+p} ${d.substring(y)}`}return t.jsx("span",{dangerouslySetInnerHTML:{__html:d}})}else return t.jsx("img",{className:`${c?.cls||""} ${o||""}`,src:gs(s||c?.uri),alt:n,onError:g=>gr(g.target),...i})}function Cs({imageClass:e="w-6 h-6",children:r}){return t.jsx("div",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-300",children:t.jsxs("div",{className:"flex",children:[t.jsxs("svg",{className:`self-center inline mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-gray-600 dark:fill-gray-300 ${e}`,role:"status",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),t.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),t.jsx("span",{children:r})]})})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ms(){return Ms=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ms.apply(this,arguments)}var ra;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ra||(ra={}));function Ve(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function rr(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Ls(e){let{pathname:r="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function sa(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(r.search=e.substr(n),e=e.substr(0,n)),e&&(r.pathname=e)}return r}var na;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(na||(na={}));function aa(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=so(e.path,e.caseSensitive,e.end),a=r.match(s);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((h,g,m)=>{let{paramName:p,isOptional:y}=g;if(p==="*"){let v=c[m]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const A=c[m];return y&&!A?h[p]=void 0:h[p]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:i,pattern:e}}function so(e,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),rr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),n]}function Ut(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function no(e,r){r===void 0&&(r="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?sa(e):e;return{pathname:s?s.startsWith("/")?s:ao(s,r):r,search:oo(n),hash:io(a)}}function ao(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Ss(e,r,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lo(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function la(e,r){let s=lo(e);return r?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function oa(e,r,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=sa(e):(a=Ms({},e),Ve(!a.pathname||!a.pathname.includes("?"),Ss("?","pathname","search",a)),Ve(!a.pathname||!a.pathname.includes("#"),Ss("#","pathname","hash",a)),Ve(!a.search||!a.search.includes("#"),Ss("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,c;if(i==null)c=s;else{let m=r.length-1;if(!n&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),m-=1;a.pathname=p.join("/")}c=m>=0?r[m]:"/"}let d=no(a,c),h=i&&i!=="/"&&i.endsWith("/"),g=(o||i===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(h||g)&&(d.pathname+="/"),d}const As=e=>e.join("/").replace(/\/\/+/g,"/"),oo=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,io=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ia=["post","put","patch","delete"];new Set(ia);const co=["get",...ia];new Set(co);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Es(){return Es=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Es.apply(this,arguments)}const jr=le.createContext(null);process.env.NODE_ENV!=="production"&&(jr.displayName="DataRouter");const ca=le.createContext(null);process.env.NODE_ENV!=="production"&&(ca.displayName="DataRouterState");const uo=le.createContext(null);process.env.NODE_ENV!=="production"&&(uo.displayName="Await");const yt=le.createContext(null);process.env.NODE_ENV!=="production"&&(yt.displayName="Navigation");const Ts=le.createContext(null);process.env.NODE_ENV!=="production"&&(Ts.displayName="Location");const qt=le.createContext({outlet:null,matches:[],isDataRoute:!1});process.env.NODE_ENV!=="production"&&(qt.displayName="Route");const fo=le.createContext(null);process.env.NODE_ENV!=="production"&&(fo.displayName="RouteError");function ho(e,r){let{relative:s}=r===void 0?{}:r;Ds()||(process.env.NODE_ENV!=="production"?Ve(!1,"useHref() may be used only in the context of a <Router> component."):Ve(!1));let{basename:n,navigator:a}=le.useContext(yt),{hash:o,pathname:i,search:c}=nr(e,{relative:s}),d=i;return n!=="/"&&(d=i==="/"?n:As([n,i])),a.createHref({pathname:d,search:c,hash:o})}function Ds(){return le.useContext(Ts)!=null}function sr(){return Ds()||(process.env.NODE_ENV!=="production"?Ve(!1,"useLocation() may be used only in the context of a <Router> component."):Ve(!1)),le.useContext(Ts).location}const da="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ua(e){le.useContext(yt).static||le.useLayoutEffect(e)}function go(){let{isDataRoute:e}=le.useContext(qt);return e?wo():po()}function po(){Ds()||(process.env.NODE_ENV!=="production"?Ve(!1,"useNavigate() may be used only in the context of a <Router> component."):Ve(!1));let e=le.useContext(jr),{basename:r,future:s,navigator:n}=le.useContext(yt),{matches:a}=le.useContext(qt),{pathname:o}=sr(),i=JSON.stringify(la(a,s.v7_relativeSplatPath)),c=le.useRef(!1);return ua(()=>{c.current=!0}),le.useCallback(function(h,g){if(g===void 0&&(g={}),process.env.NODE_ENV!=="production"&&rr(c.current,da),!c.current)return;if(typeof h=="number"){n.go(h);return}let m=oa(h,JSON.parse(i),o,g.relative==="path");e==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:As([r,m.pathname])),(g.replace?n.replace:n.push)(m,g.state,g)},[r,n,i,o,e])}function nr(e,r){let{relative:s}=r===void 0?{}:r,{future:n}=le.useContext(yt),{matches:a}=le.useContext(qt),{pathname:o}=sr(),i=JSON.stringify(la(a,n.v7_relativeSplatPath));return le.useMemo(()=>oa(e,JSON.parse(i),o,s==="path"),[e,i,o,s])}var fa=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(fa||{}),$s=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})($s||{});function ha(e){return e+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function mo(e){let r=le.useContext(jr);return r||(process.env.NODE_ENV!=="production"?Ve(!1,ha(e)):Ve(!1)),r}function vo(e){let r=le.useContext(qt);return r||(process.env.NODE_ENV!=="production"?Ve(!1,ha(e)):Ve(!1)),r}function ga(e){let r=vo(e),s=r.matches[r.matches.length-1];return s.route.id||(process.env.NODE_ENV!=="production"?Ve(!1,e+' can only be used on routes that contain a unique "id"'):Ve(!1)),s.route.id}function yo(){return ga($s.UseRouteId)}function wo(){let{router:e}=mo(fa.UseNavigateStable),r=ga($s.UseNavigateStable),s=le.useRef(!1);return ua(()=>{s.current=!0}),le.useCallback(function(a,o){o===void 0&&(o={}),process.env.NODE_ENV!=="production"&&rr(s.current,da),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Es({fromRouteId:r},o)))},[e,r])}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},_t.apply(this,arguments)}function Is(e,r){if(e==null)return{};var s={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(r.indexOf(a)>=0)&&(s[a]=e[a]);return s}const Vr="get",zr="application/x-www-form-urlencoded";function Pr(e){return e!=null&&typeof e.tagName=="string"}function xo(e){return Pr(e)&&e.tagName.toLowerCase()==="button"}function bo(e){return Pr(e)&&e.tagName.toLowerCase()==="form"}function No(e){return Pr(e)&&e.tagName.toLowerCase()==="input"}function ko(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Co(e,r){return e.button===0&&(!r||r==="_self")&&!ko(e)}let Br=null;function Mo(){if(Br===null)try{new FormData(document.createElement("form"),0),Br=!1}catch{Br=!0}return Br}const Lo=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Os(e){return e!=null&&!Lo.has(e)?(process.env.NODE_ENV!=="production"&&rr(!1,'"'+e+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+zr+'"')),null):e}function So(e,r){let s,n,a,o,i;if(bo(e)){let c=e.getAttribute("action");n=c?Ut(c,r):null,s=e.getAttribute("method")||Vr,a=Os(e.getAttribute("enctype"))||zr,o=new FormData(e)}else if(xo(e)||No(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||c.getAttribute("action");if(n=d?Ut(d,r):null,s=e.getAttribute("formmethod")||c.getAttribute("method")||Vr,a=Os(e.getAttribute("formenctype"))||Os(c.getAttribute("enctype"))||zr,o=new FormData(c,e),!Mo()){let{name:h,type:g,value:m}=e;if(g==="image"){let p=h?h+".":"";o.append(p+"x","0"),o.append(p+"y","0")}else h&&o.append(h,m)}}else{if(Pr(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Vr,n=null,a=zr,i=e}return o&&a==="text/plain"&&(i=o,o=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:o,body:i}}const Ao=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Eo=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],To=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],Do="6";try{window.__reactRouterVersion=Do}catch{}const pa=le.createContext({isTransitioning:!1});process.env.NODE_ENV!=="production"&&(pa.displayName="ViewTransition");const $o=le.createContext(new Map);process.env.NODE_ENV!=="production"&&($o.displayName="Fetchers"),process.env.NODE_ENV;const Io=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Oo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=le.forwardRef(function(r,s){let{onClick:n,relative:a,reloadDocument:o,replace:i,state:c,target:d,to:h,preventScrollReset:g,viewTransition:m}=r,p=Is(r,Ao),{basename:y}=le.useContext(yt),A,v=!1;if(typeof h=="string"&&Oo.test(h)&&(A=h,Io))try{let b=new URL(window.location.href),N=h.startsWith("//")?new URL(b.protocol+h):new URL(h),M=Ut(N.pathname,y);N.origin===b.origin&&M!=null?h=M+N.search+N.hash:v=!0}catch{process.env.NODE_ENV!=="production"&&rr(!1,'<Link to="'+h+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let L=ho(h,{relative:a}),k=zo(h,{replace:i,state:c,target:d,preventScrollReset:g,relative:a,viewTransition:m});function w(b){n&&n(b),b.defaultPrevented||k(b)}return le.createElement("a",_t({},p,{href:A||L,onClick:v||o?n:w,ref:s,target:d}))});process.env.NODE_ENV!=="production"&&(ar.displayName="Link");const Fo=le.forwardRef(function(r,s){let{"aria-current":n="page",caseSensitive:a=!1,className:o="",end:i=!1,style:c,to:d,viewTransition:h,children:g}=r,m=Is(r,Eo),p=nr(d,{relative:m.relative}),y=sr(),A=le.useContext(ca),{navigator:v,basename:L}=le.useContext(yt),k=A!=null&&_o(p)&&h===!0,w=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,b=y.pathname,N=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;a||(b=b.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&L&&(N=Ut(N,L)||N);const M=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let j=b===w||!i&&b.startsWith(w)&&b.charAt(M)==="/",S=N!=null&&(N===w||!i&&N.startsWith(w)&&N.charAt(w.length)==="/"),Y={isActive:j,isPending:S,isTransitioning:k},D=j?n:void 0,U;typeof o=="function"?U=o(Y):U=[o,j?"active":null,S?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let x=typeof c=="function"?c(Y):c;return le.createElement(ar,_t({},m,{"aria-current":D,className:U,ref:s,style:x,to:d,viewTransition:h}),typeof g=="function"?g(Y):g)});process.env.NODE_ENV!=="production"&&(Fo.displayName="NavLink");const jo=le.forwardRef((e,r)=>{let{fetcherKey:s,navigate:n,reloadDocument:a,replace:o,state:i,method:c=Vr,action:d,onSubmit:h,relative:g,preventScrollReset:m,viewTransition:p}=e,y=Is(e,To),A=Uo(),v=qo(d,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",k=w=>{if(h&&h(w),w.defaultPrevented)return;w.preventDefault();let b=w.nativeEvent.submitter,N=b?.getAttribute("formmethod")||c;A(b||w.currentTarget,{fetcherKey:s,method:N,navigate:n,replace:o,state:i,relative:g,preventScrollReset:m,viewTransition:p})};return le.createElement("form",_t({ref:r,method:L,action:v,onSubmit:a?h:k},y))});process.env.NODE_ENV!=="production"&&(jo.displayName="Form"),process.env.NODE_ENV;var Hr;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hr||(Hr={}));var ma;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ma||(ma={}));function Vo(e){return e+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function va(e){let r=le.useContext(jr);return r||(process.env.NODE_ENV!=="production"?Ve(!1,Vo(e)):Ve(!1)),r}function zo(e,r){let{target:s,replace:n,state:a,preventScrollReset:o,relative:i,viewTransition:c}=r===void 0?{}:r,d=go(),h=sr(),g=nr(e,{relative:i});return le.useCallback(m=>{if(Co(m,s)){m.preventDefault();let p=n!==void 0?n:Ls(h)===Ls(g);d(e,{replace:p,state:a,preventScrollReset:o,relative:i,viewTransition:c})}},[h,d,g,n,a,s,e,o,i,c])}function Po(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let Bo=0,Ho=()=>"__"+String(++Bo)+"__";function Uo(){let{router:e}=va(Hr.UseSubmit),{basename:r}=le.useContext(yt),s=yo();return le.useCallback(function(n,a){a===void 0&&(a={}),Po();let{action:o,method:i,encType:c,formData:d,body:h}=So(n,r);if(a.navigate===!1){let g=a.fetcherKey||Ho();e.fetch(g,s,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||i,formEncType:a.encType||c,flushSync:a.flushSync})}else e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||i,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,r,s])}function qo(e,r){let{relative:s}=r===void 0?{}:r,{basename:n}=le.useContext(yt),a=le.useContext(qt);a||(process.env.NODE_ENV!=="production"?Ve(!1,"useFormAction must be used inside a RouteContext"):Ve(!1));let[o]=a.matches.slice(-1),i=_t({},nr(e||".",{relative:s})),c=sr();if(e==null){i.search=c.search;let d=new URLSearchParams(i.search),h=d.getAll("index");if(h.some(m=>m==="")){d.delete("index"),h.filter(p=>p).forEach(p=>d.append("index",p));let m=d.toString();i.search=m?"?"+m:""}}return(!e||e===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:As([n,i.pathname])),Ls(i)}function _o(e,r){r===void 0&&(r={});let s=le.useContext(pa);s==null&&(process.env.NODE_ENV!=="production"?Ve(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?"):Ve(!1));let{basename:n}=va(Hr.useViewTransitionState),a=nr(e,{relative:r.relative});if(!s.isTransitioning)return!1;let o=Ut(s.currentLocation.pathname,n)||s.currentLocation.pathname,i=Ut(s.nextLocation.pathname,n)||s.nextLocation.pathname;return aa(a.pathname,i)!=null||aa(a.pathname,o)!=null}const ya="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 disabled:text-gray-400 bg-white dark:bg-black hover:bg-gray-50 hover:dark:bg-gray-900 disabled:hover:bg-white dark:disabled:hover:bg-black focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black";function Qo({type:e="submit",href:r,onClick:s,children:n,...a}){return r?t.jsx(ar,{to:r,children:t.jsx("button",{className:ya,onClick:s,...a,children:n})}):t.jsx("button",{type:e,className:ya,onClick:s,...a,children:n})}const wa={blue:"focus:ring-blue-500 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:hover:bg-blue-400 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",purple:"focus:ring-purple-500 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 disabled:hover:bg-purple-400 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-800",red:"focus:ring-red-500 bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:hover:bg-red-400 focus:ring-red-500 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-500",green:"focus:ring-green-500 bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:hover:bg-green-400 focus:ring-green-500 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-500",sky:"focus:ring-sky-500 bg-sky-600 hover:bg-sky-700 disabled:bg-sky-400 disabled:hover:bg-sky-400 dark:bg-sky-600 dark:hover:bg-sky-700 dark:focus:ring-sky-500",cyan:"focus:ring-cyan-500 bg-cyan-600 hover:bg-cyan-700 disabled:bg-cyan-400 disabled:hover:bg-cyan-400 dark:bg-cyan-600 dark:hover:bg-cyan-700 dark:focus:ring-cyan-500",indigo:"focus:ring-indigo-500 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:hover:bg-indigo-400 dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:ring-indigo-800"};function ct({type:e="submit",color:r="indigo",href:s,onClick:n,children:a,...o}){const i=l.useMemo(()=>"inline-flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:ring-offset-black text-white "+(wa[r]||wa.indigo),[r]);return s?t.jsx(ar,{to:s,children:t.jsx("button",{className:i,onClick:n,...o,children:a})}):t.jsx("button",{type:e,className:i,onClick:n,...o,children:a})}const xa="inline-flex justify-center rounded-md border border-gray-300 py-2 px-4 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-400 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-black";function dt({type:e="button",href:r,onClick:s,children:n,...a}){return r?t.jsx(ar,{to:r,children:t.jsx("button",{type:e,className:xa,onClick:s,...a,children:n})}):t.jsx("button",{type:e,className:xa,onClick:s,...a,children:n})}function Wo({color:e="blue",href:r,children:s,...n}){const a=l.useMemo(()=>(Or[e]||Or.blue)+(r?"":" cursor-pointer"),[e,r]);return t.jsx("a",{className:a,href:r,...n,children:s})}function Ko({homeHref:e="/",homeLabel:r="Home",children:s}){return t.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:t.jsxs("ol",{role:"list",className:"flex items-center space-x-4",children:[t.jsx("li",{children:t.jsx("div",{children:t.jsxs("a",{href:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400",title:r,children:[t.jsx("svg",{className:"h-6 w-6 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z",clipRule:"evenodd"})}),t.jsx("span",{className:"sr-only",children:r})]})})}),s]})})}function Go({href:e,title:r,children:s}){return t.jsx("li",{children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"h-6 w-6 flex-shrink-0 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})}),e?t.jsx("a",{href:e,className:"ml-4 text-lg font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",title:r,children:s}):t.jsx("span",{className:"ml-4 text-lg font-medium text-gray-700 dark:text-gray-300",title:r,children:s})]})})}function Zo({title:e,children:r}){return t.jsxs("div",{children:[e&&t.jsx("h2",{className:"text-base font-semibold text-gray-500 dark:text-gray-400",children:e}),t.jsx("ul",{role:"list",className:"mt-4 divide-y divide-gray-200 dark:divide-gray-800 border-t border-b border-gray-200 dark:border-gray-800",children:r})]})}function Jo({href:e,title:r,icon:s,iconSrc:n,iconSvg:a,iconAlt:o,children:i}){return t.jsxs("li",{className:"relative flex items-start space-x-4 py-6",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-indigo-50 dark:bg-indigo-900",children:t.jsx(Ht,{className:"w-6 h-6 text-indigo-700 dark:text-indigo-300",image:s,src:n,svg:a,alt:o})})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-gray-100",children:t.jsx("span",{className:"rounded-sm focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2",children:t.jsxs("a",{href:e,className:"focus:outline-none",children:[t.jsx("span",{className:"absolute inset-0","aria-hidden":"true"}),r]})})}),t.jsx("p",{className:"text-base text-gray-500",children:i})]}),t.jsx("div",{className:"flex-shrink-0 self-center",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})})]})}function Fs({invalidAccess:e}){const{isAuthenticated:r}=Ir(),{config:s}=bt(),n=()=>{let o=location.href.substring(location.origin.length)||"/";const i=u.appendQueryString(s.redirectSignIn,{redirect:o});s.navigate(i)},a=()=>{let o=location.href.substring(location.origin.length)||"/";const i=u.appendQueryString(s.redirectSignOut,{ReturnUrl:o});s.navigate(i)};return e?t.jsxs("div",{children:[t.jsx(ta,{dangerouslySetInnerHTML:{__html:e}}),t.jsx("div",{className:"md:p-4",children:r?t.jsx(dt,{onClick:a,children:"Sign Out"}):t.jsx(dt,{onClick:n,children:"Sign In"})})]}):null}function Qt({buttonClass:e="bg-white dark:bg-black",title:r="Close",onClose:s}){return t.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:t.jsxs("button",{type:"button",onClick:s,title:r,className:`${e} cursor-pointer rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black`,children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})})}function ba({id:e="SlideOver",title:r,subtitle:s,contentClass:n="relative mt-6 flex-1 px-4 sm:px-6",children:a,onDone:o}){const[i,c]=l.useState(!1),[d,h]=l.useState(""),g={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};l.useEffect(()=>{c(!0)},[]),l.useEffect(()=>{if(Nt(g,h,i),!i){const p=setTimeout(()=>o?.(),700);return()=>clearTimeout(p)}},[i,o]);const m=()=>c(!1);return l.useEffect(()=>{const p=y=>{y.key==="Escape"&&m()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),t.jsxs("div",{id:e,className:"relative z-10","aria-labelledby":`${e}-title`,role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:m,className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:p=>p.stopPropagation(),className:"pointer-events-none fixed inset-y-0 right-0 flex pl-10",children:t.jsx("div",{className:`panel pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg ${d}`,children:t.jsx("div",{className:"flex h-full flex-col bg-white dark:bg-black shadow-xl",children:t.jsx("div",{className:"flex min-h-0 flex-1 flex-col overflow-auto",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"relative bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between space-x-3",children:[t.jsxs("div",{className:"space-y-1",children:[r&&t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-50",id:`${e}-title`,children:r}),s&&t.jsx("p",{className:"text-sm text-gray-500",children:s})]}),t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Qt,{buttonClass:"bg-gray-50 dark:bg-gray-900",onClose:m})})]})}),t.jsx("div",{className:n,children:a})]})})})})})})})]})}function js({title:e,subtitle:r,alertClass:s,invalidAccess:n,onDone:a}){return n?t.jsxs(ba,{title:e,onDone:a,contentClass:"relative flex-1",children:[r&&t.jsx("div",{slot:"subtitle",children:r}),t.jsx(Fs,{alertClass:s,invalidAccess:n})]}):null}function Vs({id:e,label:r,value:s,onChange:n,status:a,entries:o,values:i,options:c,inputClass:d,labelClass:h,filterClass:g,className:m,...p}){const y=l.useMemo(()=>r??u.humanize(u.toPascalCase(e)),[r,e]),A=l.useContext(vt),v=l.useMemo(()=>u.errorResponse.call({responseStatus:a??A?.error?.current},e),[a,A,e]),L=l.useMemo(()=>o||(i?i.map(b=>({key:b,value:b})):c?Object.keys(c).map(b=>({key:b,value:c[b]})):[]),[o,i,c]),k=l.useMemo(()=>Mt(["mt-1 block w-full pl-3 pr-10 py-2 text-base focus:outline-none sm:text-sm rounded-md dark:text-white dark:bg-gray-900 dark:border-gray-600 disabled:bg-slate-50 dark:disabled:bg-slate-900 disabled:text-slate-500 disabled:border-slate-200 dark:disabled:border-slate-700 disabled:shadow-none",v?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":"shadow-sm border-gray-300 text-gray-900 focus:ring-indigo-500 focus:border-indigo-500",d],"SelectInput",g),[v,d,g]),w=b=>{n?.(b.target.value)};return t.jsxs("div",{className:m,children:[y&&t.jsx("label",{htmlFor:e,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 ${h??""}`,children:y}),t.jsx("select",{id:e,name:e,className:k,value:s??"",onChange:w,"aria-invalid":v!=null,"aria-describedby":`${e}-error`,...u.omit(p,["class"]),children:L.map(b=>t.jsx("option",{value:b.key,children:b.value},b.key))}),v&&t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:v})]})}function zs({definitions:e,column:r,topLeft:s,onDone:n,onSave:a}){const o=l.useRef(null),[i,c]=l.useState("%"),[d,h]=l.useState(""),[g,m]=l.useState([]),[p,y]=l.useState({filters:[]}),A=l.useMemo(()=>r.meta.isEnum===!0,[r.meta.isEnum]),v=l.useMemo(()=>nt(r.meta.type==="Nullable`1"?r.meta.genericArgs[0]:r.meta.type),[r.meta.type,r.meta.genericArgs]),L=l.useMemo(()=>r.meta.isEnum===!0?os(xn(v?.name||"")):[],[r.meta.isEnum,v]),k=l.useMemo(()=>w(r.type)?.map(x=>({key:x.value,value:x.name}))||[],[r.type,e]);l.useEffect(()=>{y(Object.assign({},r.settings,{filters:Array.from(r.settings.filters)}))},[r.settings]),l.useEffect(()=>{let x=r.settings.filters?.[0]?.value?.split(",")||[];if(x.length>0&&v?.isEnumInt){const $=x[0]&&parseInt(x[0])||0;x=v.enumValues?.filter(E=>($&parseInt(E))>0)||[]}m(x)},[r.settings.filters,v]),l.useEffect(()=>{o.current?.focus()},[]);function w(x){let $=e;return pn(x)||($=$.filter(E=>E.types!=="string")),$}function b(x,$){return w(x).find(E=>E.value===$)}function N(){if(!i)return;let x=b(r.type,i)?.name;x&&(y($=>({...$,filters:[...$.filters,{key:i,name:x,value:d}]})),c("%"),h(""))}function M(x){y($=>({...$,filters:$.filters.filter((E,W)=>W!==x)}))}function j(x){return Mn(b(r.type,x.key),r.type,x)}function S(){n?.()}function Y(){if(d&&N(),A){let x=Object.values(g).filter(E=>E);const $={...p,filters:x.length>0?v?.isEnumInt?[{key:"%HasAny",name:"HasAny",value:x.map(E=>parseInt(E)).reduce((E,W)=>E+W,0).toString()}]:[{key:"%In",name:"In",value:x.join(",")}]:[]};a?.($)}else a?.(p);n?.()}function D(x){const $={...p,sort:x===p.sort?void 0:x};y($),setTimeout(()=>{a?.($),n?.()},0)}const U=(x,$)=>{m(E=>$?[...E,x]:E.filter(W=>W!==x))};return t.jsx("div",{className:"fixed z-20 inset-0 overflow-y-auto",onClick:S,children:t.jsx("div",{className:"absolute",style:{top:`${s.y}px`,left:`${s.x}px`},onClick:x=>x.stopPropagation(),children:t.jsxs("div",{className:"absolute top-0 right-0 bg-white dark:bg-black border dark:border-gray-800 rounded normal-case text-sm shadow w-80",children:[t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-base font-medium mb-3 dark:text-gray-100",children:"Sort"}),t.jsxs("div",{className:"flex w-full justify-center",children:[t.jsxs("button",{type:"button",title:"Sort Ascending",onClick:()=>D("ASC"),className:`${p.sort==="ASC"?"bg-indigo-100 border-indigo-500":"bg-white hover:bg-gray-50 border-gray-300"} mr-1 inline-flex items-center px-2.5 py-1.5 border shadow-sm text-sm font-medium rounded text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:[t.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:t.jsxs("g",{fill:"currentColor",children:[t.jsx("path",{fillRule:"evenodd",d:"M10.082 5.629L9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"}),t.jsx("path",{d:"M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999l.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"})]})}),t.jsx("span",{children:"ASC"})]}),t.jsxs("button",{type:"button",title:"Sort Descending",onClick:()=>D("DESC"),className:`${p.sort==="DESC"?"bg-indigo-100 border-indigo-500":"bg-white hover:bg-gray-50 border-gray-300"} ml-1 inline-flex items-center px-2.5 py-1.5 border shadow-sm text-sm font-medium rounded text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:[t.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:t.jsxs("g",{fill:"currentColor",children:[t.jsx("path",{d:"M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V7z"}),t.jsx("path",{fillRule:"evenodd",d:"M10.082 12.629L9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371h-1.781zm1.57-.785L11 9.688h-.047l-.652 2.156h1.351z"}),t.jsx("path",{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999l.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"})]})}),t.jsx("span",{children:"DESC"})]})]}),t.jsx("h3",{className:"text-base font-medium mt-4 mb-2",children:"Filter"}),A?t.jsx("div",{children:L?.map(x=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:x.key,value:x.key,checked:g.includes(x.key),onChange:$=>U(x.key,$.target.checked),className:"h-4 w-4 border-gray-300 rounded text-indigo-600 focus:ring-indigo-500"}),t.jsx("label",{htmlFor:x.key,className:"ml-3",children:x.value})]},x.key))}):t.jsxs("div",{children:[p.filters.map((x,$)=>t.jsx("div",{className:"mb-2",children:t.jsxs("span",{className:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-indigo-100 text-indigo-700",children:[r.name," ",x.name," ",j(x),t.jsx("button",{type:"button",onClick:()=>M($),className:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:outline-none focus:bg-indigo-500 focus:text-white",children:t.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:t.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})]})},$)),t.jsxs("div",{className:"flex",children:[t.jsx(Vs,{id:"filterRule",className:"w-32 mr-1",value:i,onChange:c,entries:k,label:""}),b(r.type,i)?.valueType!=="none"&&t.jsx(Fr,{ref:o,id:"filterValue",className:"w-32 mr-1",type:"text",value:d,onChange:x=>h(x),label:"",placeholder:""}),t.jsx("div",{className:"pt-1",children:t.jsx("button",{type:"button",onClick:N,className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})})})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[t.jsx(ct,{onClick:Y,color:"red",className:"ml-2",children:"Save"}),t.jsx(dt,{onClick:S,children:"Cancel"})]})]})})})}function Ps({definitions:e=[],columns:r=[],onDone:s,onChange:n}){const a=l.useMemo(()=>r.filter(p=>p.settings.filters.length>0),[r]);function o(p){return p?.[0]?.value?.split(",")}function i(p){let y=e;return pn(p)||(y=y.filter(A=>A.types!=="string")),y}function c(p,y){return i(p).find(A=>A.value===y)}function d(p,y){return Mn(c(p.type,y.key),p.type,y)}function h(p){p.settings.filters=[],n?.(p)}function g(p,y){p.settings.filters.splice(y,1),n?.(p)}function m(){r.forEach(p=>{p.settings.filters=[],n?.(p)}),s?.()}return t.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 text-sm",children:[t.jsx("div",{className:"flex flex-wrap",children:a.map(p=>t.jsxs("fieldset",{className:"group pr-4 sm:pr-6 lg:pr-8",children:[t.jsxs("legend",{className:"flex justify-between w-full font-medium",children:[t.jsx("span",{children:u.humanize(p.name)}),t.jsx("span",{className:"w-6 flex justify-end",children:t.jsx("span",{className:"hidden group-hover:inline",children:t.jsx("button",{onClick:()=>h(p),title:`Clear all ${u.humanize(p.name)} filters`,className:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-red-600 hover:bg-red-200 hover:text-red-500 focus:outline-none focus:bg-red-500 focus:text-white",children:t.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:t.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})})})]}),p.meta.isEnum?t.jsx("div",{className:"pt-2",children:o(p.settings.filters)?.map(y=>t.jsx("div",{className:"flex items-center",children:t.jsx("label",{className:"ml-2",children:y})},y))}):t.jsx("div",{children:p.settings.filters.map((y,A)=>t.jsx("div",{className:"pt-2",children:t.jsxs("span",{className:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-indigo-100 text-indigo-700",children:[p.name," ",y.name," ",d(p,y),t.jsx("button",{type:"button",onClick:()=>g(p,A),className:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:outline-none focus:bg-indigo-500 focus:text-white",children:t.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:t.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})]})},A))})]},p.name))}),t.jsx("div",{className:"flex justify-center pt-4",children:t.jsx("button",{type:"button",onClick:m,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("span",{children:"Clear All"})})})]})}function Bs({column:e,isOpen:r}){const s=e?.settings?.filters,n=e?.settings?.sort;return t.jsxs("div",{className:"flex",children:[s&&s.length>0?t.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("g",{fill:"none",children:t.jsx("path",{d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586V4z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):t.jsxs("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",children:[t.jsx("path",{d:"M505.5 658.7c3.2 4.4 9.7 4.4 12.9 0l178-246c3.8-5.3 0-12.7-6.5-12.7H643c-10.2 0-19.9 4.9-25.9 13.2L512 558.6L406.8 413.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246z",fill:"currentColor"}),t.jsx("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:"currentColor"})]}),n==="ASC"&&t.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:t.jsx("g",{fill:"none",children:t.jsx("path",{d:"M8.998 4.71L6.354 7.354a.5.5 0 1 1-.708-.707L9.115 3.18A.499.499 0 0 1 9.498 3H9.5a.5.5 0 0 1 .354.147l.01.01l3.49 3.49a.5.5 0 1 1-.707.707l-2.65-2.649V16.5a.5.5 0 0 1-1 0V4.71z",fill:"currentColor"})})}),n==="DESC"&&t.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:t.jsx("g",{fill:"none",children:t.jsx("path",{d:"M10.002 15.29l2.645-2.644a.5.5 0 0 1 .707.707L9.886 16.82a.5.5 0 0 1-.384.179h-.001a.5.5 0 0 1-.354-.147l-.01-.01l-3.49-3.49a.5.5 0 1 1 .707-.707l2.648 2.649V3.5a.5.5 0 0 1 1 0v11.79z",fill:"currentColor"})})})]})}function Na({type:e,propType:r,value:s,...n}){const{typeOf:a}=Xe();function o(w){return w?.format?w.format:w?.type=="TimeSpan"||w?.type=="TimeOnly"?{method:"time"}:null}const i=o(r),c=u.mapGet(s,r.name),d=Object.assign({},{type:e,propType:r,value:s},n),h=Nr(c,i,d),g=Rt(c)&&Array.isArray(c)?t.jsxs("span",{children:[t.jsx("span",{className:"mr-2",children:c.length}),t.jsx("span",{dangerouslySetInnerHTML:{__html:h}})]}):t.jsx("span",{dangerouslySetInnerHTML:{__html:h}}),m=r?.ref;if(!m)return g;const y=et(e).find(w=>w.type===m.model);if(!y)return g;const A=u.mapGet(s,y.name),v=A&&m.refLabel&&u.mapGet(A,m.refLabel);if(!v)return g;const k=a(m.model)?.icon;return t.jsxs("span",{className:"flex",title:`${m.model} ${s}`,children:[k&&t.jsx(Ht,{image:k,className:"w-5 h-5 mr-1"}),v]})}function ka({value:e,format:r,includeIcon:s=!0,includeCount:n=!0,maxFieldLength:a=150,maxNestedFields:o=2,maxNestedFieldLength:i=30,...c}){const d=l.useMemo(()=>Array.isArray(e),[e]),h=l.useMemo(()=>Nr(e,r,c),[e,r,c]);return Rt(e)?t.jsxs("span",{children:[n&&d&&t.jsx("span",{className:"mr-2",children:e.length}),t.jsx("span",{dangerouslySetInnerHTML:{__html:h}})]}):t.jsx("span",{dangerouslySetInnerHTML:{__html:h}})}function Hs({id:e="DataGrid",items:r=[],type:s,tableStyle:n="stripedRows",selectedColumns:a,gridClass:o,grid2Class:i,grid3Class:c,grid4Class:d,tableClass:h,tbodyClass:g,theadClass:m,theadRowClass:p,theadCellClass:y,headerTitles:A,headerTitle:v,visibleFrom:L,rowClass:k,rowStyle:w,isSelected:b,onHeaderSelected:N,onRowSelected:M,children:j}){const S=l.useRef(null),{typeOf:Y,typeProperties:D}=Xe(),U=l.useMemo(()=>kt(s),[s]),x=l.useMemo(()=>Y(U),[U]),$=l.useMemo(()=>D(x),[x]);function E(J){const H=A&&u.mapGet(A,J)||J;return v?v(H):u.humanify(H)}function W(J){const H=J.toLowerCase();return $.find(f=>f.name.toLowerCase()==H)}function O(J){const H=W(J);return H?.format?H.format:H?.type=="TimeSpan"||H?.type=="TimeOnly"?{method:"time"}:null}const B={xs:"xs:table-cell",sm:"sm:table-cell",md:"md:table-cell",lg:"lg:table-cell",xl:"xl:table-cell","2xl":"2xl:table-cell",never:""};function K(J){const H=L&&u.mapGet(L,J);return H&&u.map(B[H],f=>`hidden ${f}`)}const R=l.useMemo(()=>o??ce.getGridClass(n),[o,n]),C=l.useMemo(()=>i??ce.getGrid2Class(n),[i,n]),G=l.useMemo(()=>c??ce.getGrid3Class(n),[c,n]),Z=l.useMemo(()=>d??ce.getGrid4Class(n),[d,n]),Ne=l.useMemo(()=>h??ce.getTableClass(n),[h,n]),me=l.useMemo(()=>g??ce.getTbodyClass(g),[g]),Le=l.useMemo(()=>m??ce.getTheadClass(n),[m,n]),te=l.useMemo(()=>p??ce.getTheadRowClass(n),[p,n]),be=l.useMemo(()=>y??ce.getTheadCellClass(n),[y,n]);function xe(J,H){return k?k(J,H):ce.getTableRowClass(n,H,!!(b&&b(J)),b!=null)}function Ce(J,H){return w?w(J,H):void 0}const V=l.useMemo(()=>j?[]:[],[j]),Q=l.useMemo(()=>{const J=(typeof a=="string"?a.split(","):a)||(V.length>0?V:u.uniqueKeys(r)),H=$.reduce((f,T)=>(f[T.name.toLowerCase()]=T.format,f),{});return J.filter(f=>H[f.toLowerCase()]?.method!="hidden")},[a,V,r,$]),de=(J,H,f)=>null;return r.length?t.jsx("div",{ref:S,className:R,children:t.jsx("div",{className:C,children:t.jsx("div",{className:G,children:t.jsx("div",{className:Z,children:t.jsxs("table",{className:Ne,children:[t.jsx("thead",{className:Le,children:t.jsx("tr",{className:te,children:Q.map(J=>t.jsx("td",{className:`${K(J)} ${be} text-gray-500 dark:text-gray-400`,children:t.jsx("div",{onClick:H=>N?.(J,H),children:de()||t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("span",{className:"mr-1 select-none",children:E(J)})})})},J))})}),t.jsx("tbody",{className:me,children:r.map((J,H)=>t.jsx("tr",{className:xe(J,H),style:Ce(J,H),onClick:f=>M?.(J,f),children:Q.map(f=>t.jsx("td",{className:`${K(f)} ${ce.tableCellClass}`,children:de()||(W(f)?t.jsx(Na,{type:x,propType:W(f),value:J}):t.jsx(ka,{value:u.mapGet(J,f),format:O(f)??void 0}))},f))},H))})]})})})})}):null}function Ca({id:e,input:r,metadataType:s,value:n,onChange:a,status:o,label:i,labelClass:c,help:d}){const{config:h}=bt(),{metadataApi:g}=Xe(),m=l.useContext(Dr),p=l.useContext($a),y=l.useMemo(()=>e||r.id,[e,r.id]),A=l.useMemo(()=>i??u.humanize(u.toPascalCase(y)),[i,y]),v=l.useMemo(()=>u.errorResponse.call({responseStatus:o},y),[o,y]),[L,k]=l.useState(""),w=l.useMemo(()=>u.mapGet(n,y),[n,y]),b=l.useMemo(()=>et(s).find(D=>D.name.toLowerCase()==y.toLowerCase()),[s,y]),N=l.useMemo(()=>nt(b?.ref?.model)?.icon||h.tableIcon,[b,h]);function M(D){return D?r.options?Object.assign({},D,Er(r.options,{input:r,$typeFields:et(s).map(U=>U.name),...z.config.scopeWhitelist})):D:null}const j=l.useMemo(()=>M(b?.ref??(r.type=="lookup"?{model:s.name,refId:jt(s)?.name??"id",refLabel:s.properties?.find(D=>D.type=="String"&&!D.isPrimaryKey)?.name}:null)),[b,r.type,s]);function S(D){if(D){if(p==null){console.warn("No ModalProvider required by LookupInput");return}p.openModal({name:"ModalLookup",ref:D},U=>{if(console.debug("openModal",L," -> ",U,Ze.setRefValue(D,U),D),U){const x=u.mapGet(U,D.refId);k(Ze.setRefValue(D,U)||x);const $={...n};$[y]=x,a?.($)}})}}function Y(){n[y]=null,k("")}return l.useEffect(()=>{(async()=>{const D=n;n[y]||(n[y]=null);const U=b,x=j;if(!U||!x){console.warn(`No RefInfo for property '${y}'`);return}k("");let $=x.selfId==null?u.mapGet(D,U.name):u.mapGet(D,x.selfId);if(Rt($)&&($=u.mapGet(D,x.refId)),$==null)return;const W=g?.operations.find(O=>O.dataModel?.name==x.model);if(console.debug("LookupInput queryOp",W),W!=null){const O=u.mapGet(D,U.name);if(Rt(O))return;if(k(`${O}`),x.refLabel!=null){const B=et(s).filter(C=>C.type==x.model);B.length||console.warn(`Could not find ${x.model} Property on ${s.name}`);const K=B.map(C=>u.mapGet(D,C.name)).filter(C=>!!C),R=K.length<=1?K[0]:K.find(C=>C[x.refId??"id"]==$);if(R!=null){let C=u.mapGet(R,x.refLabel);C&&(k(`${C}`),Ze.setValue(x.model,$,x.refLabel,C))}else{const C=U.attributes?.some(Z=>Z.name=="Computed")==!0;let G=await Ze.getOrFetchValue(m,g,x.model,x.refId,x.refLabel,C,$);k(G||`${x.model}: ${L}`)}}}})()},[]),t.jsxs("div",{className:"lookup-field",children:[t.jsx("input",{type:"hidden",name:y,value:w}),A&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("label",{htmlFor:y,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 ${c??""}`,children:A}),w&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 pr-1",children:w}),t.jsxs("button",{onClick:Y,type:"button",title:"clear",className:"mr-1 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:ring-offset-black",children:[t.jsx("span",{className:"sr-only",children:"Clear"}),t.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]})]}),j&&t.jsx("div",{className:"mt-1 relative",children:t.jsxs("button",{type:"button",className:"lookup flex relative w-full bg-white dark:bg-black border border-gray-300 dark:border-gray-700 rounded-md shadow-sm pl-3 pr-10 py-2 text-left focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onClick:()=>S(j),"aria-haspopup":"listbox","aria-expanded":"true","aria-labelledby":"listbox-label",children:[t.jsx("span",{className:"w-full inline-flex truncate",children:t.jsxs("span",{className:"text-blue-700 dark:text-blue-300 flex cursor-pointer",children:[t.jsx(Ht,{className:"mr-1 w-5 h-5",image:N}),t.jsx("span",{children:L})]})}),t.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),v&&t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${y}-error`,children:v}),!v&&d&&t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${y}-description`,children:d})]})}function Ma({id:e,label:r,help:s,value:n,onChange:a,status:o,inputClass:i,labelClass:c,filterClass:d,className:h,...g}){const m=l.useMemo(()=>r??u.humanize(u.toPascalCase(e)),[r,e]),p=l.useContext(vt),y=l.useMemo(()=>u.errorResponse.call({responseStatus:o??p?.error?.current},e),[o,p,e]),A=l.useMemo(()=>Mt(["focus:ring-indigo-500 h-4 w-4 text-indigo-600 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-800",i],"CheckboxInput",d),[i,d]),v=L=>{a?.(L.target.checked)};return t.jsxs("div",{className:`relative flex items-start ${h??""}`,children:[t.jsx("div",{className:"flex items-center h-5",children:t.jsx("input",{id:e,name:e,type:"checkbox",checked:n??!1,onChange:v,className:A,...u.omit(g,["class"])})}),t.jsxs("div",{className:"ml-3 text-sm",children:[t.jsx("label",{htmlFor:e,className:`font-medium text-gray-700 dark:text-gray-300 ${c??""}`,children:m}),y?t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:y}):s?t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:s}):null]})]})}function La({id:e,type:r,label:s,labelClass:n,help:a,value:o=[],onChange:i,status:c,inputClass:d,filterClass:h,className:g,allowableValues:m,string:p,converter:y,delimiters:A=[","],maxVisibleItems:v=300,...L}){const k=l.useRef(null),[w,b]=l.useState(),[N,M]=l.useState(!1),[j,S]=l.useState(""),[Y,D]=l.useState(!1);function U(f){return y?y(f):f}const x=l.useMemo(()=>{const f=U(o);return u.map(f,T=>typeof T=="string"?T.trim().length==0?[]:T.split(","):T)||[]},[o,y]),$=l.useMemo(()=>{const f=j.toLowerCase();return!m||m.length==0?[]:m.length<1e3?m.filter(T=>!x.includes(T)&&T.toLowerCase().includes(f)):m.filter(T=>!x.includes(T)&&T.startsWith(f))},[m,x,j]),E=l.useMemo(()=>r||"text",[r]),W=l.useMemo(()=>s??u.humanize(u.toPascalCase(e)),[s,e]),O=l.useContext(vt),B=l.useMemo(()=>u.errorResponse.call({responseStatus:c??O?.error?.current},e),[c,O,e]),K=l.useMemo(()=>Mt(["w-full cursor-text flex flex-wrap sm:text-sm rounded-md dark:text-white dark:bg-gray-900 border focus-within:border-transparent focus-within:ring-1 focus-within:outline-none",B?"pr-10 border-red-300 text-red-900 placeholder-red-300 focus-within:outline-none focus-within:ring-red-500 focus-within:border-red-500":"shadow-sm border-gray-300 dark:border-gray-600 focus-within:ring-indigo-500 focus-within:border-indigo-500",d],"TagInput",h),[B,d,h]),R=f=>me(x.filter(T=>T!=f));function C(f){document.activeElement===f.target&&k.current?.focus()}function G(){M(!0),D(!0)}function Z(){G()}function Ne(){Q(te()),D(!1),setTimeout(()=>{Y||M(!1)},200)}function me(f){const T=p?f.join(","):f;i?.(T)}function Le(f){if(f.key=="Backspace"&&j.length==0&&x.length>0&&R(x[x.length-1]),!(!m||m.length==0))if(f.code=="Escape"||f.code=="Tab")M(!1);else if(f.code=="Home")b($[0]),Ce();else if(f.code=="End")b($[$.length-1]),Ce();else if(f.code=="ArrowDown"){if(M(!0),!w)b($[0]);else{const T=$.indexOf(w);b(T+1<$.length?$[T+1]:$[0])}V()}else if(f.code=="ArrowUp"){if(!w)b($[$.length-1]);else{const T=$.indexOf(w);b(T-1>=0?$[T-1]:$[$.length-1])}V()}else f.code=="Enter"?w&&N?(Q(w),f.preventDefault()):M(!1):M($.length>0)}function te(){if(j.length==0)return"";let f=u.trimEnd(j.trim(),",");return f[0]==","&&(f=f.substring(1)),f=f.trim(),f.length==0&&N&&$.length>0?w:f}function be(f){const T=te();if(T&&T.length>0){const F=A.some(se=>se==f.key);if(F&&f.preventDefault(),f.key=="Enter"||f.key=="NumpadEnter"||f.key.length==1&&F){Q(T);return}}}const xe={behavior:"smooth",block:"nearest",inline:"nearest",scrollMode:"if-needed"};function Ce(){setTimeout(()=>{let f=u.$1(`#${e}-tag li.active`);f&&f.scrollIntoView(xe)},0)}function V(){setTimeout(()=>{let f=u.$1(`#${e}-tag li.active`);f&&("scrollIntoViewIfNeeded"in f?f.scrollIntoViewIfNeeded(xe):f.scrollIntoView(xe))},0)}function Q(f){if(!f||f.length===0)return;const T=Array.from(x);T.indexOf(f)==-1&&T.push(f),me(T),S(""),M(!1)}function de(f){f.preventDefault(),f.stopPropagation();const T=f.clipboardData?.getData("Text");J(T)}function J(f){if(!f)return;const T=new RegExp(`\\n|\\t|${A.join("|")}`),F=Array.from(x);f.split(T).map(se=>se.trim()).forEach(se=>{F.indexOf(se)==-1&&F.push(se)}),me(F),S("")}const H=u.omit(L,["class","required"]);return t.jsxs("div",{className:g,id:`${e}-tag`,onMouseMove:()=>D(!0),children:[W&&t.jsx("label",{htmlFor:e,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 ${n??""}`,children:W}),t.jsxs("div",{className:"mt-1 relative",children:[t.jsx("input",{type:"hidden",id:e,name:e,value:x.join(",")}),t.jsx("button",{className:K,onClick:C,onFocus:()=>M(!0),tabIndex:-1,children:t.jsxs("div",{className:"flex flex-wrap pb-1.5",children:[x.map(f=>t.jsx("div",{className:"pt-1.5 pl-1",children:t.jsxs("span",{className:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-indigo-100 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-300",children:[f,t.jsx("button",{type:"button",onClick:()=>R(f),className:"flex-shrink-0 ml-1 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 dark:text-indigo-500 hover:bg-indigo-200 dark:hover:bg-indigo-800 hover:text-indigo-500 dark:hover:text-indigo-400 focus:outline-none focus:bg-indigo-500 focus:text-white dark:focus:text-black",children:t.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:t.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})]})},f)),t.jsx("div",{className:"pt-1.5 pl-1 shrink",children:t.jsx("input",{ref:k,type:E,role:"combobox","aria-controls":"options","aria-expanded":"false",autoComplete:"off",spellCheck:"false",name:`${e}-txt`,id:`${e}-txt`,className:"p-0 dark:bg-transparent rounded-md border-none focus:!border-none focus:!outline-none",style:{boxShadow:"none !important",width:`${j.length+1}ch`},value:j,onChange:f=>S(f.target.value),"aria-invalid":B!=null,"aria-describedby":`${e}-error`,onKeyDown:Le,onKeyPress:be,onPaste:de,onFocus:Z,onBlur:Ne,onClick:()=>M(!0),...H})})]})}),N&&$.length>0&&t.jsx("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-black py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",onKeyDown:Le,id:`${e}-options`,role:"listbox",children:$.slice(0,v).map(f=>t.jsx("li",{className:`${f===w?"active bg-indigo-600 text-white":"text-gray-900 dark:text-gray-100"} relative cursor-default select-none py-2 pl-3 pr-9`,onMouseOver:()=>b(f),onClick:()=>Q(f),role:"option",tabIndex:-1,children:t.jsx("span",{className:"block truncate",children:f})},f))}),B&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),B?t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:B}):a?t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:a}):null]})}const Us=l.forwardRef(({id:e,label:r,multiple:s=!1,options:n=[],viewCount:a=100,pageSize:o=8,value:i,onChange:c,match:d,status:h,help:g,placeholder:m,children:p,...y},A)=>{const[v,L]=l.useState(!1),[k,w]=l.useState(""),[b,N]=l.useState(null),[M,j]=l.useState(a),[S,Y]=l.useState([]),D=l.useRef(null);l.useImperativeHandle(A,()=>({toggle:te}));function U(V){return Array.isArray(i)&&i.indexOf(V)>=0}const x=l.useMemo(()=>r??u.humanize(u.toPascalCase(e)),[r,e]),$=l.useMemo(()=>u.errorResponse.call({responseStatus:h},e),[h,e]),E=l.useMemo(()=>[at.base,$?at.invalid:at.valid].join(" "),[$]),W=l.useMemo(()=>k?n.filter(Q=>d(Q,k)).slice(0,M):n,[k,n,d,M]),O=["Tab","Escape","ArrowDown","ArrowUp","Enter","PageUp","PageDown","Home","End"];function B(V){N(V),S.indexOf(V)>Math.floor(M*.9)&&(j(de=>de+a),Ce())}const K=[",",`
`,"	"];function R(V){const Q=V.clipboardData?.getData("Text");C(Q)}function C(V){if(!V)return;const Q=K.some(de=>V.includes(de));if(!s||!Q){const de=n.filter(J=>d(J,V));de.length==1&&(xe(de[0]),L(!1),Lr())}else if(Q){const de=new RegExp("\\r|\\n|\\t|,"),H=V.split(de).filter(f=>f.trim()).map(f=>n.find(T=>d(T,f))).filter(f=>!!f);if(H.length>0){w(""),L(!1),N(null);let f=Array.from(i||[]);H.forEach(T=>{U(T)?f=f.filter(F=>F!=T):f.push(T)}),c?.(f),Lr()}}}function G(V){O.indexOf(V.code)||be()}function Z(V){if(!(V.shiftKey||V.ctrlKey||V.altKey)){if(!v){V.code=="ArrowDown"&&(L(!0),N(S[0]));return}if(V.code=="Escape")v&&(V.stopPropagation(),L(!1));else if(V.code=="Tab")L(!1);else if(V.code=="Home")N(S[0]),me();else if(V.code=="End")N(S[S.length-1]),me();else if(V.code=="ArrowDown"){if(!b)N(S[0]);else{const Q=S.indexOf(b);N(Q+1<S.length?S[Q+1]:S[0])}Le()}else if(V.code=="ArrowUp"){if(!b)N(S[S.length-1]);else{const Q=S.indexOf(b);N(Q-1>=0?S[Q-1]:S[S.length-1])}Le()}else V.code=="Enter"&&(b?(xe(b),s||(V.preventDefault(),Lr())):L(!1))}}const Ne={behavior:"smooth",block:"nearest",inline:"nearest"};function me(){setTimeout(()=>{let V=document.querySelector(`#${e}-autocomplete li.active`);V&&V.scrollIntoView(Ne)},0)}function Le(){setTimeout(()=>{let V=document.querySelector(`#${e}-autocomplete li.active`);V&&("scrollIntoViewIfNeeded"in V?V.scrollIntoViewIfNeeded(Ne):V.scrollIntoView(Ne))},0)}function te(V){L(V),V&&(be(),D.current?.focus())}function be(){L(!0),Ce()}function xe(V){if(w(""),L(!1),s){let Q=Array.from(i||[]);U(V)?Q=Q.filter(de=>de!=V):Q.push(V),N(null),c?.(Q)}else{let Q=V;i==V&&(Q=null),c?.(Q)}}function Ce(){Y(W)}return l.useEffect(()=>{Ce()},[W]),t.jsxs("div",{id:`${e}-autocomplete`,children:[x&&t.jsx("label",{htmlFor:`${e}-text`,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:x}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("input",{ref:D,id:`${e}-text`,type:"text",role:"combobox","aria-controls":"options","aria-expanded":"false",autoComplete:"off",spellCheck:"false",value:k,onChange:V=>w(V.target.value),className:E,placeholder:s||!i?m:"",onFocus:be,onKeyDown:Z,onKeyUp:G,onClick:be,onPaste:R,required:!1,...y}),t.jsx("button",{type:"button",onClick:()=>te(!v),className:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none",tabIndex:-1,children:t.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z",clipRule:"evenodd"})})}),v&&t.jsx("ul",{className:"absolute z-20 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-black py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",onKeyDown:Z,id:`${e}-options`,role:"listbox",children:S.map((V,Q)=>t.jsxs("li",{className:`${V===b?"active bg-indigo-600 text-white":"text-gray-900 dark:text-gray-100"} relative cursor-default select-none py-2 pl-3 pr-9`,onMouseOver:()=>B(V),onClick:()=>xe(V),role:"option",tabIndex:-1,children:[p?typeof p=="function"?p(V):p:typeof V=="string"?V:V.value,U(V)&&t.jsx("span",{className:`absolute inset-y-0 right-0 flex items-center pr-4 ${V===b?"text-white":"text-indigo-600"}`,children:t.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"})})})]},Q))}),!v&&!s&&i&&t.jsx("div",{onKeyDown:Z,onClick:()=>te(!v),className:"h-8 -mt-8 ml-3 pt-0.5",children:p?typeof p=="function"?p(i):p:typeof i=="string"?i:i.value}),$&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",tabIndex:-1,children:t.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),$&&t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:$}),!$&&g&&t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:g})]})});Us.displayName="Autocomplete";const qs=l.forwardRef(({id:e,value:r,entries:s,values:n,options:a,multiple:o,onChange:i,...c},d)=>{const h=l.useRef(null);l.useImperativeHandle(d,()=>({toggle(w){h.current?.toggle(w)}}));const g=l.useMemo(()=>o??Array.isArray(r),[o,r]);function m(w,b){return!b||w.value.toLowerCase().includes(b.toLowerCase())}const p=l.useMemo(()=>s||(n?n.map(w=>({key:w,value:w})):a?Object.keys(a).map(w=>({key:w,value:a[w]})):[]),[s,n,a]),[y,A]=l.useState(g?[]:null);function v(){let w=r&&typeof r=="object"&&!Array.isArray(r)?r.key:r;w==null||w===""?A(g?[]:null):typeof w=="string"?A(p.find(b=>b.key===w)||null):Array.isArray(w)&&A(p.filter(b=>w.includes(b.key)))}l.useEffect(()=>{v()},[r,p]);const L=l.useMemo(()=>y==null?"":Array.isArray(y)?y.map(w=>encodeURIComponent(w.key)).join(","):y.key,[y]);function k(w){i?.(w)}return t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"hidden",id:e,name:e,value:L}),t.jsx(Us,{ref:h,id:e,options:p,match:m,multiple:g,value:y,onChange:k,...c})]})});qs.displayName="Combobox";function Sa({id:e,label:r,labelClass:s,help:n,placeholder:a,value:o,values:i,files:c,multiple:d,status:h,inputClass:g,filterClass:m,className:p,...y}){const A=l.useRef(null),{assetsPathResolver:v,fallbackPathResolver:L}=bt(),[k,w]=l.useState({}),[b,N]=l.useState(),[M,j]=l.useState(()=>c&&c.length>0?c.map(C=>({...C,filePath:v(C.filePath)})):i&&i.length>0?i.map(C=>{let G=C.replace(/\\/g,"/");return{fileName:u.lastLeftPart(u.lastRightPart(G,"/"),"."),filePath:v(G),contentType:ts(G)}}):[]),S=l.useMemo(()=>r??u.humanize(u.toPascalCase(e)),[r,e]),Y=l.useMemo(()=>a??S,[a,S]),D=l.useContext(vt),U=l.useMemo(()=>u.errorResponse.call({responseStatus:h??D?.error?.current},e),[h,D,e]),x=l.useMemo(()=>Mt(["block w-full sm:text-sm rounded-md dark:text-white dark:bg-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 dark:file:bg-violet-900 file:text-violet-700 dark:file:text-violet-200 hover:file:bg-violet-100 dark:hover:file:bg-violet-800",U?"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"text-slate-500 dark:text-slate-400",g],"FileInput",m),[U,g,m]),$=C=>{const G=C.target;N(""),j(Array.from(G.files||[]).map(Z=>({fileName:Z.name,filePath:Xr(Z),contentLength:Z.size,contentType:Z.type||ts(Z.name)})))},E=()=>A.current?.click(),W=C=>C==null?!1:C.startsWith("data:")||C.startsWith("blob:"),O=l.useMemo(()=>{if(M.length>0)return M[0].filePath;let C=typeof o=="string"?o:i&&i[0];return C&&Ot(v(C))||null},[M,o,i,v]),B=C=>!C||C.startsWith("data:")||C.endsWith(".svg")?"":"rounded-full object-cover";function K(C){N(L(O))}function R(C){const G=Ot(C);w(Z=>({...Z,[G]:L(G)}))}return l.useEffect(()=>()=>dn(),[]),t.jsxs("div",{className:`flex ${d?"flex-col":"justify-between"}`,children:[t.jsxs("div",{className:"relative flex-grow mr-2 sm:mr-4",children:[S&&t.jsx("label",{htmlFor:e,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 ${s??""}`,children:S}),t.jsxs("div",{className:"block mt-2",children:[t.jsx("span",{className:"sr-only",children:n??S}),t.jsx("input",{ref:A,type:"file",multiple:d,name:e,id:e,className:x,placeholder:Y,"aria-invalid":U!=null,"aria-describedby":`${e}-error`,onChange:$,...y}),U&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),U?t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:U}):n?t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:n}):null]}),d?t.jsx("div",{className:"mt-3",children:t.jsx("table",{className:"w-full",children:t.jsx("tbody",{children:M.map((C,G)=>t.jsxs("tr",{children:[t.jsx("td",{className:"pr-6 align-bottom pb-2",children:t.jsxs("div",{className:"flex w-full",title:W(C.filePath)?"":C.filePath,children:[t.jsx("img",{src:k[Ot(C.filePath)]||v(Ot(C.filePath)),className:`mr-2 h-8 w-8 ${B(C.filePath)}`,onError:()=>R(C.filePath),alt:""}),W(C.filePath)?t.jsx("span",{className:"overflow-hidden",children:C.fileName}):t.jsx("a",{href:v(C.filePath||""),target:"_blank",rel:"noreferrer",className:"overflow-hidden",children:C.fileName})]})}),t.jsx("td",{className:"align-top pb-2 whitespace-nowrap",children:C.contentLength&&C.contentLength>0&&t.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm bg-white dark:bg-black",children:Rr(C.contentLength)})})]},G))})})}):t.jsx("div",{children:O&&t.jsx("div",{className:"shrink-0 cursor-pointer",title:W(O)?"":O,children:t.jsx("img",{onClick:E,className:`h-16 w-16 ${B(O)}`,alt:`Current ${S??""}`,src:b||v(O),onError:K})})})]})}function Aa({id:e,label:r,placeholder:s,help:n,value:a,onChange:o,status:i,inputClass:c,labelClass:d,filterClass:h,className:g,...m}){const p=l.useMemo(()=>r??u.humanize(u.toPascalCase(e)),[r,e]),y=l.useMemo(()=>s??p,[s,p]),A=l.useContext(vt),v=l.useMemo(()=>u.errorResponse.call({responseStatus:i??A?.error?.current},e),[i,A,e]),L=l.useMemo(()=>Mt(["shadow-sm "+at.base,v?"text-red-900 focus:ring-red-500 focus:border-red-500 border-red-300":"text-gray-900 "+at.valid,c],"TextareaInput",h),[v,c,h]),k=w=>{o?.(w.target.value)};return t.jsxs("div",{className:g,children:[p&&t.jsx("label",{htmlFor:e,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 ${d??""}`,children:p}),t.jsx("div",{className:"mt-1 relative",children:t.jsx("textarea",{name:e,id:e,className:L,placeholder:y,onChange:k,value:a??"","aria-invalid":v!=null,"aria-describedby":`${e}-error`,...u.omit(m,["class"])})}),v?t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:v}):n?t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:n}):null]})}const Ea=l.forwardRef(({id:e,value:r,onChange:s,status:n,label:a,labelClass:o,help:i,rows:c,disabled:d,lang:h,hide:g,helpUrl:m="https://guides.github.com/features/mastering-markdown/",inputClass:p,filterClass:y,onClose:A,headerSlot:v,toolbarbuttonsSlot:L,footerSlot:k},w)=>{const b=l.useRef([]),N=l.useRef([]),M=l.useRef(null),j=l.useContext(vt),S=l.useMemo(()=>u.errorResponse.call({responseStatus:n??j?.error?.current},e),[n,j,e]),Y=l.useMemo(()=>a??u.humanize(u.toPascalCase(e)),[a,e]),D="bold,italics,link,image,blockquote,code,heading,orderedList,unorderedList,strikethrough,undo,redo,help".split(","),U=l.useMemo(()=>g?$t(D,g):$t(D,[]),[g]);function x(f){return U[f]}const $=l.useMemo(()=>Mt(["shadow-sm font-mono"+at.base.replace("rounded-md",""),S?"text-red-900 focus:ring-red-500 focus:border-red-500 border-red-300":"text-gray-900 "+at.valid,p],"MarkdownInput",y),[S,p,y]),E="w-5 h-5 cursor-pointer select-none text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400";function W(f){s?.(f)}function O(){return M.current.selectionStart!==M.current.selectionEnd}function B(){const f=M.current;return f.value.substring(f.selectionStart,f.selectionEnd)||""}function K(){const f=M.current,T=f.value,F=f.selectionStart,ae=T.substring(F,f.selectionEnd)||"",se=T.substring(0,F),oe=se.lastIndexOf(`
`);return{value:T,sel:ae,selPos:F,beforeSel:se,afterSel:T.substring(F),prevCRPos:oe,beforeCR:oe>=0?se.substring(0,oe+1):"",afterCR:oe>=0?se.substring(oe+1):""}}function R({value:f,selectionStart:T,selectionEnd:F}){F==null&&(F=T),W(f),setTimeout(()=>{M.current.focus(),M.current.setSelectionRange(T,F)},0)}function C(f,T,F="",{selectionAtEnd:ae,offsetStart:se,offsetEnd:oe,filterValue:Ee,filterSelection:Fe}={}){const he=M.current;let ue=he.value,re=he.selectionEnd;b.current.push({value:ue,selectionStart:he.selectionStart,selectionEnd:he.selectionEnd}),N.current=[];const Se=he.selectionStart,je=he.selectionEnd;let Ae=ue.substring(0,Se),ye=ue.substring(je);const Te=f&&Ae.endsWith(f)&&ye.startsWith(T);if(Se==je){if(Te?(ue=Ae.substring(0,Ae.length-f.length)+ye.substring(T.length),re+=-T.length):(ue=Ae+f+F+T+ye,re+=f.length,se=0,oe=F?.length||0,ae&&(re+=oe,oe=0)),Ee){var Pe={pos:re};ue=Ee(ue,Pe),re=Pe.pos}}else{var ge=ue.substring(Se,je);Fe&&(ge=Fe(ge)),Te?(ue=Ae.substring(0,Ae.length-f.length)+ge+ye.substring(T.length),se=-ge.length-f.length,oe=ge.length):(ue=Ae+f+ge+T+ye,se?re+=(f+T).length:(re=Se,se=f.length,oe=ge.length))}W(ue),setTimeout(()=>{he.focus(),se=re+(se||0),oe=(se||0)+(oe||0),he.setSelectionRange(se,oe)},0)}const G=()=>C("**","**","bold"),Z=()=>C("_","_","italics"),Ne=()=>C("~~","~~","strikethrough"),me=()=>C("[","](https://)","",{offsetStart:-9,offsetEnd:8}),Le=()=>C(`
> `,`
`,"Blockquote",{}),te=()=>C("![](",")");function be(f){const T=B();if(T&&!f.shiftKey)C("`","`","code");else{const F=h||"js";T.indexOf(`
`)===-1?C("\n```"+F+`
`,"\n```\n","// code"):C("```"+F+`
`,"```\n","")}}function xe(){if(O()){let{sel:f,beforeSel:T,afterSel:F,prevCRPos:ae,beforeCR:se,afterCR:oe}=K();if(f.indexOf(`
`)===-1)C(`
 1. `,`
`);else if(!f.startsWith(" 1. ")){let he=1;C("",""," - ",{selectionAtEnd:!0,filterSelection:ue=>" 1. "+ue.replace(/\n$/,"").replace(/\n/g,re=>`
 ${++he}. `)+`
`})}else C("","","",{filterValue:(he,ue)=>{if(ae>=0){let re=oe.replace(/^ - /,"");T=se+re,ue.pos-=oe.length-re.length}return T+F},filterSelection:he=>he.replace(/^ 1. /g,"").replace(/\n \d+. /g,`
`)})}else C(`
 1. `,`
`,"List Item",{offsetStart:-10,offsetEnd:9})}function Ce(){if(O()){let{sel:f,beforeSel:T,afterSel:F,prevCRPos:ae,beforeCR:se,afterCR:oe}=K();f.indexOf(`
`)===-1?C(`
 - `,`
`):!f.startsWith(" - ")?C("",""," - ",{selectionAtEnd:!0,filterSelection:he=>" - "+he.replace(/\n$/,"").replace(/\n/g,`
 - `)+`
`}):C("","","",{filterValue:(he,ue)=>{if(ae>=0){let re=oe.replace(/^ - /,"");T=se+re,ue.pos-=oe.length-re.length}return T+F},filterSelection:he=>he.replace(/^ - /g,"").replace(/\n - /g,`
`)})}else C(`
 - `,`
`,"List Item",{offsetStart:-10,offsetEnd:9})}function V(){const f=B(),T=f.indexOf(`
`)===-1;f?T?C(`
## `,`
`,""):C("## ","",""):C(`
## `,`
`,"Heading",{offsetStart:-8,offsetEnd:7})}function Q(){let{sel:f,selPos:T,beforeSel:F,afterSel:ae,prevCRPos:se,beforeCR:oe,afterCR:Ee}=K();!f.startsWith("//")&&!Ee.startsWith("//")?f?C("","","//",{selectionAtEnd:!0,filterSelection:he=>"//"+he.replace(/\n$/,"").replace(/\n/g,`
//`)+`
`}):R({value:oe+"//"+Ee+ae,selectionStart:T+2}):C("","","",{filterValue:(he,ue)=>{if(se>=0){let re=Ee.replace(/^\/\//,"");F=oe+re,ue.pos-=Ee.length-re.length}return F+ae},filterSelection:he=>he.replace(/^\/\//g,"").replace(/\n\/\//g,`
`)})}const de=()=>C(`/*
`,`*/
`,"");function J(){if(b.current.length===0)return!1;const f=M.current,T=b.current.pop();return N.current.push({value:f.value,selectionStart:f.selectionStart,selectionEnd:f.selectionEnd}),R(T),!0}function H(){if(N.current.length===0)return!1;const f=M.current,T=N.current.pop();return b.current.push({value:f.value,selectionStart:f.selectionStart,selectionEnd:f.selectionEnd}),R(T),!0}return l.useImperativeHandle(w,()=>({props:{id:e,value:r,"onUpdate:modelValue":s,status:n,label:a,labelClass:o,help:i,rows:c,disabled:d,lang:h,hide:g,helpUrl:m,inputClass:p,filterClass:y,onClose:A},textarea:M,updateModelValue:W,selection:B,hasSelection:O,selectionInfo:K,insert:C,replace:R})),l.useEffect(()=>{b.current=[],N.current=[];const f=M.current,T=F=>{if(F.key==="Escape"||F.keyCode===27){A?.();return}const ae=String.fromCharCode(F.keyCode).toLowerCase();ae==="	"?(!F.shiftKey?C("","","    ",{selectionAtEnd:!0,filterSelection:oe=>"    "+oe.replace(/\n$/,"").replace(/\n/g,`
    `)+`
`}):C("","","",{filterValue:(oe,Ee)=>{let{beforeSel:Fe,afterSel:he,prevCRPos:ue,beforeCR:re,afterCR:Se}=K();if(ue>=0){let je=Se.replace(/\t/g,"    ").replace(/^ ? ? ? ?/,"");Fe=re+je,Ee.pos-=Se.length-je.length}return Fe+he},filterSelection:oe=>oe.replace(/\t/g,"    ").replace(/^ ? ? ? ?/g,"").replace(/\n    /g,`
`)}),F.preventDefault()):F.ctrlKey?ae==="z"?F.shiftKey?H()&&F.preventDefault():J()&&F.preventDefault():ae==="b"&&!F.shiftKey?(G(),F.preventDefault()):ae==="h"&&!F.shiftKey?(V(),F.preventDefault()):ae==="i"&&!F.shiftKey?(Z(),F.preventDefault()):ae==="q"&&!F.shiftKey?(Le(),F.preventDefault()):ae==="k"?F.shiftKey?(te(),F.preventDefault()):(me(),F.preventDefault()):ae===","||F.key==="<"||F.key===">"||F.keyCode===188?(be(F),F.preventDefault()):ae==="/"||F.key==="/"?(Q(),F.preventDefault()):(ae==="?"||F.key==="?")&&F.shiftKey&&(de(),F.preventDefault()):F.altKey&&(F.key==="1"||F.key==="0"?(xe(),F.preventDefault()):F.key==="-"?(Ce(),F.preventDefault()):F.key==="s"&&(Ne(),F.preventDefault()))};return f.onkeydown=T,()=>{f.onkeydown=null}},[r]),t.jsxs("div",{children:[v,Y&&t.jsx("label",{htmlFor:e,className:`mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300 ${o??""}`,children:Y}),!d&&t.jsxs("div",{className:"border border-gray-200 flex justify-between shadow-sm",children:[t.jsxs("div",{className:"p-2 flex flex-wrap gap-x-4",children:[x("bold")&&t.jsxs("svg",{className:E,onClick:G,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Bold text (CTRL+B)"}),t.jsx("path",{fill:"currentColor",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79c0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79c0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"})]}),x("italics")&&t.jsxs("svg",{className:E,onClick:Z,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Italics (CTRL+I)"}),t.jsx("path",{fill:"currentColor",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"})]}),x("link")&&t.jsxs("svg",{className:E,onClick:me,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Insert Link (CTRL+K)"}),t.jsx("path",{fill:"currentColor",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5a5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1c0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5a5 5 0 0 0-5-5Z"})]}),x("blockquote")&&t.jsxs("svg",{className:E,onClick:Le,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Blockquote (CTRL+Q)"}),t.jsx("path",{fill:"currentColor",d:"m15 17l2-4h-4V6h7v7l-2 4h-3Zm-9 0l2-4H4V6h7v7l-2 4H6Z"})]}),x("image")&&t.jsxs("svg",{className:E,onClick:te,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Insert Image (CTRL+SHIFT+L)"}),t.jsx("path",{fill:"currentColor",d:"M2.992 21A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016c.548 0 .992.445.992.993v16.014a1 1 0 0 1-.992.993H2.992ZM20 15V5H4v14L14 9l6 6Zm0 2.828l-6-6L6.828 19H20v-1.172ZM8 11a2 2 0 1 1 0-4a2 2 0 0 1 0 4Z"})]}),x("code")&&t.jsxs("svg",{className:E,onClick:be,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Insert Code (CTRL+<)"}),t.jsx("path",{fill:"currentColor",d:"m8 18l-6-6l6-6l1.425 1.425l-4.6 4.6L9.4 16.6L8 18Zm8 0l-1.425-1.425l4.6-4.6L14.6 7.4L16 6l6 6l-6 6Z"})]}),x("heading")&&t.jsxs("svg",{className:E,onClick:V,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"H2 Heading (CTRL+H)"}),t.jsx("path",{fill:"currentColor",d:"M7 20V7H2V4h13v3h-5v13H7Zm9 0v-8h-3V9h9v3h-3v8h-3Z"})]}),x("orderedList")&&t.jsxs("svg",{className:E,onClick:xe,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Numbered List (ALT+1)"}),t.jsx("path",{fill:"currentColor",d:"M3 22v-1.5h2.5v-.75H4v-1.5h1.5v-.75H3V16h3q.425 0 .713.288T7 17v1q0 .425-.288.713T6 19q.425 0 .713.288T7 20v1q0 .425-.288.713T6 22H3Zm0-7v-2.75q0-.425.288-.713T4 11.25h1.5v-.75H3V9h3q.425 0 .713.288T7 10v1.75q0 .425-.288.713T6 12.75H4.5v.75H7V15H3Zm1.5-7V3.5H3V2h3v6H4.5ZM9 19v-2h12v2H9Zm0-6v-2h12v2H9Zm0-6V5h12v2H9Z"})]}),x("unorderedList")&&t.jsxs("svg",{className:E,onClick:Ce,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Bulleted List (ALT+-)"}),t.jsx("path",{fill:"currentColor",d:"M9 19v-2h12v2H9Zm0-6v-2h12v2H9Zm0-6V5h12v2H9ZM5 20q-.825 0-1.413-.588T3 18q0-.825.588-1.413T5 16q.825 0 1.413.588T7 18q0 .825-.588 1.413T5 20Zm0-6q-.825 0-1.413-.588T3 12q0-.825.588-1.413T5 10q.825 0 1.413.588T7 12q0 .825-.588 1.413T5 14Zm0-6q-.825 0-1.413-.588T3 6q0-.825.588-1.413T5 4q.825 0 1.413.588T7 6q0 .825-.588 1.413T5 8Z"})]}),x("strikethrough")&&t.jsxs("svg",{className:E,onClick:Ne,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Strike Through (ALT+S)"}),t.jsx("path",{fill:"currentColor",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})]}),x("undo")&&t.jsxs("svg",{className:E,onClick:J,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Undo (CTRL+Z)"}),t.jsx("path",{fill:"currentColor",d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88c3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"})]}),x("redo")&&t.jsxs("svg",{className:E,onClick:H,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[t.jsx("title",{children:"Redo (CTRL+SHIFT+Z)"}),t.jsx("path",{fill:"currentColor",d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"})]}),L]}),x("help")&&m&&t.jsx("div",{className:"p-2 flex flex-wrap gap-x-4",children:t.jsx("a",{title:"formatting help",target:"_blank",href:m,tabIndex:-1,children:t.jsx("svg",{className:E,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5c0-2.21-1.79-4-4-4z"})})})})]}),t.jsx("div",{className:"",children:t.jsx("textarea",{ref:M,name:e,id:e,className:$,value:r,rows:c||6,disabled:d,onChange:f=>W(f.target.value),onKeyDown:f=>{f.key}})}),S&&t.jsx("p",{className:"mt-2 text-sm text-red-500",id:`${e}-error`,children:S}),!S&&i&&t.jsx("p",{className:"mt-2 text-sm text-gray-500",id:`${e}-description`,children:i}),k]})});function Ta({input:e,value:r,onChange:s,api:n}){const a=l.useMemo(()=>e.type||"text",[e.type]),o="ignore,css,options,meta,allowableValues,allowableEntries,op,prop,type,id,name".split(","),i=l.useMemo(()=>u.omit(e,o),[e]),[c,d]=l.useState(a==="file"?null:r[e.id]);l.useEffect(()=>{r[e.id]=c,s?.(r)},[c]);const h=l.useMemo(()=>{const m=r[e.id];if(e.type!=="file"||!m)return[];if(typeof m=="string")return[{filePath:m,fileName:u.lastRightPart(m,"/")}];if(!Array.isArray(m)&&typeof m=="object")return m;if(Array.isArray(m)){const p=[];return m.forEach(y=>{typeof y=="string"?p.push({filePath:y,fileName:u.lastRightPart(y,"/")}):typeof y=="object"&&p.push(y)}),p}return[]},[r,e.id,e.type]),g=z.component(a);return g?t.jsx(g,{id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,...i}):a==="select"?t.jsx(Vs,{id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,entries:e.allowableEntries,values:e.allowableValues,...i}):a==="checkbox"?t.jsx(Ma,{id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,...i}):a==="tag"?t.jsx(La,{id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,allowableValues:e.allowableValues,string:e.prop?.type=="String",...i}):a==="combobox"?t.jsx(qs,{id:e.id,value:c,onChange:d,entries:e.allowableEntries,values:e.allowableValues,...i}):a==="file"?t.jsx(Sa,{id:e.id,status:n?.error,value:c,onChange:d,inputClass:e.css?.input,labelClass:e.css?.label,files:h,...i}):a==="textarea"?t.jsx(Aa,{id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,...i}):a==="MarkdownInput"?t.jsx(Ea,{id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,...i}):t.jsx(Fr,{type:a,id:e.id,value:c,onChange:d,status:n?.error,inputClass:e.css?.input,labelClass:e.css?.label,...i})}const wt=l.forwardRef(({value:e,onChange:r,type:s,metaType:n,formLayout:a,api:o,hideSummary:i,configureField:c,configureFormLayout:d,flexClass:h="flex flex-1 flex-col justify-between",divideClass:g="divide-y divide-gray-200 px-4 sm:px-6",spaceClass:m="space-y-6 pt-6 pb-5",fieldsetClass:p="grid grid-cols-12 gap-6"},y)=>{const[,A]=l.useState(0);function v(){A(E=>E+1)}function L(E,W){k(E.id,u.mapGet(W,E.id))}function k(E,W){e[E]=W,r?.(e),v()}l.useImperativeHandle(y,()=>({forceUpdate:v,props:{value:e,onChange:r,type:s,metaType:n,formLayout:a,api:o,hideSummary:i,configureField:c,configureFormLayout:d,flexClass:h,divideClass:g,spaceClass:m,fieldsetClass:p},updateValue:k}));const{metadataApi:w,apiOf:b,typeOf:N,typeOfRef:M,createFormLayout:j}=Xe(),S=l.useMemo(()=>s||kt(e),[s,e]),Y=l.useMemo(()=>n??N(S),[n,S]),D=l.useMemo(()=>M(w?.operations.find(E=>E.request.name==S)?.dataModel)||Y,[w,S,Y]);function U(){const E=Y;if(!E){if(a){const C=a.map(G=>{const Z={name:G.id,type:gl(G.type)},Ne=Object.assign({prop:Z},G);return c&&c(Ne),Ne});return d&&d(C),C}throw new Error(`MetadataType for ${S} not found`)}const W=et(E),O=D,B=a?Array.from(a):j(E),K=[],R=b(E.name);return B.forEach(C=>{const G=W.find(me=>me.name==C.name);if(C.ignore)return;const Z=O?.properties?.find(me=>me.name.toLowerCase()==C.name?.toLowerCase())??G,Ne=Object.assign({prop:Z,op:R},C);c&&c(Ne),K.push(Ne)}),d&&d(K),K}const x=l.useMemo(()=>U(),[Y,a,c,d]),$=()=>x.filter(E=>E.type!="hidden").map(E=>E.id);return t.jsxs(t.Fragment,{children:[!i&&t.jsx(tr,{status:o?.error,except:$()}),t.jsx("div",{className:h,children:t.jsx("div",{className:g,children:t.jsx("div",{className:m,children:t.jsx("fieldset",{className:p,children:x.map(E=>t.jsx("div",{className:`w-full ${E.css?.field??(E.type=="textarea"?"col-span-12":"col-span-12 xl:col-span-6"+(E.type=="checkbox"?" flex items-center":""))} ${E.type=="hidden"?"hidden":""}`,children:E.type==="lookup"||E.prop?.ref!=null&&E.type!="file"&&!E.prop.isPrimaryKey?t.jsx(Ca,{metadataType:D,input:E,value:e,onChange:W=>L(E,W),status:o?.error}):t.jsx(Ta,{input:E,value:e,onChange:r,api:o})},E.id))})})})})]})});wt.displayName="AutoFormFields";function Lt({icon:e=!0,text:r="loading..."}){return t.jsxs("div",{className:"flex",title:"loading...",children:[e&&t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30",children:[t.jsxs("rect",{x:"0",y:"10",width:"4",height:"10",fill:"#333",opacity:"0.2",children:[t.jsx("animate",{attributeName:"opacity",attributeType:"XML",values:"0.2; 1; .2",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),t.jsx("animate",{attributeName:"height",attributeType:"XML",values:"10; 20; 10",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),t.jsx("animate",{attributeName:"y",attributeType:"XML",values:"10; 5; 10",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})]}),t.jsxs("rect",{x:"8",y:"10",width:"4",height:"10",fill:"#333",opacity:"0.2",children:[t.jsx("animate",{attributeName:"opacity",attributeType:"XML",values:"0.2; 1; .2",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),t.jsx("animate",{attributeName:"height",attributeType:"XML",values:"10; 20; 10",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),t.jsx("animate",{attributeName:"y",attributeType:"XML",values:"10; 5; 10",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})]}),t.jsxs("rect",{x:"16",y:"10",width:"4",height:"10",fill:"#333",opacity:"0.2",children:[t.jsx("animate",{attributeName:"opacity",attributeType:"XML",values:"0.2; 1; .2",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),t.jsx("animate",{attributeName:"height",attributeType:"XML",values:"10; 20; 10",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),t.jsx("animate",{attributeName:"y",attributeType:"XML",values:"10; 5; 10",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})]})]}),t.jsx("span",{className:"ml-2 mt-1 text-gray-400",children:r})]})}const Da=l.createContext(null),_s=l.forwardRef(({formStyle:e="slideOver",autosave:r=!0,showLoading:s=!0,showCancel:n=!0,type:a,panelClass:o,formClass:i,headingClass:c,subHeadingClass:d,buttonsClass:h,heading:g,subHeading:m,configureField:p,configureFormLayout:y,onSave:A,onError:v,onDone:L,headingSlot:k,subheadingSlot:w,headerSlot:b,footerSlot:N},M)=>{const j=l.useRef(),[S,Y]=l.useState(1);function D(){Y(ye=>ye+1),j.current?.forceUpdate()}const{typeOf:U,typeProperties:x,Crud:$,createDto:E,formValues:W}=Xe(),O=l.useMemo(()=>kt(a),[a]),B=l.useMemo(()=>U(O),[O]),K=()=>typeof a=="string"?E(a):a?new a:null,[R,C]=l.useState(K());function G(ye){C(Te=>({...Te,...ye})),D()}l.useImperativeHandle(M,()=>({forceUpdate:D,props:{formStyle:e,autosave:r,showLoading:s,showCancel:n,type:a,panelClass:o,formClass:i,headingClass:c,subHeadingClass:d,buttonsClass:h,heading:g,subHeading:m,configureField:p,configureFormLayout:y,onSave:A,onError:v,onDone:L},setModel:G,formFields:j,model:R}));const[Z,Ne]=l.useState(),[me,Le]=l.useState();function te(ye,Te){Ne(ye),Le(()=>Te)}async function be(ye){me&&me(ye),Ne(void 0),Le(void 0)}const xe={openModal:te},Ce=l.useMemo(()=>o||ze.panelClass(e),[o,e]),V=l.useMemo(()=>i||ze.formClass(e),[i,e]),Q=l.useMemo(()=>c||ze.headingClass(e),[c,e]),de=l.useMemo(()=>d||ze.subHeadingClass(e),[d,e]),J=l.useMemo(()=>h||ze.buttonsClass,[h]),H=l.useMemo(()=>$.model(B),[B]),f=l.useMemo(()=>g||U(O)?.description||(H?`New ${u.humanize(H)}`:u.humanize(O)),[g,O,H]),[T,F]=l.useState(new u.ApiResult),ae=Ct(),se=l.useMemo(()=>ae.loading.current,[ae.loading.current]);l.useEffect(()=>{z.interceptors.has("AutoCreateForm.new")&&z.interceptors.invoke("AutoCreateForm.new",{props:{formStyle:e,autosave:r,showLoading:s,showCancel:n,type:a,panelClass:o,formClass:i,headingClass:c,subHeadingClass:d,buttonsClass:h,heading:g,subHeading:m,configureField:p,configureFormLayout:y,onSave:A,onError:v,onDone:L},model:R})},[]);async function oe(ye){ye.preventDefault();let Te=ye.target;if(!r){A?.(new R.constructor(W(Te,x(B))));return}let Ge=u.map(R?.getMethod,Be=>typeof Be=="function"?Be():null)||"POST",Pe=u.map(R?.createResponse,Be=>typeof Be=="function"?Be():null)==null,ge;if(u.HttpMethods.hasRequestBody(Ge)){let Be=new R.constructor,He=new FormData(Te);Pe?ge=await ae.apiFormVoid(Be,He,{jsconfig:"eccn"}):ge=await ae.apiForm(Be,He,{jsconfig:"eccn"})}else{let Be=W(Te,x(B)),He=new R.constructor(Be);Pe?ge=await ae.apiVoid(He,{jsconfig:"eccn"}):ge=await ae.api(He,{jsconfig:"eccn"})}F(ge),ge.succeeded?(Te.reset(),A?.(ge.response)):v?.(ge.error)}function Ee(ye){}function Fe(){L?.()}const[he,ue]=l.useState(!1),[re,Se]=l.useState(""),je={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};l.useEffect(()=>{if(Nt(je,Se,he),!he){const ye=setTimeout(Fe,700);return()=>clearTimeout(ye)}},[he]),l.useEffect(()=>{ue(!0)},[]);function Ae(){e=="slideOver"?ue(!1):Fe()}return l.useEffect(()=>{const ye=Te=>{Te.key==="Escape"&&Ae()};return window.addEventListener("keydown",ye),()=>window.removeEventListener("keydown",ye)},[]),B?e=="card"?t.jsxs(Da.Provider,{value:xe,children:[t.jsx("div",{className:Ce,children:t.jsxs("form",{onSubmit:oe,children:[t.jsxs("div",{className:V,children:[t.jsxs("div",{children:[k||t.jsx("h3",{className:Q,children:f}),w||m&&t.jsx("p",{className:de,children:m}),!w&&!m&&B?.notes&&t.jsx("p",{className:`notes ${de}`,dangerouslySetInnerHTML:{__html:B.notes}})]}),b,t.jsx(wt,{ref:j,value:R,onChange:Ee,api:T,configureField:p,configureFormLayout:y},S),N]}),t.jsxs("div",{className:J,children:[t.jsx("div",{children:s&&se&&t.jsx(Lt,{})}),t.jsxs("div",{className:"flex justify-end",children:[n&&t.jsx(dt,{onClick:Ae,disabled:se,children:"Cancel"}),t.jsx(ct,{type:"submit",className:"ml-4",disabled:se,children:"Save"})]})]})]})}),Z?.name=="ModalLookup"&&Z.ref&&t.jsx(St,{refInfo:Z.ref,onDone:be,configureField:p})]}):t.jsxs(Da.Provider,{value:xe,children:[t.jsxs("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:Ae,className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:ye=>ye.stopPropagation(),className:"pointer-events-none fixed inset-y-0 right-0 flex pl-10",children:t.jsx("div",{className:`pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg ${re}`,children:t.jsxs("form",{className:V,onSubmit:oe,children:[t.jsx("div",{className:"flex min-h-0 flex-1 flex-col overflow-auto",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between space-x-3",children:[t.jsxs("div",{className:"space-y-1",children:[k||t.jsx("h3",{className:Q,children:f}),w||m&&t.jsx("p",{className:de,children:m}),!w&&!m&&B?.notes&&t.jsx("p",{className:`notes ${de}`,dangerouslySetInnerHTML:{__html:B.notes}})]}),t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Qt,{buttonClass:"bg-gray-50 dark:bg-gray-900",onClose:Ae})})]})}),b,t.jsx(wt,{ref:j,value:R,onChange:Ee,api:T,configureField:p,configureFormLayout:y},S),N]})}),t.jsxs("div",{className:J,children:[t.jsx("div",{children:s&&se&&t.jsx(Lt,{})}),t.jsxs("div",{className:"flex justify-end",children:[n&&t.jsx(dt,{onClick:Ae,disabled:se,children:"Cancel"}),t.jsx(ct,{type:"submit",className:"ml-4",disabled:se,children:"Save"})]})]})]})})})})})]}),Z?.name=="ModalLookup"&&Z.ref&&t.jsx(St,{refInfo:Z.ref,onDone:be,configureField:p})]}):t.jsx("div",{children:t.jsxs("p",{className:"text-red-700",children:["Could not create form for unknown ",t.jsx("b",{children:"type"})," ",O]})})});l.createContext(null);const Qs=e=>typeof e=="string"?e.split(","):e||[];function St({id:e="ModalLookup",refInfo:r,skip:s=0,prefs:n,selectedColumns:a,allowFiltering:o=!0,showPreferences:i=!0,showPagingNav:c=!0,showPagingInfo:d=!0,showResetPreferences:h=!0,showFiltersView:g=!0,toolbarButtonClass:m,canFilter:p,modelTitle:y,newButtonLabel:A,configureField:v,onDone:L}){const{config:k}=bt(),{metadataApi:w,filterDefinitions:b}=Xe(),N=Ct(),M=k.storage,j=l.useMemo(()=>m??ce.toolbarButtonClass,[m]),S=l.useMemo(()=>b,[b]),Y=25,[D,U]=l.useState({take:Y}),[x,$]=l.useState(new u.ApiResult),[E,W]=l.useState(s),[O,B]=l.useState(!1),[K,R]=l.useState(),[C,G]=l.useState(!1),[Z,Ne]=l.useState(),[me,Le]=l.useState(!1),[te,be]=l.useState([]),xe=l.useRef(null);function Ce(_,ee){return ce.getTableRowClass("fullWidth",ee,!1,!0)}function V(){let _=Qs(a);return _.length>0?_:[]}const Q=l.useMemo(()=>nt(r.model),[r.model]),de=l.useMemo(()=>{let ee=V().map(ve=>ve.toLowerCase());const we=et(Q);return ee.length>0?ee.map(ve=>we.find(Ue=>Ue.name.toLowerCase()===ve)).filter(ve=>ve!=null):we},[Q,a]),J=l.useMemo(()=>{let _=de.map(we=>we.name),ee=Qs(D.selectedColumns).map(we=>we.toLowerCase());return ee.length>0?_.filter(we=>ee.includes(we.toLowerCase())):_},[de,D.selectedColumns]),H=l.useMemo(()=>D.take??Y,[D.take]),f=l.useMemo(()=>(x.response?u.mapGet(x.response,"results"):null)??[],[x.response]),T=l.useMemo(()=>x.response?.total??f.length??0,[x.response,f]),F=l.useMemo(()=>E>0,[E]),ae=l.useMemo(()=>E>0,[E]),se=l.useMemo(()=>f.length>=H,[f.length,H]),oe=l.useMemo(()=>f.length>=H,[f.length,H]),Ee=l.useMemo(()=>te.some(_=>_.settings.filters.length>0||!!_.settings.sort),[te]),Fe=l.useMemo(()=>te.map(_=>_.settings.filters.length).reduce((_,ee)=>_+ee,0),[te]),he=l.useMemo(()=>jt(Q),[Q]),ue=l.useMemo(()=>w?.operations.find(_=>_.dataModel?.name==r.model&&_e.isAnyQuery(_)),[w,r.model]),re=l.useMemo(()=>kt(r.model),[r.model]),Se=l.useMemo(()=>At.forType(re,w),[re,w]),je=l.useMemo(()=>re||ue?.dataModel.name,[re,ue]),Ae=l.useMemo(()=>y||je,[y,je]),ye=l.useMemo(()=>A||`New ${Ae}`,[A,Ae]),Te=l.useMemo(()=>$r(Se.Create),[Se.Create]),Ge=()=>`${e}/ApiPrefs/${r.model}`,Pe=_=>`Column/${e}:${r.model}.${_}`;async function ge(_){let ee=E+_;ee<0&&(ee=0);const we=Math.floor(T/H)*H;ee>we&&(ee=we),W(ee),await Qe()}async function Be(_,ee){L?.(_)}function He(){L?.(null)}function ut(_,ee){let we=ee.target;if(we?.tagName!=="TD"){let ve=we?.closest("TABLE")?.getBoundingClientRect(),Ue=te.find(ft=>ft.name.toLowerCase()==_.toLowerCase());if(Ue&&ve){let ft=318,rt=(ee.target?.tagName==="DIV"?ee.target:ee.target?.closest("DIV")).getBoundingClientRect(),Ke=ft+25;Ne({column:Ue,topLeft:{x:Math.max(Math.floor(rt.x+25),Ke),y:Math.floor(115)}})}}}function tt(){Ne(null)}async function pe(_){let ee=Z?.column;ee&&(ee.settings=_,M.setItem(Pe(ee.name),JSON.stringify(ee.settings)),await Qe()),Ne(null)}async function ne(_){M.setItem(Pe(_.name),JSON.stringify(_.settings)),await Qe()}async function De(_){G(!1),U(_),M.setItem(Ge(),JSON.stringify(_)),await Qe()}async function Qe(){await Oe(ke())}async function Oe(_){const ee=ue;if(!ee){console.error(`No Query API was found for ${r.model}`);return}let we=Xt(ee,_),ve=u.delaySet(ft=>{$(new u.ApiResult),B(ft)}),Ue=await N.api(we);ve(),$(Ue)}function ke(){let _={include:"total",take:H},ee=Qs(D.selectedColumns||a);if(ee.length>0){let ve=he;ve&&ee.includes(ve.name)&&(ee=[ve.name,...ee]),_.fields=ee.join(",")}let we=[];return te.forEach(ve=>{ve.settings.sort&&we.push((ve.settings.sort==="DESC"?"-":"")+ve.name),ve.settings.filters.forEach(Ue=>{let ft=Ue.key.replace("%",ve.name);_[ft]=Ue.value})}),typeof _.skip>"u"&&E>0&&(_.skip=E),we.length>0&&(_.orderBy=we.join(",")),_}async function $e(){te.forEach(_=>{_.settings={filters:[]},M.removeItem(Pe(_.name))}),await Qe()}function Ie(){Le(!0)}function Ye(){Le(!1)}async function Re(_){Ye(),L?.(_)}return l.useEffect(()=>{const _=n||Ar(M.getItem(Ge()));_&&U(_);const ee=de.map(we=>({name:we.name,type:we.type,meta:we,settings:Object.assign({filters:[]},Ar(M.getItem(Pe(we.name))))}));be(ee),isNaN(s)||W(s),Qe()},[]),t.jsxs(Ws,{id:e,onDone:He,children:[t.jsxs("div",{className:"pt-2 overflow-auto",style:{minHeight:"620px"},children:[t.jsxs("div",{className:"mt-3 pl-5 flex flex-wrap items-center",children:[t.jsxs("h3",{className:"hidden sm:block text-xl leading-6 font-medium text-gray-900 dark:text-gray-50 mr-3",children:["Select ",t.jsx("span",{className:"hidden md:inline",children:u.humanize(r.model)})]}),t.jsxs("div",{className:"flex pb-1 sm:pb-0",children:[i&&t.jsx("button",{type:"button",className:"pl-2 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400",title:`${r.model} Preferences`,onClick:()=>G(!C),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("g",{strokeWidth:"1.5",fill:"none",children:t.jsx("path",{d:"M9 3H3.6a.6.6 0 0 0-.6.6v16.8a.6.6 0 0 0 .6.6H9M9 3v18M9 3h6M9 21h6m0-18h5.4a.6.6 0 0 1 .6.6v16.8a.6.6 0 0 1-.6.6H15m0-18v18",stroke:"currentColor"})})})}),c&&t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",className:`pl-2 ${F?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"First page",disabled:!F,onClick:()=>ge(-T),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6l6 6zM6 6h2v12H6z",fill:"currentColor"})})}),t.jsx("button",{type:"button",className:`pl-2 ${ae?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"Previous page",disabled:!ae,onClick:()=>ge(-H),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M15.41 7.41L14 6l-6 6l6 6l1.41-1.41L10.83 12z",fill:"currentColor"})})}),t.jsx("button",{type:"button",className:`pl-2 ${se?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"Next page",disabled:!se,onClick:()=>ge(H),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z",fill:"currentColor"})})}),t.jsx("button",{type:"button",className:`pl-2 ${oe?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"Last page",disabled:!oe,onClick:()=>ge(T),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6l-6-6zM16 6h2v12h-2z",fill:"currentColor"})})})]})]}),t.jsx("div",{className:"flex pb-1 sm:pb-0",children:d&&t.jsxs("div",{className:"px-4 text-lg text-black dark:text-white",children:[O&&t.jsx("span",{children:"Querying..."}),f.length>0&&t.jsxs("span",{children:[t.jsx("span",{className:"hidden xl:inline",children:"Showing Results "}),E+1," - ",Math.min(E+f.length,T)," ",t.jsxs("span",{children:[" of ",T]})]}),!O&&x.completed&&f.length===0&&t.jsx("span",{children:"No Results"})]})}),Se.Create&&Te&&t.jsxs("div",{className:"pl-2 mt-1",children:[t.jsxs("button",{type:"button",onClick:Ie,title:Ae,className:j,children:[t.jsx("svg",{className:"w-5 h-5 mr-1 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"})}),t.jsx("span",{className:"whitespace-nowrap",children:ye})]}),me&&t.jsx(_s,{ref:xe,type:Se.Create.request.name,configureField:v,onDone:Ye,onSave:Re})]}),Ee&&h&&t.jsx("div",{className:"pl-2",children:t.jsx("button",{type:"button",onClick:$e,title:"Reset Preferences & Filters",className:j,children:t.jsx("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",d:"M6.78 2.72a.75.75 0 0 1 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75a.75.75 0 0 1 1.5 0a6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0Z"})})})}),t.jsx("div",{className:"flex pb-1 sm:pb-0",children:g&&Fe>0&&t.jsx("div",{className:"pl-2",children:t.jsxs("button",{type:"button",onClick:()=>R(K=="filters"?null:"filters"),className:j,"aria-expanded":"false",children:[t.jsx("svg",{className:"flex-none w-5 h-5 mr-2 text-gray-400 dark:text-gray-500 group-hover:text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),t.jsxs("span",{className:"mr-1",children:[Fe," ",Fe==1?"Filter":"Filters"]}),K!="filters"?t.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}):t.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})})]})})})]}),K=="filters"&&t.jsx(Ps,{className:"border-y border-gray-200 dark:border-gray-800 py-8 my-2",definitions:S,columns:te,onDone:()=>R(null),onChange:ne}),Z&&t.jsx(zs,{definitions:S,column:Z.column,topLeft:Z.topLeft,onDone:tt,onSave:pe}),t.jsx(tr,{status:x.error}),O?t.jsx(Cs,{}):t.jsx("div",{children:f.length>0&&t.jsx(Hs,{id:e,items:f,type:r.model,selectedColumns:J,tableStyle:"fullWidth",rowClass:Ce,onRowSelected:Be,onHeaderSelected:ut,children:(_,ee)=>o&&(!p||p(_))?t.jsxs("div",{className:"cursor-pointer flex justify-between items-center hover:text-gray-900 dark:hover:text-gray-50",children:[t.jsx("span",{className:"mr-1 select-none",children:ee}),t.jsx(Bs,{column:te.find(we=>we.name.toLowerCase()===_.toLowerCase()),isOpen:Z?.column.name===_})]}):t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("span",{className:"mr-1 select-none",children:ee})})})})]}),C&&t.jsx(Ks,{columns:de,prefs:D,onDone:()=>G(!1),onSave:De})]})}const $a=l.createContext(null);function Ws({id:e="ModalDialog",modalClass:r=ks.modalClass,sizeClass:s=ks.sizeClass,closeButtonClass:n="bg-white dark:bg-black cursor-pointer rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black",configureField:a,children:o,closeButton:i,bottom:c,onDone:d}){const[h,g]=l.useState(!1),[m,p]=l.useState(""),[y,A]=l.useState(""),[v,L]=l.useState(),[k,w]=l.useState(),b={entering:{cls:"ease-out duration-300",from:"opacity-0",to:"opacity-100"},leaving:{cls:"ease-in duration-200",from:"opacity-100",to:"opacity-0"}},N={entering:{cls:"ease-out duration-300",from:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",to:"opacity-100 translate-y-0 sm:scale-100"},leaving:{cls:"ease-in duration-200",from:"opacity-100 translate-y-0 sm:scale-100",to:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};l.useEffect(()=>{g(!0)},[]),l.useEffect(()=>{if(Nt(b,p,h),Nt(N,A,h),!h){const D=setTimeout(()=>d?.(),200);return()=>clearTimeout(D)}},[h,d]);const M=()=>g(!1);function j(D,U){L(D),w(()=>U)}async function S(D){k&&k(D),L(void 0),w(void 0)}const Y={openModal:j};return l.useEffect(()=>{const D=U=>{U.key==="Escape"&&M()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[]),t.jsx($a.Provider,{value:Y,children:t.jsxs("div",{id:e,"data-transition-for":e,onMouseDown:M,className:"relative z-10","aria-labelledby":`${e}-title`,role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:`fixed inset-0 bg-gray-500/75 transition-opacity ${m}`}),t.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[t.jsx("div",{className:`${r} ${s} ${y}`,onMouseDown:D=>D.stopPropagation(),children:t.jsxs("div",{children:[i||t.jsx("div",{className:"hidden sm:block absolute top-0 right-0 pt-4 pr-4 z-10",children:t.jsxs("button",{type:"button",onClick:M,className:n,title:"Close",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),o]})}),c]})}),v?.name=="ModalLookup"&&v.ref&&t.jsx(St,{refInfo:v.ref,onDone:S,configureField:a})]})})}function Ks({id:e="QueryPrefs",columns:r,prefs:s,maxLimit:n,onDone:a,onSave:o}){const{autoQueryGridDefaults:i}=bt(),[c,d]=l.useState({}),h=[10,25,50,100,250,500,1e3];l.useEffect(()=>{d(Object.assign({take:i.take,selectedColumns:[]},s))},[s,i.take]);function g(){a?.()}function m(){o?.(c)}const p=v=>{d(L=>({...L,take:parseInt(v.target.value)}))},y=(v,L)=>{d(k=>({...k,selectedColumns:L?[...k.selectedColumns||[],v]:(k.selectedColumns||[]).filter(w=>w!==v)}))},A=()=>{d(v=>({...v,selectedColumns:[]}))};return t.jsxs(Ws,{id:e,onDone:g,sizeClass:"w-full sm:max-w-prose",children:[t.jsx("div",{className:"bg-white dark:bg-black px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:t.jsx("div",{className:"",children:t.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:mx-4 sm:text-left",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:"Query Preferences"}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{htmlFor:`${e}-take`,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Results per page"}),t.jsx("select",{id:`${e}-take`,value:c.take,onChange:p,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-white dark:bg-black border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:h.filter(v=>n==null||v<=n).map(v=>t.jsx("option",{value:v,children:v},v))})]}),t.jsxs("div",{className:"mt-4 flex items-center py-4 border-b border-gray-200 dark:border-gray-800",children:[t.jsx("input",{type:"radio",id:`${e}-allColumns`,onClick:A,checked:(c.selectedColumns?.length||0)===0,onChange:()=>{},className:"focus:ring-indigo-500 h-4 w-4 bg-white dark:bg-black text-indigo-600 dark:text-indigo-400 border-gray-300 dark:border-gray-700"}),t.jsx("label",{className:"ml-3 block text-gray-700 dark:text-gray-300",htmlFor:`${e}-allColumns`,children:"View all columns"})]}),t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:"pb-2 px-4",children:t.jsx("div",{className:"",children:r.map(v=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:v.name,value:v.name,checked:c.selectedColumns?.includes(v.name)||!1,onChange:L=>y(v.name,L.target.checked),className:"h-4 w-4 bg-white dark:bg-black border-gray-300 dark:border-gray-700 rounded text-indigo-600 dark:text-indigo-400 focus:ring-indigo-500"}),t.jsx("label",{htmlFor:v.name,className:"ml-3",children:v.name})]},v.name))})})})]})})}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[t.jsx(ct,{onClick:m,color:"red",className:"ml-2",children:"Save"}),t.jsx(dt,{onClick:g,children:"Cancel"})]})]})}function Ur({onDelete:e,children:r,...s}){const[n,a]=l.useState(!1),o=()=>{n&&e?.()},i=l.useMemo(()=>`select-none inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white ${n?"cursor-pointer bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500":"bg-red-400"}`,[n]);return t.jsxs(t.Fragment,{children:[t.jsx("input",{id:"confirmDelete",type:"checkbox",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:ring-offset-black",checked:n,onChange:c=>a(c.target.checked)}),t.jsx("label",{htmlFor:"confirmDelete",className:"ml-2 mr-2 select-none",children:"confirm"}),t.jsx("span",{onClick:o,className:i,...s,children:r||"Delete"})]})}const Ia=l.createContext(null),Oa=l.forwardRef(({formStyle:e="slideOver",autosave:r=!0,showLoading:s=!0,showCancel:n,type:a,value:o,panelClass:i,formClass:c,headingClass:d,subHeadingClass:h,buttonsClass:g,heading:m,subHeading:p,configureField:y,configureFormLayout:A,deleteType:v,onSave:L,onDelete:k,onError:w,onDone:b,headingSlot:N,subheadingSlot:M,headerSlot:j,footerSlot:S},Y)=>{const D=l.useRef(),[U,x]=l.useState(1),{typeOf:$,apiOf:E,typeProperties:W,createFormLayout:O,getPrimaryKey:B,Crud:K,createDto:R,formValues:C}=Xe(),G=l.useMemo(()=>kt(a),[a]),Z=l.useMemo(()=>$(G),[G]),Ne=()=>typeof a=="string"?R(a,vr(o)):a?new a(vr(o)):null,[me,Le]=l.useState(Ne());function te(){x(ne=>ne+1),Le(Ne())}function be(ne){Le(De=>({...De,...ne}))}l.useImperativeHandle(Y,()=>({forceUpdate:te,props:{formStyle:e,autosave:r,showLoading:s,showCancel:n,type:a,modelValue:o,panelClass:i,formClass:c,headingClass:d,subHeadingClass:h,buttonsClass:g,heading:m,subHeading:p,configureField:y,configureFormLayout:A,deleteType:v,onSave:L,onDelete:k,onError:w,onDone:b},setModel:be,formFields:D,model:me}));const[xe,Ce]=l.useState(),[V,Q]=l.useState();function de(ne,De){Ce(ne),Q(()=>De)}async function J(ne){V&&V(ne),Ce(void 0),Q(void 0)}const H={openModal:de},f=l.useMemo(()=>i||ze.panelClass(e),[i,e]),T=l.useMemo(()=>c||ze.formClass(e),[c,e]),F=l.useMemo(()=>d||ze.headingClass(e),[d,e]),ae=l.useMemo(()=>h||ze.subHeadingClass(e),[h,e]),se=l.useMemo(()=>g||ze.buttonsClass,[g]),oe=l.useMemo(()=>K.model(Z),[Z]),Ee=l.useMemo(()=>m||$(G)?.description||(oe?`Update ${u.humanize(oe)}`:u.humanize(G)),[m,G,oe]),[Fe,he]=l.useState(new u.ApiResult),ue=l.useRef(Object.assign({},vr(o)));l.useEffect(()=>{z.interceptors.has("AutoEditForm.new")&&z.interceptors.invoke("AutoEditForm.new",{props:{formStyle:e,autosave:r,showLoading:s,showCancel:n,type:a,modelValue:o,panelClass:i,formClass:c,headingClass:d,subHeadingClass:h,buttonsClass:g,heading:m,subHeading:p,configureField:y,configureFormLayout:A,deleteType:v,onSave:L,onDelete:k,onError:w,onDone:b},model:me,origModel:ue.current})},[]);const re=Ct(),Se=l.useMemo(()=>re.loading.current,[re.loading.current]),je=()=>u.map($(K.model(Z)),ne=>B(ne));function Ae(ne){const{op:De,prop:Qe}=ne;De&&(K.isPatch(De)||K.isUpdate(De))&&(ne.disabled=Qe?.isPrimaryKey),y&&y(ne)}function ye(ne){}async function Te(ne){ne.preventDefault();let De=ne.target;if(!r){L?.(new me.constructor(C(De,W(Z))));return}let Qe=u.map(me?.getMethod,Ie=>typeof Ie=="function"?Ie():null)||"POST",Oe=u.map(me?.createResponse,Ie=>typeof Ie=="function"?Ie():null)==null,ke=je(),$e;if(u.HttpMethods.hasRequestBody(Qe)){let Ie=new me.constructor,Ye=u.mapGet(o,ke.name),Re=new FormData(De);ke&&!Array.from(Re.keys()).some(ve=>ve.toLowerCase()==ke.name.toLowerCase())&&Re.append(ke.name,Ye);let _=[];const ee=G&&E(G);if(ee&&K.isPatch(ee)){let ve=O(Z),Ue={};if(ke&&(Ue[ke.name]=Ye),ve.forEach(We=>{let rt=We.id,Ke=u.mapGet(ue.current,rt);if(ke&&ke.name.toLowerCase()===rt.toLowerCase())return;let lt=Re.get(rt);z.interceptors.has("AutoEditForm.save.formLayout")&&z.interceptors.invoke("AutoEditForm.save.formLayout",{origValue:Ke,formLayout:ve,input:We,newValue:lt});let Wt=lt!=null,lr=We.type==="checkbox"?Wt!==!!Ke:We.type==="file"?Wt:lt!=Ke;!lt&&!Ke&&(lr=!1),lr&&(lt?Ue[rt]=lt:We.type!=="file"&&_.push(rt))}),z.interceptors.has("AutoEditForm.save")&&z.interceptors.invoke("AutoEditForm.save",{origModel:ue.current,formLayout:ve,dirtyValues:Ue}),Array.from(Re.keys()).filter(We=>!Ue[We]).forEach(We=>Re.delete(We)),Array.from(Re.keys()).filter(We=>We.toLowerCase()!=ke.name.toLowerCase()).length==0&&_.length==0){pe();return}}const we=_.length>0?{jsconfig:"eccn",reset:_}:{jsconfig:"eccn"};Oe?$e=await re.apiFormVoid(Ie,Re,we):$e=await re.apiForm(Ie,Re,we)}else{let Ie=C(De,W(Z));ke&&!u.mapGet(Ie,ke.name)&&(Ie[ke.name]=u.mapGet(o,ke.name));let Ye=new me.constructor(Ie);Oe?$e=await re.apiVoid(Ye,{jsconfig:"eccn"}):$e=await re.api(Ye,{jsconfig:"eccn"})}he($e),$e.succeeded?(De.reset(),L?.($e.response)):w?.($e.error)}async function Ge(){let ne=je();const De=ne?u.mapGet(o,ne.name):null;if(!De){console.error(`Could not find Primary Key for Type ${G} (${oe})`);return}const Qe={[ne.name]:De},Oe=typeof v=="string"?R(v,Qe):v?new v(Qe):null;let ke=u.map(Oe.createResponse,Ie=>typeof Ie=="function"?Ie():null)==null,$e;ke?$e=await re.apiVoid(Oe):$e=await re.api(Oe),he($e),$e.succeeded?k?.($e.response):w?.($e.error)}function Pe(){b?.()}const[ge,Be]=l.useState(!1),[He,ut]=l.useState(""),tt={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};l.useEffect(()=>{if(Nt(tt,ut,ge),!ge){const ne=setTimeout(Pe,700);return()=>clearTimeout(ne)}},[ge]),l.useEffect(()=>{Be(!0)},[]);function pe(){e=="slideOver"?Be(!1):Pe()}return l.useEffect(()=>{const ne=De=>{De.key==="Escape"&&pe()};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[]),Z?e=="card"?t.jsxs(Ia.Provider,{value:H,children:[t.jsx("div",{className:f,children:t.jsxs("form",{onSubmit:Te,children:[t.jsxs("div",{className:T,children:[t.jsxs("div",{children:[N||t.jsx("h3",{className:F,children:Ee}),M||p&&t.jsx("p",{className:ae,children:p}),!M&&!p&&Z?.notes&&t.jsx("p",{className:`notes ${ae}`,dangerouslySetInnerHTML:{__html:Z.notes}})]}),j,t.jsx(wt,{ref:D,value:me,onChange:ye,api:Fe,configureField:Ae,configureFormLayout:A},U),S]}),t.jsxs("div",{className:se,children:[t.jsx("div",{children:v&&t.jsx(Ur,{onDelete:Ge})}),t.jsx("div",{children:s&&Se&&t.jsx(Lt,{})}),t.jsxs("div",{className:"flex justify-end",children:[n&&t.jsx(dt,{onClick:pe,disabled:Se,children:"Cancel"}),t.jsx(ct,{type:"submit",className:"ml-4",disabled:Se,children:"Save"})]})]})]})}),xe?.name=="ModalLookup"&&xe.ref&&t.jsx(St,{refInfo:xe.ref,onDone:J,configureField:y})]}):t.jsxs(Ia.Provider,{value:H,children:[t.jsxs("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:pe,className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:ne=>ne.stopPropagation(),className:"pointer-events-none fixed inset-y-0 right-0 flex pl-10",children:t.jsx("div",{className:`pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg ${He}`,children:t.jsxs("form",{className:T,onSubmit:Te,children:[t.jsx("div",{className:"flex min-h-0 flex-1 flex-col overflow-auto",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between space-x-3",children:[t.jsxs("div",{className:"space-y-1",children:[N||t.jsx("h3",{className:F,children:Ee}),M||p&&t.jsx("p",{className:ae,children:p}),!M&&!p&&Z?.notes&&t.jsx("p",{className:`notes ${ae}`,dangerouslySetInnerHTML:{__html:Z.notes}})]}),t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Qt,{buttonClass:"bg-gray-50 dark:bg-gray-900",onClose:pe})})]})}),j,t.jsx(wt,{ref:D,value:me,onChange:ye,api:Fe,configureField:Ae,configureFormLayout:A},U),S]})}),t.jsxs("div",{className:se,children:[t.jsx("div",{children:v&&t.jsx(Ur,{onDelete:Ge})}),t.jsx("div",{children:s&&Se&&t.jsx(Lt,{})}),t.jsxs("div",{className:"flex justify-end",children:[n&&t.jsx(dt,{onClick:pe,disabled:Se,children:"Cancel"}),t.jsx(ct,{type:"submit",className:"ml-4",disabled:Se,children:"Save"})]})]})]})})})})})]}),xe?.name=="ModalLookup"&&xe.ref&&t.jsx(St,{refInfo:xe.ref,onDone:J,configureField:y})]}):t.jsx("div",{children:t.jsxs("p",{className:"text-red-700",children:["Could not create form for unknown ",t.jsx("b",{children:"type"})," ",G]})})});function qr({value:e,fieldAttrs:r,depth:s=0,classes:n=(a,o,i,c,d)=>c}){const a=l.useMemo(()=>Tt(e),[e]),o=l.useMemo(()=>Array.isArray(e),[e]),i=g=>u.humanify(g),c=g=>r?r(g):null,d=l.useMemo(()=>u.uniqueKeys(e),[e]),h=g=>g?Object.keys(g).map(m=>({key:i(m),val:g[m]})):[];return a?t.jsx("div",{className:s==0?"prose html-format":"",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:Nr(e)}})}):o?t.jsx("div",{className:s==0?"prose html-format":"",children:t.jsx("div",{className:n("array","div",s,ce.gridClass),children:Tt(e[0])?t.jsxs("div",{children:["[ ",e.join(", ")," ]"]}):t.jsx("div",{className:n("array","div",s,ce.grid2Class),children:t.jsx("div",{className:n("array","div",s,ce.grid3Class),children:t.jsx("div",{className:n("array","div",s,ce.grid4Class),children:t.jsxs("table",{className:n("object","table",s,ce.tableClass),children:[t.jsx("thead",{className:n("array","thead",s,ce.theadClass),children:t.jsx("tr",{children:d.map(g=>t.jsxs("th",{className:n("array","th",s,ce.theadCellClass+" whitespace-nowrap"),children:[t.jsx("b",{}),i(g)]},g))})}),t.jsx("tbody",{children:e.map((g,m)=>t.jsx("tr",{className:n("array","tr",s,m%2==0?"bg-white":"bg-gray-50",m),children:d.map(p=>t.jsx("td",{className:n("array","td",s,ce.tableCellClass),children:t.jsx(qr,{value:g[p],fieldAttrs:r,depth:s+1,classes:n,...c(p)})},p))},m))})]})})})})})}):t.jsx("div",{className:s==0?"prose html-format":"",children:t.jsx("table",{className:n("object","table",s,"table-object"),children:t.jsx("tbody",{children:h(e).map(g=>t.jsxs("tr",{className:n("object","tr",s,""),children:[t.jsx("th",{className:n("object","th",s,"align-top py-2 px-4 text-left text-sm font-medium tracking-wider whitespace-nowrap"),children:g.key}),t.jsx("td",{className:n("object","td",s,"align-top py-2 px-4 text-sm"),children:t.jsx(qr,{value:g.val,fieldAttrs:r,depth:s+1,classes:n,...c(g.key)})})]},g.key))})})})}function Gs({value:e,imageClass:r="w-8 h-8"}){const{getMimeType:s}=fn(),{type:n}=l.useMemo(()=>{const a=e;let o=typeof e;const i=o==="string"&&a.length?s(a):null;if(o==="string"&&a.length){const c=a.startsWith("https://")||a.startsWith("http://");(c||a[0]==="/")&&i?.startsWith("image/")?o="image":c&&(o="link")}return{type:o,mimeType:i}},[e,s]);return n==="link"?t.jsx("a",{href:e,className:"text-indigo-600",children:e}):n==="image"?t.jsx("a",{href:e,title:e,className:"inline-block",children:t.jsx(Ht,{src:e,className:r})}):t.jsx(qr,{value:e})}function Zs({value:e}){const{basic:r,complex:s}=l.useMemo(()=>{const n=Object.keys(e),a={},o={};return n.forEach(i=>{const c=e[i],d=typeof c;c==null||d==="function"||d==="symbol"?a[i]=`(${c==null?"null":d})`:d==="object"?o[i]=c:a[i]=c}),{basic:a,complex:o}},[e]);return t.jsx("table",{className:"my-2 w-full",children:t.jsxs("tbody",{children:[Object.entries(r).map(([n,a])=>t.jsxs("tr",{className:"leading-7",children:[t.jsx("th",{className:"px-2 text-left align-top",children:u.humanize(n)}),t.jsx("td",{className:"align-top",children:t.jsx(Gs,{value:a})})]},n)),Object.entries(s).map(([n,a])=>t.jsxs(l.Fragment,{children:[t.jsx("tr",{className:"my-2 leading-7",children:t.jsx("td",{colSpan:2,className:"px-2 bg-indigo-700 text-white",children:u.humanize(n)})}),t.jsx("tr",{className:"leading-7",children:t.jsx("td",{colSpan:2,className:"px-2 align-top",children:t.jsx(Gs,{value:a})})})]},n))]})})}function Fa({formStyle:e="slideOver",typeName:r,apis:s,model:n,heading:a,subHeading:o,panelClass:i,formClass:c,headingClass:d,subHeadingClass:h,deleteType:g,showLoading:m,onDone:p,onDelete:y,onError:A,headingSlot:v,subheadingSlot:L}){const{typeOf:k,getPrimaryKey:w,createDto:b}=Xe(),N=l.useMemo(()=>r??s.dataModel.name,[r,s]),M=l.useMemo(()=>k(N),[N]),j=l.useMemo(()=>i||ze.panelClass(e),[i,e]),S=l.useMemo(()=>c||ze.formClass(e),[c,e]),Y=l.useMemo(()=>d||ze.headingClass(e),[d,e]),D=l.useMemo(()=>h||ze.subHeadingClass(e),[h,e]),U=l.useMemo(()=>a||k(N)?.description||(n?.id?`${u.humanize(N)} ${n.id}`:"View "+u.humanize(N)),[a,N,n]),[x,$]=l.useState(new u.ApiResult);l.useEffect(()=>{z.interceptors.has("AutoViewForm.new")&&z.interceptors.invoke("AutoViewForm.new",{props:{formStyle:e,typeName:r,apis:s,model:n,heading:a,subHeading:o,panelClass:i,formClass:c,headingClass:d,subHeadingClass:h,deleteType:g,showLoading:m,onDone:p,onDelete:y,onError:A}})},[]);const E=Ct(),W=l.useMemo(()=>E.loading.current,[E.loading.current]),O=()=>u.map(M,te=>w(te)),B=l.useMemo(()=>M,[M]);async function K(){let te=O();const be=te?u.mapGet(n,te.name):null;if(!be){console.error(`Could not find Primary Key for Type ${N} (${B})`);return}const xe={[te.name]:be},Ce=typeof g=="string"?b(g,xe):g?new g(xe):null;let V=u.map(Ce.createResponse,de=>typeof de=="function"?de():null)==null,Q;V?Q=await E.apiVoid(Ce):Q=await E.api(Ce),$(Q),Q.succeeded?y?.(Q.response):A?.(Q.error)}function R(){p&&p()}const[C,G]=l.useState(!1),[Z,Ne]=l.useState(""),me={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};l.useEffect(()=>{if(Nt(me,Ne,C),!C){const te=setTimeout(R,700);return()=>clearTimeout(te)}},[C]),l.useEffect(()=>{G(!0)},[]);function Le(){e=="slideOver"?G(!1):R()}return l.useEffect(()=>{const te=be=>{be.key==="Escape"&&Le()};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[]),N?e=="card"?t.jsx("div",{className:j,children:t.jsxs("div",{className:S,children:[t.jsxs("div",{children:[v||t.jsx("h3",{className:Y,children:U}),L||o&&t.jsx("p",{className:D,children:o}),!L&&!o&&M?.notes&&t.jsx("p",{className:`notes ${D}`,dangerouslySetInnerHTML:{__html:M.notes}})]}),t.jsx(Zs,{value:n})]})}):t.jsxs("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:Le,className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:te=>te.stopPropagation(),className:"pointer-events-none fixed inset-y-0 right-0 flex pl-10",children:t.jsx("div",{className:`pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg ${Z}`,children:t.jsxs("div",{className:S,children:[t.jsx("div",{className:"flex min-h-0 flex-1 flex-col overflow-auto",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between space-x-3",children:[t.jsxs("div",{className:"space-y-1",children:[v||t.jsx("h3",{className:Y,children:U}),L||o&&t.jsx("p",{className:D,children:o}),!L&&!o&&M?.notes&&t.jsx("p",{className:`notes ${D}`,dangerouslySetInnerHTML:{__html:M.notes}})]}),t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Qt,{buttonClass:"bg-gray-50 dark:bg-gray-900",onClose:Le})})]})}),t.jsx(Zs,{value:n})]})}),t.jsxs("div",{className:ze.buttonsClass,children:[t.jsx("div",{children:g&&t.jsx(Ur,{onDelete:K})}),t.jsx("div",{children:m&&W&&t.jsx(Lt,{})}),t.jsx("div",{className:"flex justify-end"})]})]})})})})})]}):t.jsx("div",{children:t.jsxs("p",{className:"text-red-700",children:["Could not create view for unknown ",t.jsx("b",{children:"type"})," ",N]})})}const ja=l.forwardRef(({filterDefinitions:e,id:r="AutoQueryGrid",apis:s,type:n,prefs:a,deny:o,hide:i,selectedColumns:c,toolbarButtonClass:d,tableStyle:h,gridClass:g,grid2Class:m,grid3Class:p,grid4Class:y,tableClass:A,theadClass:v,tbodyClass:L,theadRowClass:k,theadCellClass:w,headerTitle:b,headerTitles:N,visibleFrom:M,rowClass:j,rowStyle:S,modelTitle:Y,newButtonLabel:D,apiPrefs:U,canFilter:x,disableKeyBindings:$,configureField:E,skip:W=0,create:O,edit:B,filters:K,onHeaderSelected:R,onRowSelected:C,onNav:G,children:Z},Ne)=>{const{config:me,autoQueryGridDefaults:Le}=bt(),te=Le,be=me.storage,xe=Ct(),Ce="filtering,queryString,queryFilters".split(","),V="copyApiUrl,downloadCsv,filtersView,newItem,pagingInfo,pagingNav,preferences,refresh,resetPreferences,toolbar,forms".split(","),Q=l.useMemo(()=>o?$t(Ce,o):$t(Ce,te.deny),[o,te.deny]),de=l.useMemo(()=>i?$t(V,i):$t(V,te.hide),[i,te.hide]);function J(I){return Q[I]}function H(I){return de[I]}const f=l.useMemo(()=>h??te.tableStyle,[h,te.tableStyle]),T=l.useMemo(()=>g??ce.getGridClass(f),[g,f]),F=l.useMemo(()=>m??ce.getGrid2Class(f),[m,f]),ae=l.useMemo(()=>p??ce.getGrid3Class(f),[p,f]),se=l.useMemo(()=>y??ce.getGrid4Class(f),[y,f]),oe=l.useMemo(()=>A??ce.getTableClass(f),[A,f]),Ee=l.useMemo(()=>v??ce.getTheadClass(f),[v,f]),Fe=l.useMemo(()=>k??ce.getTheadRowClass(f),[k,f]),he=l.useMemo(()=>w??ce.getTheadCellClass(f),[w,f]),ue=l.useMemo(()=>L??ce.getTbodyClass(f),[L,f]),re=l.useMemo(()=>d??ce.toolbarButtonClass,[d]);function Se(I,q){if(j)return j(I,q);const ie=!!fe.AnyUpdate,Me=(ir?.name?u.mapGet(I,ir.name):null)==ke;return ce.getTableRowClass(f,q,Me,ie)}const{metadataApi:je,typeOf:Ae,apiOf:ye,filterDefinitions:Te}=Xe(),{invalidAccessMessage:Ge}=Ir(),Pe=l.useMemo(()=>e||Te,[e,Te]),[ge,Be]=l.useState([]),[He,ut]=l.useState(new u.ApiResult),[tt,pe]=l.useState(new u.ApiResult),[ne,De]=l.useState(),[Qe,Oe]=l.useState(!1),[ke,$e]=l.useState(),[Ie,Ye]=l.useState(),[Re,_]=l.useState(!1),[ee,we]=l.useState(),[ve,Ue]=l.useState(W),[ft,We]=l.useState(!1),rt=25,[Ke,lt]=l.useState({take:rt}),[Wt,lr]=l.useState(!1),Js=l.useRef(null),Xs=l.useRef(null),ht=l.useMemo(()=>kt(n),[n]),fe=l.useMemo(()=>{let I=Dt(s);return I.length>0?At.from(I.map(q=>ye(q)).filter(q=>q!=null).map(q=>q)):At.forType(ht,je)},[s,ht,je]),Pa=l.useMemo(()=>Ae(fe.AnyQuery?.viewModel?.name||fe.AnyQuery?.dataModel.name),[fe.AnyQuery]),Ys=l.useMemo(()=>[],[Z]);function ri(){let I=Dt(c);return I.length>0?I:Ys.length>0?Ys:[]}const or=l.useMemo(()=>{let q=ri().map(X=>X.toLowerCase());const ie=et(Pa);return q.length>0?q.map(X=>ie.find(Me=>Me.name.toLowerCase()===X)).filter(X=>X!=null):ie},[Pa,c,Ys]),si=l.useMemo(()=>{let I=or.map(ie=>ie.name),q=Dt(Ke.selectedColumns).map(ie=>ie.toLowerCase());return q.length>0?I.filter(ie=>q.includes(ie.toLowerCase())):I},[or,Ke.selectedColumns]),ni=l.useMemo(()=>ge.some(I=>I.settings.filters.length>0||!!I.settings.sort)||Ke.selectedColumns,[ge,Ke.selectedColumns]),Rs=l.useMemo(()=>ge.map(I=>I.settings.filters.length).reduce((I,q)=>I+q,0),[ge]),Ba=l.useMemo(()=>et(Ae(ht||fe.AnyQuery?.dataModel.name)),[ht,fe.AnyQuery]),ir=l.useMemo(()=>jt(Ae(ht||fe.AnyQuery?.dataModel.name)),[ht,fe.AnyQuery]),gt=l.useMemo(()=>Ke.take??rt,[Ke.take]),st=l.useMemo(()=>(He.response?u.mapGet(He.response,"results"):null)??[],[He.response]),Kt=l.useMemo(()=>(He.response?.total||st.length)??0,[He.response,st]),Ha=l.useMemo(()=>ve>0,[ve]),Ua=l.useMemo(()=>ve>0,[ve]),qa=l.useMemo(()=>st.length>=gt,[st.length,gt]),_a=l.useMemo(()=>st.length>=gt,[st.length,gt]),Qa={NoQuery:"No Query API was found"},Wa=l.useMemo(()=>ht||fe.AnyQuery?.dataModel.name,[ht,fe.AnyQuery]),Gt=l.useMemo(()=>Y||Wa,[Y,Wa]),ai=l.useMemo(()=>D||`New ${Gt}`,[D,Gt]),en=()=>`${r}/ApiPrefs/${ht||fe.AnyQuery?.dataModel.name}`,_r=I=>`Column/${r}:${ht||fe.AnyQuery?.dataModel.name}.${I}`,Qr=I=>`<span class="text-yellow-700">${I}</span>`,Ka=l.useMemo(()=>{if(!je)return Qr(`AppMetadata not loaded, see <a class="${Or.blue}" href="https://docs.servicestack.net/vue/use-metadata" target="_blank">useMetadata()</a>`);let q=Dt(s).map(X=>ye(X)==null?X:null).filter(X=>X!=null);if(q.length>0)return Qr(`Unknown API${q.length>1?"s":""}: ${q.join(", ")}`);let ie=fe;return ie.empty?Qr("Missing DataModel in property 'type' or AutoQuery APIs to use in property 'apis'"):ie.AnyQuery?null:Qr(Qa.NoQuery)},[je,s,fe]),Ga=l.useMemo(()=>fe.AnyQuery&&Ge(fe.AnyQuery),[fe.AnyQuery]),Za=l.useMemo(()=>fe.Create&&Ge(fe.Create),[fe.Create]),Ja=l.useMemo(()=>fe.AnyUpdate&&Ge(fe.AnyUpdate),[fe.AnyUpdate]),li=l.useMemo(()=>$r(fe.Create),[fe.Create]),Xa=l.useMemo(()=>$r(fe.Delete),[fe.Delete]);function Ya(I){if(I){if(x)return x(I);const q=Ba.find(ie=>ie.name.toLowerCase()==I.toLowerCase());if(q)return!mn(q)}return!1}function cr(I){G?.(I),J("queryString")&&vs(I)}async function Wr(I){let q=ve+I;q<0&&(q=0);const ie=Math.floor(Kt/gt)*gt;q>ie&&(q=ie),Ue(q),cr({skip:q||void 0}),await pt()}async function tn(I,q){if(Ye(null),$e(q),!I||!q)return;let ie=Xt(fe.AnyQuery,{[I]:q});const X=await xe.api(ie);if(X.succeeded){let Me=u.mapGet(X.response,"results")?.[0];Me||console.warn(`API ${fe.AnyQuery?.request.name}(${I}:${q}) returned no results`),Ye(Me)}}async function oi(I,q){C?.(I,q);const ie=ir?.name,X=ie?u.mapGet(I,ie):null;!ie||!X||(cr({edit:X}),tn(ie,X))}function ii(I,q){if(!J("filtering"))return;let ie=q.target;if(Ya(I)&&ie?.tagName!=="TD"){let X=ie?.closest("TABLE")?.getBoundingClientRect(),Me=ge.find(qe=>qe.name.toLowerCase()==I.toLowerCase());if(Me&&X){let qe=318,It=X.x+qe+10;we({column:Me,topLeft:{x:Math.max(Math.floor(q.clientX+qe/2),It),y:X.y+45}})}}R?.(I,q)}function ci(){we(null)}async function di(I){let q=ee?.column;q&&(q.settings=I,be.setItem(_r(q.name),JSON.stringify(q.settings)),await pt()),we(null)}async function ui(I){be.setItem(_r(I.name),JSON.stringify(I.settings)),await pt()}async function fi(I){_(!1),lt(I),be.setItem(en(),JSON.stringify(I)),await pt()}function hi(I){Object.assign(Ie,I),Ra()}function Ra(){Js.current?.forceUpdate(),Xs.current?.forceUpdate()}async function pt(){await el(rn())}async function gi(){await pt()}const pi=/iPad|iPhone|iPod/.test(navigator.userAgent);async function el(I){const q=fe.AnyQuery;if(!q){console.error(Qa.NoQuery);return}let ie=Xt(q,I),X=u.delaySet(qe=>{ut(new u.ApiResult),lr(qe)}),Me=await xe.api(ie);X(),pi?setTimeout(()=>ut(Me),0):ut(Me)}function rn(){let I={include:"total",take:gt},q=Dt(Ke.selectedColumns||c);if(q.length>0){let X=ir;X&&!q.includes(X.name)&&(q=[X.name,...q]);const Me=Ba,qe=[];q.forEach(It=>{const fr=Me.find(xi=>xi.name.toLowerCase()==It.toLowerCase());fr?.ref?.selfId&&qe.push(fr.ref.selfId)}),qe.forEach(It=>{q.includes(It)||q.push(It)}),I.fields=Xn(q).join(",")}let ie=[];if(ge.forEach(X=>{X.settings.sort&&ie.push((X.settings.sort==="DESC"?"-":"")+X.name),X.settings.filters.forEach(Me=>{let qe=Me.key.replace("%",X.name);I[qe]=Me.value})}),K&&Object.keys(K).forEach(X=>{I[X]=K[X]}),J("queryString")&&J("queryFilters")){const X=location.search?location.search:location.hash.includes("?")?"?"+u.rightPart(location.hash,"?"):"";let Me=u.queryString(X);if(Object.keys(Me).forEach(qe=>{or.find(fr=>fr.name.toLowerCase()===qe.toLowerCase())&&(I[qe]=Me[qe])}),typeof Me.skip<"u"){const qe=parseInt(Me.skip);isNaN(qe)||(Ue(qe),I.skip=qe)}}return typeof I.skip>"u"&&ve>0&&(I.skip=ve),ie.length>0&&(I.orderBy=ie.join(",")),I}function mi(){const I=tl("csv");ys(I),typeof window<"u"&&window.open(I)}function vi(){const I=tl("json");ys(I),We(!0),setTimeout(()=>We(!1),3e3)}function tl(I="json"){const q=rn(),ie=`/api/${fe.AnyQuery?.request.name}`,X=u.combinePaths(xe.api.baseUrl,u.appendQueryString(ie,{...q,jsconfig:"edv"}));return X.indexOf("?")>=0?u.leftPart(X,"?")+"."+I+"?"+u.rightPart(X,"?"):X+".json"}async function yi(){ge.forEach(I=>{I.settings={filters:[]},be.removeItem(_r(I.name))}),lt({take:rt}),be.removeItem(en()),await pt()}function wi(){Oe(!0),cr({create:null})}function dr(){Ye(null),$e(null),cr({edit:void 0})}function Kr(){Oe(!1),cr({create:void 0})}async function ur(){await pt(),dr()}async function rl(){await pt(),Kr()}function sl(){ut(new u.ApiResult),pe(new u.ApiResult),Oe(!1),$e(null),Ye(null),_(!1),we(null),Ue(W),We(!1),lt({take:rt}),lr(!1);const I=a||Ar(be.getItem(en()));I&&lt(I);const q=or.map(X=>({name:X.name,type:X.type,meta:X,settings:Object.assign({filters:[]},Ar(be.getItem(_r(X.name))))}));Be(q),isNaN(W)||Ue(W);let ie=ir?.name;if(J("queryString")){const X=location.search?location.search:location.hash.includes("?")?"?"+u.rightPart(location.hash,"?"):"";let Me=u.queryString(X);typeof Me.create<"u"?Oe(typeof Me.create<"u"):ie&&(typeof Me.edit=="string"||typeof Me.edit=="number")&&tn(ie,Me.edit)}O===!0&&Oe(!0),ie&&B!=null&&tn(ie,B)}return l.useImperativeHandle(Ne,()=>({update:pt,search:el,createRequestArgs:rn,reset:sl,createDone:Kr,createSave:rl,editDone:dr,editSave:ur,forceUpdate:Ra,setEdit:hi,edit:Ie,createForm:Js.current,editForm:Xs.current,apiPrefs:Ke,results:st,skip:ve,take:gt,total:Kt})),l.useEffect(()=>{z.interceptors.has("AutoQueryGrid.new")&&z.interceptors.invoke("AutoQueryGrid.new",{props:{id:r,type:n}})},[]),l.useEffect(()=>{sl(),pt()},[]),Ka?t.jsx("div",{dangerouslySetInnerHTML:{__html:Ka}}):Ga?t.jsx(Fs,{invalidAccess:Ga}):t.jsxs("div",{className:"pt-1",children:[H("forms")&&Qe&&fe.Create&&t.jsx(t.Fragment,{children:Za?t.jsx(js,{title:`Create ${Gt}`,invalidAccess:Za,alertClass:"text-yellow-700",onDone:Kr}):t.jsx(_s,{ref:Js,type:fe.Create.request.name,configureField:E,onDone:Kr,onSave:rl})}),H("forms")&&Ie&&fe.AnyUpdate&&t.jsx(t.Fragment,{children:Ja?t.jsx(js,{title:`Update ${Gt}`,invalidAccess:Ja,alertClass:"text-yellow-700",onDone:dr}):t.jsx(Oa,{ref:Xs,value:Ie,type:fe.AnyUpdate.request.name,deleteType:Xa?fe.Delete.request.name:void 0,configureField:E,onDone:dr,onSave:ur,onDelete:ur})}),H("forms")&&Ie&&!fe.AnyUpdate&&t.jsx(Fa,{model:Ie,apis:fe,deleteType:Xa?fe.Delete.request.name:void 0,onDone:dr,onSave:ur,onDelete:ur}),H("toolbar")&&t.jsxs(t.Fragment,{children:[Re&&t.jsx(Ks,{columns:or,prefs:Ke,onDone:()=>_(!1),onSave:fi}),t.jsxs("div",{className:"pl-1 pt-1 flex flex-wrap",children:[t.jsxs("div",{className:"flex mt-1",children:[H("preferences")&&t.jsx("button",{type:"button",className:"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400",title:`${Gt} Preferences`,onClick:()=>_(!Re),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("g",{strokeWidth:"1.5",fill:"none",children:t.jsx("path",{d:"M9 3H3.6a.6.6 0 0 0-.6.6v16.8a.6.6 0 0 0 .6.6H9M9 3v18M9 3h6M9 21h6m0-18h5.4a.6.6 0 0 1 .6.6v16.8a.6.6 0 0 1-.6.6H15m0-18v18",stroke:"currentColor"})})})}),H("pagingNav")&&t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",className:`pl-2 ${Ha?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"First page",disabled:!Ha,onClick:()=>Wr(-Kt),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6l6 6zM6 6h2v12H6z",fill:"currentColor"})})}),t.jsx("button",{type:"button",className:`pl-2 ${Ua?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"Previous page",disabled:!Ua,onClick:()=>Wr(-gt),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M15.41 7.41L14 6l-6 6l6 6l1.41-1.41L10.83 12z",fill:"currentColor"})})}),t.jsx("button",{type:"button",className:`pl-2 ${qa?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"Next page",disabled:!qa,onClick:()=>Wr(gt),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z",fill:"currentColor"})})}),t.jsx("button",{type:"button",className:`pl-2 ${_a?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,title:"Last page",disabled:!_a,onClick:()=>Wr(Kt),children:t.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6l-6-6zM16 6h2v12h-2z",fill:"currentColor"})})})]})]}),H("pagingInfo")&&t.jsx("div",{className:"flex mt-1",children:t.jsxs("div",{className:"px-4 text-lg text-black dark:text-white",children:[Wt&&t.jsx("span",{children:"Querying..."}),st.length>0&&t.jsxs("span",{children:[t.jsx("span",{className:"hidden xl:inline",children:"Showing Results "}),ve+1," - ",Math.min(ve+st.length,Kt)," ",t.jsxs("span",{children:[" of ",Kt]})]}),!Wt&&He.completed&&st.length===0&&t.jsx("span",{children:"No Results"})]})}),t.jsxs("div",{className:"flex flex-wrap",children:[H("refresh")&&t.jsx("div",{className:"pl-2 mt-1",children:t.jsx("button",{type:"button",onClick:gi,title:"Refresh",className:re,children:t.jsx("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 20v-5h-5M4 4v5h5m10.938 2A8.001 8.001 0 0 0 5.07 8m-1.008 5a8.001 8.001  0 0 0 14.868 3"})})})}),H("downloadCsv")&&t.jsx("div",{className:"pl-2 mt-1",children:t.jsxs("button",{type:"button",onClick:mi,title:"Download CSV",className:re,children:[t.jsxs("svg",{className:"w-5 h-5 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[t.jsx("path",{d:"M28.781 4.405h-10.13V2.018L2 4.588v22.527l16.651 2.868v-3.538h10.13A1.162 1.162 0 0 0 30 25.349V5.5a1.162 1.162 0 0 0-1.219-1.095zm.16 21.126H18.617l-.017-1.889h2.487v-2.2h-2.506l-.012-1.3h2.518v-2.2H18.55l-.012-1.3h2.549v-2.2H18.53v-1.3h2.557v-2.2H18.53v-1.3h2.557v-2.2H18.53v-2h10.411z",fill:"#20744a",fillRule:"evenodd"}),t.jsx("path",{fill:"#20744a",d:"M22.487 7.439h4.323v2.2h-4.323z"}),t.jsx("path",{fill:"#20744a",d:"M22.487 10.94h4.323v2.2h-4.323z"}),t.jsx("path",{fill:"#20744a",d:"M22.487 14.441h4.323v2.2h-4.323z"}),t.jsx("path",{fill:"#20744a",d:"M22.487 17.942h4.323v2.2h-4.323z"}),t.jsx("path",{fill:"#20744a",d:"M22.487 21.443h4.323v2.2h-4.323z"}),t.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M6.347 10.673l2.146-.123l1.349 3.709l1.594-3.862l2.146-.123l-2.606 5.266l2.606 5.279l-2.269-.153l-1.532-4.024l-1.533 3.871l-2.085-.184l2.422-4.663l-2.238-4.993z"})]}),t.jsx("span",{className:"text-green-900 dark:text-green-100",children:"Excel"})]})}),H("copyApiUrl")&&t.jsx("div",{className:"pl-2 mt-1",children:t.jsxs("button",{type:"button",onClick:vi,title:"Copy API URL",className:re,children:[ft?t.jsx("svg",{className:"w-5 h-5 mr-1 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):t.jsx("svg",{className:"w-5 h-5 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsxs("g",{fill:"none",children:[t.jsx("path",{d:"M8 4v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.242a2 2 0 0 0-.602-1.43L16.083 2.57A2 2 0 0 0 14.685 2H10a2 2 0 0 0-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M16 18v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),t.jsx("span",{className:"whitespace-nowrap",children:"Copy URL"})]})}),ni&&H("resetPreferences")&&t.jsx("div",{className:"pl-2 mt-1",children:t.jsx("button",{type:"button",onClick:yi,title:"Reset Preferences & Filters",className:re,children:t.jsx("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",d:"M6.78 2.72a.75.75 0 0 1 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75a.75.75 0 0 1 1.5 0a6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0Z"})})})}),H("filtersView")&&Rs>0&&t.jsx("div",{className:"pl-2 mt-1",children:t.jsxs("button",{type:"button",onClick:()=>De(ne=="filters"?null:"filters"),className:re,"aria-expanded":"false",children:[t.jsx("svg",{className:"flex-none w-5 h-5 mr-2 text-gray-400 dark:text-gray-500 group-hover:text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),t.jsxs("span",{className:"mr-1",children:[Rs," ",Rs==1?"Filter":"Filters"]}),ne!="filters"?t.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}):t.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})})]})}),H("newItem")&&fe.Create&&li&&t.jsx("div",{className:"pl-2 mt-1",children:t.jsxs("button",{type:"button",onClick:wi,title:Gt,className:re,children:[t.jsx("svg",{className:"w-5 h-5 mr-1 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"})}),t.jsx("span",{className:"whitespace-nowrap",children:ai})]})})]})]})]}),ne=="filters"&&t.jsx(Ps,{className:"border-y border-gray-200 dark:border-gray-800 py-8 my-2",definitions:Pe,columns:ge,onDone:()=>De(null),onChange:ui}),t.jsx(tr,{status:tt.error??He.error}),Wt?t.jsx(Cs,{className:"p-2"}):null,ee&&t.jsx(zs,{definitions:Pe,column:ee.column,topLeft:ee.topLeft,onDone:ci,onSave:di}),st.length>0&&t.jsx(Hs,{id:r,items:st,type:n,selectedColumns:si,className:"mt-1",tableStyle:f,gridClass:T,grid2Class:F,grid3Class:ae,grid4Class:se,tableClass:oe,theadClass:Ee,theadRowClass:Fe,theadCellClass:he,tbodyClass:ue,rowClass:Se,onRowSelected:oi,rowStyle:S,headerTitle:b,headerTitles:N,visibleFrom:M,onHeaderSelected:ii,children:(I,q)=>J("filtering")&&Ya(I)?t.jsxs("div",{className:"cursor-pointer flex justify-between items-center hover:text-gray-900 dark:hover:text-gray-50",children:[t.jsx("span",{className:"mr-1 select-none",children:q}),t.jsx(Bs,{column:ge.find(ie=>ie.name.toLowerCase()===I.toLowerCase()),isOpen:ee?.column.name===I})]}):t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("span",{className:"mr-1 select-none",children:q})})})]})});ja.displayName="AutoQueryGrid";const Va=l.createContext(null),Xo=l.forwardRef(({formStyle:e="card",headerClass:r="p-6",submitLabel:s="Submit",jsconfig:n="eccn,edv",showLoading:a=!0,type:o,metaType:i,value:c,onChange:d,panelClass:h,formClass:g,innerFormClass:m,bodyClass:p,headingClass:y,subHeadingClass:A,buttonsClass:v,heading:L,subHeading:k,configureField:w,configureFormLayout:b,allowSubmit:N,onSuccess:M,onError:j,onDone:S,headingSlot:Y,subheadingSlot:D,headerSlot:U,footerSlot:x,buttonsSlot:$,leftbuttonsSlot:E,rightbuttonsSlot:W},O)=>{const B=l.useRef(),[K,R]=l.useState(1),C=l.useRef(null),G=Ct(),{typeOf:Z,createDto:Ne}=Xe(),[me,Le]=l.useState(new u.ApiResult),te=l.useMemo(()=>h||ze.panelClass(e),[h,e]),be=l.useMemo(()=>g||(e=="card"?"shadow sm:rounded-md":Bt.formClass),[g,e]),xe=l.useMemo(()=>y||ze.headingClass(e),[y,e]),Ce=l.useMemo(()=>A||ze.subHeadingClass(e),[A,e]),V=l.useMemo(()=>typeof v=="string"?v:ze.buttonsClass,[v]),Q=l.useMemo(()=>o?kt(o):c?.getTypeName?c.getTypeName():null,[o,c]),de=l.useMemo(()=>i??Z(Q),[i,Q]);function J(){return typeof o=="string"?Ne(o):o?new o:c}const H=()=>c||J(),[f,T]=l.useState(H()),F=l.useMemo(()=>G.loading.current,[G.loading.current]),ae=l.useMemo(()=>L??(de?.description||u.humanize(Q)),[L,de,Q]);function se(){R(pe=>pe+1),T(H())}async function oe(pe){T(ne=>({...ne,...pe})),se()}async function Ee(pe){if(!pe||pe.tagName!="FORM"){console.error("Not a valid form",pe);return}const ne=J();let De=u.map(ne?.getMethod,ke=>typeof ke=="function"?ke():null)||"POST",Qe=u.map(ne?.createResponse,ke=>typeof ke=="function"?ke():null)==null,Oe;if(u.HttpMethods.hasRequestBody(De)){let ke=new ne.constructor,$e=new FormData(pe);Qe?Oe=await G.apiFormVoid(ke,$e,{jsconfig:n}):Oe=await G.apiForm(ke,$e,{jsconfig:n})}else{let ke=new ne.constructor(u.omitEmpty(f));console.debug("AutoForm.submit",ke),Qe?Oe=await G.apiVoid(ke,{jsconfig:n}):Oe=await G.api(ke,{jsconfig:n})}Le(Oe),Oe.succeeded?(M?.(Oe.response),tt()):j?.(Oe.error)}async function Fe(){Ee(C.current)}function he(pe){d?.(pe)}const[ue,re]=l.useState(),[Se,je]=l.useState();function Ae(pe,ne){re(pe),je(()=>ne)}async function ye(pe){Se&&Se(pe),re(void 0),je(void 0)}const Te={openModal:Ae};l.useImperativeHandle(O,()=>({forceUpdate:se,props:{formStyle:e,headerClass:r,submitLabel:s,jsconfig:n,showLoading:a,type:o,metaType:i,modelValue:c,"onUpdate:modelValue":d,panelClass:h,formClass:g,innerFormClass:m,bodyClass:p,headingClass:y,subHeadingClass:A,buttonsClass:v,heading:L,subHeading:k,configureField:w,configureFormLayout:b,allowSubmit:N,onSuccess:M,onError:j,onDone:S},setModel:oe,formFields:B,submit:Fe,close:tt,model:f}));function Ge(){S?.()}const[Pe,ge]=l.useState(!1),[Be,He]=l.useState(""),ut={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};l.useEffect(()=>{if(Nt(ut,He,Pe),!Pe){const pe=setTimeout(Ge,700);return()=>clearTimeout(pe)}},[Pe]),l.useEffect(()=>{ge(!0)},[]);function tt(){e=="slideOver"?ge(!1):Ge()}return l.useEffect(()=>{const pe=ne=>{ne.key==="Escape"&&tt()};return window.addEventListener("keydown",pe),()=>window.removeEventListener("keydown",pe)},[]),de?e=="card"?t.jsxs(Va.Provider,{value:Te,children:[t.jsx("div",{className:te,children:t.jsxs("form",{ref:C,onSubmit:pe=>{pe.preventDefault(),Ee(pe.target)},autoComplete:"off",className:m,children:[t.jsxs("div",{className:p,children:[t.jsxs("div",{className:r,children:[Y||t.jsx("h3",{className:xe,children:ae}),D||k&&t.jsx("p",{className:Ce,children:k}),!D&&!k&&de?.notes&&t.jsx("p",{className:`notes ${Ce}`,dangerouslySetInnerHTML:{__html:de.notes}})]}),U,t.jsx("input",{type:"submit",className:"hidden"}),t.jsx(wt,{ref:B,type:o,value:f,onChange:he,api:me,configureField:w,configureFormLayout:b},K),x]}),$||t.jsxs("div",{className:V,children:[t.jsx("div",{children:E}),t.jsx("div",{children:a&&F&&t.jsx(Lt,{})}),t.jsxs("div",{className:"flex justify-end",children:[t.jsx("div",{}),t.jsx(ct,{disabled:F||(N?!N(f):!1),children:s}),W]})]})]})}),ue?.name=="ModalLookup"&&ue.ref&&t.jsx(St,{refInfo:ue.ref,onDone:ye,configureField:w})]}):t.jsxs(Va.Provider,{value:Te,children:[t.jsxs("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:tt,className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{onMouseDown:pe=>pe.stopPropagation(),className:"pointer-events-none fixed inset-y-0 right-0 flex pl-10",children:t.jsx("div",{className:`pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg ${Be}`,children:t.jsxs("form",{ref:C,className:be,onSubmit:pe=>{pe.preventDefault(),Ee(pe.target)},children:[t.jsx("div",{className:"flex min-h-0 flex-1 flex-col overflow-auto",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between space-x-3",children:[t.jsxs("div",{className:"space-y-1",children:[Y||t.jsx("h3",{className:xe,children:ae}),D||k&&t.jsx("p",{className:Ce,children:k}),!D&&!k&&de?.notes&&t.jsx("p",{className:`notes ${Ce}`,dangerouslySetInnerHTML:{__html:de.notes}})]}),t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Qt,{buttonClass:"bg-gray-50 dark:bg-gray-900",onClose:tt})})]})}),U,t.jsx(wt,{ref:B,type:o,value:f,onChange:he,api:me,configureField:w,configureFormLayout:b},K),x]})}),t.jsxs("div",{className:V,children:[t.jsx("div",{children:E}),t.jsx("div",{children:a&&F&&t.jsx(Lt,{})}),t.jsxs("div",{className:"flex justify-end",children:[t.jsx(dt,{onClick:tt,disabled:F,children:"Cancel"}),t.jsx(ct,{className:"ml-4",disabled:F||(N?!N(f):!1),children:s}),W]})]})]})})})})})]}),ue?.name=="ModalLookup"&&ue.ref&&t.jsx(St,{refInfo:ue.ref,onDone:ye,configureField:w})]}):t.jsx("div",{children:t.jsxs("p",{className:"text-red-700",children:["Could not create form for unknown ",t.jsx("b",{children:"type"})," ",Q]})})});function Yo({id:e="tabs",tabs:r,selected:s,param:n="tab",label:a,tabClass:o,bodyClass:i="p-4",url:c=!0,clearQuery:d=!1}){const h=l.useMemo(()=>Object.keys(r),[r]),g=k=>a?a(k):u.humanize(k),[m,p]=l.useState("");function y(k){if(p(k),c){const w=h[0];vs({tab:k===w?void 0:k},d)}}function A(k){return m===k}const v=l.useMemo(()=>`${100/Object.keys(r).length}%`,[r]);l.useEffect(()=>{let k=s||Object.keys(r)[0];if(c){const w=location.search?location.search:location.hash.includes("?")?"?"+u.rightPart(location.hash,"?"):"",N=u.queryString(w)[n];N&&(k=N)}p(k)},[s,r,c,n]);const L=m?r[m]:null;return t.jsxs("div",{children:[t.jsxs("div",{className:"sm:hidden",children:[t.jsx("label",{htmlFor:e,className:"sr-only",children:"Select a tab"}),t.jsx("select",{id:e,name:e,className:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",onChange:k=>y(k.target.value),value:m,children:h.map(k=>t.jsx("option",{value:k,children:g(k)},k))})]}),t.jsx("div",{className:"hidden sm:block",children:t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex","aria-label":"Tabs",children:h.map(k=>t.jsx("a",{href:"#",onClick:w=>{w.preventDefault(),y(k)},style:{width:v},className:A(k)?`border-indigo-500 text-indigo-600 py-4 px-1 text-center border-b-2 font-medium text-sm ${o||""}`:`border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 py-4 px-1 text-center border-b-2 font-medium text-sm ${o||""}`,children:g(k)},k))})})}),t.jsx("div",{className:i,children:L&&t.jsx(L,{})})]})}function Ro({className:e}){const r=typeof document<"u"?document.documentElement:null,s=()=>r?.classList.contains("dark")??!1,[n,a]=l.useState(()=>typeof localStorage<"u"?localStorage.getItem("color-scheme")==="dark":!1);l.useEffect(()=>{a(s())},[]);function o(){s()?r?.classList.remove("dark"):r?.classList.add("dark");const i=s();a(i),typeof localStorage<"u"&&localStorage.setItem("color-scheme",i?"dark":"light")}return t.jsx("button",{type:"button",className:`bg-gray-200 dark:bg-gray-700 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black ${e??""}`,role:"switch","aria-checked":"false",onClick:o,children:t.jsxs("span",{className:`${n?"translate-x-0":"translate-x-5"} pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white dark:bg-black shadow transform ring-0 transition ease-in-out duration-200`,children:[t.jsx("span",{className:`${n?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100"} absolute inset-0 h-full w-full flex items-center justify-center transition-opacity`,"aria-hidden":"true",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",children:t.jsx("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"})})}),t.jsx("span",{className:`${n?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200"} absolute inset-0 h-full w-full flex items-center justify-center transition-opacity`,"aria-hidden":"true",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-indigo-600",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",children:t.jsx("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"})})})]})})}function ei({title:e="Sign In",tabs:r=!0,oauth:s=!0,provider:n,onLogin:a}){const{getMetadata:o,createDto:i}=Xe(),c=Ct(),d=l.useContext(Dr),{signIn:h}=Ir(),g=o({assert:!0}),m=g.plugins.auth,p=typeof document<"u"?document.baseURI:"",y=g.app.baseUrl,[A,v]=l.useState(()=>i("Authenticate")),[L,k]=l.useState(new u.ApiResult),[w,b]=l.useState(n);l.useEffect(()=>{m?.authProviders.map(O=>O.formLayout).filter(O=>O).forEach(O=>O.forEach(B=>{v(K=>({...K,[B.id]:B.type==="checkbox"?!1:""}))}))},[m]);const N=l.useMemo(()=>m?.authProviders.filter(O=>O.formLayout)||[],[m]),M=l.useMemo(()=>N[0]||{},[N]),j=l.useMemo(()=>N[Math.max(N.length-1,0)]||{},[N]),S=l.useMemo(()=>(w?m?.authProviders.find(O=>O.name===w):null)??M,[w,m,M]),Y=O=>O===!1||O==="false";function D(O){return O.label||O.navItem&&O.navItem.label}const U=l.useMemo(()=>(S?.formLayout||[]).map(O=>Object.assign({},O,{type:O.type?.toLowerCase(),autocomplete:O.autocomplete||(O.type?.toLowerCase()==="password"?"current-password":void 0)||(O.id.toLowerCase()==="username"?"username":void 0),css:Object.assign({field:"col-span-12"},O.css)})),[S]),x=l.useMemo(()=>Y(s)?[]:m?.authProviders.filter(O=>O.type==="oauth")||[],[s,m]),$=l.useMemo(()=>{let O=u.each(m?.authProviders.filter(K=>K.formLayout&&K.formLayout.length>0),(K,R)=>{let C=D(R)||u.toPascalCase(R.name);K[C]=R.name===M.name?"":R.name});const B=S;return B&&Y(r)&&(O={[D(B)||u.toPascalCase(B.name)]:B}),O},[m,S,r,M]),E=l.useMemo(()=>{let O=U.map(B=>B.id).filter(B=>B);return L.summaryMessage(O)},[L,U]);async function W(O){O.preventDefault();const B={...A};B.provider=S.name,S.name==="authsecret"?(d.headers.set("authsecret",B.authsecret),v(i("Authenticate"))):S.name==="basic"?(d.setCredentials(B.UserName,B.Password),v(i("Authenticate")),B.UserName=null,B.Password=null):(S.type==="Bearer"||S.name==="jwt")&&(d.bearerToken=B.BearerToken,v(i("Authenticate")));const K=await c.api(B);if(k(K),K.succeeded){const R=K.response;h(R),a?.(R),k(new u.ApiResult),v(i("Authenticate"))}}return m?t.jsxs("div",{className:"min-h-full flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[t.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-gray-50",children:e}),Object.keys($).length>1&&t.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-300",children:t.jsx("span",{className:"relative z-0 inline-flex shadow-sm rounded-md",children:Object.entries($).map(([O,B])=>t.jsx("a",{href:`?provider=${B}`,onClick:K=>{K.preventDefault(),b(B)},className:`${B===""||B===j.name?"rounded-l-md":B===j.name?"rounded-r-md -ml-px":"-ml-px"} ${w===B?"z-10 outline-none ring-1 ring-indigo-500 border-indigo-500":""} cursor-pointer relative inline-flex items-center px-4 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-black text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-900`,children:O},O))})})]}),t.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[E&&t.jsx(tr,{className:"mb-3",errorSummary:E}),t.jsxs("div",{className:"bg-white dark:bg-black py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[U.length>0&&t.jsxs("form",{onSubmit:W,children:[t.jsx(wt,{value:A,onChange:v,formLayout:U,api:L,hideSummary:!0,divideClass:"",spaceClass:"space-y-6"}),t.jsx("div",{className:"mt-8",children:t.jsx(ct,{className:"w-full",children:"Sign In"})})]}),x.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),t.jsx("div",{className:"mt-6 grid grid-cols-3 gap-3",children:x.map(O=>t.jsx("div",{children:t.jsx("a",{href:`${y}${O.navItem.href}?continue=${p}`,title:D(O),className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-black text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-900",children:O.icon?t.jsx(Ht,{image:O.icon,className:"h-5 w-5 text-gray-700 dark:text-gray-200"}):t.jsxs("svg",{className:"h-5 w-5 text-gray-700 dark:text-gray-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[t.jsx("path",{d:"M16 8a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"}),t.jsx("path",{d:"M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm7.992 22.926A5.002 5.002 0 0 0 19 20h-6a5.002 5.002 0 0 0-4.992 4.926a12 12 0 1 1 15.985 0z",fill:"currentColor"})]})})},O.name))})]})]})]})]}):t.jsx("div",{children:"No Auth Plugin"})}const za=l.forwardRef(({children:e,mobiletitlebar:r},s)=>{const{transition:n}=Yn(),[a,o]=l.useState(!0),[i,c]=l.useState(""),[d,h]=l.useState(""),[g,m]=l.useState(""),p={entering:{cls:"transition-opacity ease-linear duration-300",from:"opacity-0",to:"opacity-100"},leaving:{cls:"transition-opacity ease-linear duration-300",from:"opacity-100",to:"opacity-0"}},y={entering:{cls:"transition ease-in-out duration-300 transform",from:"-translate-x-full",to:"translate-x-0"},leaving:{cls:"transition ease-in-out duration-300 transform",from:"translate-x-0",to:"-translate-x-full"}},A={entering:{cls:"ease-in-out duration-300",from:"opacity-0",to:"opacity-100"},leaving:{cls:"ease-in-out duration-300",from:"opacity-100",to:"opacity-0"}};function v(w){n(p,c,w),n(y,h,w),n(A,m,w),setTimeout(()=>o(w),300)}function L(){v(!0)}function k(){v(!1)}return l.useImperativeHandle(s,()=>({show:L,hide:k,toggle:v})),t.jsxs("div",{children:[a&&t.jsxs("div",{className:"relative z-10 lg:hidden",role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:`fixed inset-0 bg-gray-900/80 ${i}`}),t.jsx("div",{className:"fixed inset-0 flex",children:t.jsxs("div",{className:`relative mr-16 flex w-full max-w-xs flex-1 ${d}`,children:[t.jsx("div",{className:`absolute left-full top-0 flex w-16 justify-center pt-5 ${g}`,children:t.jsxs("button",{type:"button",onClick:k,className:"-m-2.5 p-2.5",children:[t.jsx("span",{className:"sr-only",children:"Close sidebar"}),t.jsx("svg",{className:"h-6 w-6 text-white dark:text-black",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),t.jsx("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white dark:bg-black px-6 pb-2",children:e})]})})]}),t.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-10 lg:flex lg:w-72 lg:flex-col",children:t.jsx("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-black px-6",children:e})}),t.jsxs("div",{className:"sticky top-0 flex items-center gap-x-6 bg-white dark:bg-black px-4 py-4 shadow-sm sm:px-6 lg:hidden",children:[t.jsxs("button",{type:"button",onClick:L,className:"-m-2.5 p-2.5 text-gray-700 dark:text-gray-200 lg:hidden",children:[t.jsx("span",{className:"sr-only",children:"Open sidebar"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]}),r]})]})});za.displayName="SidebarLayout";function ti({to:e,children:r,...s}){const{config:n}=bt(),a=o=>{o.preventDefault(),n.navigate(e??"/")};return t.jsx("a",{onClick:a,title:e,href:"javascript:void(0)",...s,children:r})}P.Alert=ta,P.AlertSuccess=to,P.ApiStateContext=vt,P.AutoCreateForm=_s,P.AutoEditForm=Oa,P.AutoForm=Xo,P.AutoFormFields=wt,P.AutoQueryGrid=ja,P.AutoViewForm=Fa,P.Autocomplete=Us,P.Breadcrumb=Go,P.Breadcrumbs=Ko,P.CellFormat=Na,P.CheckboxInput=Ma,P.ClientContext=Dr,P.CloseButton=Qt,P.Combobox=qs,P.ConfirmDelete=Ur,P.DarkModeToggle=Ro,P.DataGrid=Hs,P.DynamicInput=Ta,P.EnsureAccess=Fs,P.EnsureAccessDialog=js,P.ErrorSummary=tr,P.FileInput=Sa,P.FilterColumn=zs,P.FilterViews=Ps,P.FormLoading=Lt,P.HtmlFormat=qr,P.Icon=Ht,P.InputDescription=ro,P.Loading=Cs,P.LookupInput=Ca,P.MarkdownInput=Ea,P.MarkupFormat=Gs,P.MarkupModel=Zs,P.MetadataApp=eo,P.ModalDialog=Ws,P.ModalLookup=St,P.NavList=Zo,P.NavListItem=Jo,P.OutlineButton=Qo,P.PreviewFormat=ka,P.PrimaryButton=ct,P.QueryPrefs=Ks,P.RouterLink=ti,P.SecondaryButton=dt,P.SelectInput=Vs,P.SettingsIcons=Bs,P.SidebarLayout=za,P.SignIn=ei,P.SlideOver=ba,P.Sole=z,P.Tabs=Yo,P.TagInput=La,P.TextInput=Fr,P.TextLink=Wo,P.TextareaInput=Aa,P.css=Rl,P.useAuth=Ir,P.useClient=Ct,P.useConfig=bt,P.useFiles=fn,P.useFormatters=zl,P.useMetadata=Xe,P.useUtils=Yn,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})}));
